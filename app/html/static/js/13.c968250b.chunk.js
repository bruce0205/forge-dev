(this["webpackJsonpbonvies-pos"]=this["webpackJsonpbonvies-pos"]||[]).push([[13],{239:function(e,t,a){"use strict";var c=a(4),n=a(0),r=a(60),i=a(1),o={shop:5,company:10,enterprise:15};t.a=function(e){return function(t){return Object(r.b)((function(e){return{auth:e.auth.authenticated,level:e.auth.level}}))((function(a){var r=a.auth,s=a.level,l=a.history;return Object(n.useEffect)((function(){r?e&&(!s||o[e]>o[s])&&l.push("/"):l.push("/signin")}),[r,s,l]),Object(i.jsx)(t,Object(c.a)({},a))}))}}},349:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),r=a(34),i=a(233),o=a(270),s=a(7),l=a.n(s),d=a(10),m=a(4),b=a(19),p=a(113),h=a(60),u=a(354),j=a(259),g=a(54),x=a(1),f={flex:"1 1 auto",display:"flex",flexDirection:"column",minHeight:0,pb:"2rem","& .comm-header":{backgroundColor:"#dadada",lineHeight:2,"& .comm-info-header":{display:"inline-flex",alignItems:"center",width:"85%"},"& .comm-btn-header":{display:"inline-block",width:"15%",textAlign:"center",paddingRight:"5px"}},"& .comm-list":{overflowY:"auto",overflowX:"hidden","& .comm-list-wrapper > div":{lineHeight:2.5,bgcolor:"background.paper",borderBottom:"1px dashed #666666",overflow:"hidden",transition:"all 0.04s linear"},"& .comm-list-wrapper > div.active":{zIndex:2,backgroundColor:"background.default"},"& .comm-list-wrapper > div:hover":{zIndex:2,backgroundColor:" #e4e4e4"},"& .comm-info":{display:"inline-flex",alignItems:"center",width:"85%"}},"& .comm-id":{display:"inline-block",width:"20%",padding:"0 0.5rem"},"& .comm-name":{display:"inline-block",width:"35%",padding:"0 0.5rem","& p":{fontWeight:"bold"}},"& .comm-price":{display:"inline-block",width:"17.5%",padding:"0 0.5rem",textAlign:"center"},"& .comm-class-name":{display:"inline-block",width:"25%",padding:"0 0.5rem",textAlign:"center"}},O=function(){var e=Object(c.useState)(""),t=Object(b.a)(e,2),a=t[0],r=t[1],s=Object(c.useState)({}),O=Object(b.a)(s,2),v=O[0],y=O[1],k=Object(c.useState)(""),w=Object(b.a)(k,2),N=w[0],R=w[1],I=Object(c.useState)(!1),C=Object(b.a)(I,2),S=C[0],W=C[1],z=Object(c.useState)(""),A=Object(b.a)(z,2),D=A[0],B=A[1],H=Object(c.useState)(!1),L=Object(b.a)(H,2),T=L[0],J=L[1],E=Object(c.useState)(""),F=Object(b.a)(E,2),_=F[0],X=F[1],Y=Object(h.d)((function(e){return e.auth})),q=Object(p.b)(["/stock-master",Y.authenticated,Object(m.a)({sort:"sale_start_date desc",limit:15},v)]),G=q.data,K=q.error,M=Object(p.b)(["/stock-category",Y.authenticated,{limit:"zero",catRank:1}]),P=M.data,Q=M.error,U=Object(p.b)(S?["/stock-category",Y.authenticated,{limit:"zero",catRank:2,parent:N}]:null),V=U.data,Z=U.error,$=Object(p.b)(T?["/stock-category",Y.authenticated,{limit:"zero",catRank:3,parent:D}]:null),ee=$.data,te=$.error,ae=G?G.list:[],ce=P?P.list:[],ne=V?V.list:[],re=ee?ee.list:[];K&&Object(g.d)(K,"#comm-mange"),Q&&Object(g.d)(Q,"#comm-mange"),Z&&Object(g.d)(Z,"#comm-mange"),te&&Object(g.d)(te,"#comm-mange");var ie,oe=function(){var e=Object(d.a)(l.a.mark((function e(t){var c,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.target.value,n=c?{categoryId:c,name:a}:{name:a},R(c),B(""),X(""),W(!0),J(!1),y(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(d.a)(l.a.mark((function e(t){var c,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.target.value,n=c?{categoryId:c,name:a}:{categoryId:N,name:a},B(c),X(""),J(!0),y(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(e){return e.map((function(e){return Object(x.jsx)("option",{value:e.categoryId,children:(t=e.categoryDescription,t.replaceAll(/[[\]]/g,""))},e.categoryId);var t}))},de=ae.map((function(e){return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"comm-info",children:[Object(x.jsx)("span",{className:"comm-id",children:Object(x.jsx)(j.a,{noWrap:!0,variant:"body2",title:e.stockId,children:e.stockId})}),Object(x.jsx)("span",{className:"comm-name",children:Object(x.jsx)(j.a,{noWrap:!0,variant:"body2",title:e.description,children:e.description})}),Object(x.jsx)("span",{className:"comm-price",children:Object(x.jsx)(j.a,{noWrap:!0,variant:"body2",title:e.price?e.price.price:0,children:e.price?e.price.price:0})}),Object(x.jsx)("span",{className:"comm-class-name",children:Object(x.jsx)(j.a,{noWrap:!0,variant:"body2",title:e.stockCategory.categoryDescription,children:e.stockCategory.categoryDescription})})]})},e.stockId)}));return Object(x.jsx)(n.a.Fragment,{children:Object(x.jsxs)(o.a,{item:!0,xs:12,md:7,id:"comm-manage-list",sx:{display:"flex",height:"calc(100vh - 2.5rem)",bgcolor:"background.paper",flexDirection:"column",padding:"0 1em 2em",color:"#3c3c3c","& h5":{pt:"1.5rem",pb:"0.5rem",fontWeight:"bold"},"& .comm-classes":{paddingBottom:"0.75em"},"& .comm-classes select":{width:"100%",color:"#666666",borderColor:"#cccccc"},"@media (min-width: 960px)":{borderRight:"3px dashed #cccccc"}},children:[Object(x.jsx)(j.a,{variant:"h5",children:"\u5546\u54c1\u76ee\u9304"}),Object(x.jsxs)(i.a,{component:"form",className:"comm-search",sx:{padding:"0 0 0.75em",'& input[type="text"]':{width:"80%",border:"1px solid #c4c4c4",borderRight:"none",lineHeight:1.75,borderTopLeftRadius:"0.3em",borderBottomLeftRadius:"0.3em"},'& input[type="submit"]':{width:"20%",lineHeight:1.75,border:"1px solid #c4c4c4",borderLeft:"none",letterSpacing:"0.2em",color:"background.default",bgcolor:"primary.light",borderTopRightRadius:"0.3em",borderBottomRightRadius:"0.3em"}},children:[Object(x.jsx)("input",{placeholder:"\u8acb\u8f38\u5165\u5546\u54c1\u540d\u7a31",type:"text",value:a,onChange:function(e){return r(e.target.value)}}),Object(x.jsx)("input",{type:"submit",value:"\u641c\u5c0b",onClick:function(e){e.preventDefault(),y(a?{name:a,categoryId:_||D||N}:{categoryId:_||D||N})}})]}),Object(x.jsx)(i.a,{className:"comm-classes",children:Object(x.jsxs)("select",{onChange:oe,children:[Object(x.jsx)("option",{value:"",children:"\u5168\u90e8\u5927\u985e\u5225"}),le(ce)]})}),ne.length>0&&Object(x.jsx)(i.a,{className:"comm-classes",children:Object(x.jsxs)("select",{onChange:se,children:[Object(x.jsx)("option",{value:"",children:"\u5168\u90e8\u6b21\u985e\u5225"}),le(ne)]})}),re.length>0&&Object(x.jsx)(i.a,{className:"comm-classes",children:Object(x.jsxs)("select",{onChange:function(e){var t=e.target.value,c=t?{categoryId:t,name:a}:{categoryId:D||N,name:a};X(t),y(c)},children:[Object(x.jsx)("option",{value:"",children:"\u5168\u90e8\u5c0f\u985e\u5225"}),le(re)]})}),Object(x.jsxs)(i.a,{className:"comm-table",sx:f,children:[Object(x.jsxs)("div",{className:"comm-header",children:[Object(x.jsxs)("div",{className:"comm-info-header",children:[Object(x.jsx)("span",{className:"comm-id",children:"ID"}),Object(x.jsx)("span",{className:"comm-name",children:"\u540d\u7a31"}),Object(x.jsx)("span",{className:"comm-price",children:"\u50f9\u683c"}),Object(x.jsx)("span",{className:"comm-class-name",children:"\u985e\u5225"})]}),Object(x.jsx)("div",{className:"comm-btn-header",children:"-"})]}),Object(x.jsx)("div",{className:"comm-list",children:Object(x.jsx)("div",{className:"comm-list-wrapper",children:G||K?de:(ie=15,Array.from({length:ie}).map((function(e,t){return Object(x.jsx)(i.a,{children:Object(x.jsx)(u.a,{variant:"rectangular",animation:"wave",width:"100%",height:"2.5em"},t)},t)})))})})]})]})})},v=function(e){return e.replaceAll(/[[\]-]/g,"")},y={classList:{"& .skeleton":{mb:"2rem"},"& .class-wrapper":{p:"0.5rem",pr:"1rem",mb:"2rem",borderRadius:1,border:function(e){return"1px solid ".concat(e.palette.text.secondary)},"& > .class-item":{borderTop:"none"},"& > .class-item > .class-item-name":{fontWeight:"bold"},"& > .class-item > .class-item-name .id-span":{color:"text.primary"}},"& .class-item":{borderTop:function(e){return"1px solid ".concat(e.palette.text.disabled)}},"& .id-span":{color:"text.secondary",fontSize:"0.75rem"},"& .class-item-children":{pl:"1.5rem"}},addClassCard:{position:"relative",backgroundColor:"background.default",display:"flex",justifyContent:"center",alignItems:"center",height:"6em",borderRadius:"0.5em",cursor:"grab",userSelect:"none","& span":{display:"inline-block",color:"background.default",fontSize:"1.25em",lineHeight:"0.8",fontWeight:"bold",paddingBottom:"1px",borderRadius:"5em",transform:"rotate(45deg)",textShadow:"2px 0px 3px #dedede"},"& .add-input":{width:"100%",borderTopLeftRadius:"0.3em",borderTopRightRadius:"0.3em",border:"none",textAlign:"center",backgroundColor:"#f6fbff",lineHeight:4.5,outlineColor:function(e){return e.palette.primary.main}},"& .add-cancel":{width:"50%",border:"none",backgroundColor:"#d6d6d6",borderBottomLeftRadius:"0.3em"},"& .add-submit":{width:"50%",border:"none",backgroundColor:"#d0ebff",borderBottomRightRadius:"0.3em"}}},k=function(){var e=Object(h.d)((function(e){return e.auth})),t=Object(p.b)(["/stock-category",e.authenticated,{limit:"zero"}]),a=t.data,c=t.error,r=a?a.list:[];c&&Object(g.d)(c,"#comm-mange");var i,s=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=JSON.parse(JSON.stringify(e)),a=Object.keys(t).length,c=function(e){t[e].forEach((function(a){var c=t[e-1];if(c){var n=c.find((function(e){return e.categoryId===a.parent}));n&&(n.children=n.children||[],n.children.push(a))}}))},n=a;n>=1;n--)c(n);return t[1]}(function(){var e={};return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(t){e[t.catRank]||(e[t.catRank]=[]),e[t.catRank].push(t)})),e}(r));return Object(x.jsx)(n.a.Fragment,{children:Object(x.jsxs)(o.a,{item:!0,xs:12,md:5,id:"comm-manage-class-list",sx:{padding:"0 1.5em",bgcolor:"background.paper",height:"100vh",color:"#3c3c3c",overflow:"auto","@media (min-width: 960px)":{height:"calc(100vh - 2.5rem)"},"& h5":{pt:"1.5rem",pb:"0.5rem",fontWeight:"bold"}},children:[Object(x.jsx)(j.a,{variant:"h5",children:"\u5546\u54c1\u985e\u5225\u76ee\u9304"}),Object(x.jsx)(o.a,{container:!0,sx:y.classList,children:a||c?function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t.map((function(t,c){var n=t.categoryId,r=t.categoryDescription,i=t.children,s=Object(x.jsxs)("div",{className:"class-item",children:[Object(x.jsxs)(j.a,{className:"class-item-name",variant:"subtitle1",noWrap:!0,children:[Object(x.jsx)("span",{className:"id-span",children:n}),"\xa0-\xa0",v(r)]}),i&&i.length>0&&Object(x.jsx)("div",{className:"class-item-children",children:e(i,a+1)})]},n);return 1===a?Object(x.jsx)(o.a,{className:"class-wrapper",item:!0,xs:12,children:s},n):s}))}(s):(i=3,Array.from({length:i}).map((function(e,t){return Object(x.jsx)(o.a,{className:"skeleton",item:!0,xs:12,children:Object(x.jsx)(u.a,{variant:"rectangular",animation:"wave",width:"100%",height:"20rem"})},t)})))})]})})},w=a(239),N=Object(r.c)(Object(w.a)());t.default=N((function(){return Object(x.jsx)(i.a,{id:"comm-mange",sx:{position:"relative",bgcolor:"background.paper","& .comm-manage-container":{maxWidth:"1600px",margin:"0 auto",boxShadow:"0px 0px 12px -6px #cccccc"}},children:Object(x.jsxs)(o.a,{container:!0,className:"comm-manage-container",children:[Object(x.jsx)(O,{}),Object(x.jsx)(k,{})]})})}))}}]);
//# sourceMappingURL=13.c968250b.chunk.js.map