{"version":3,"sources":["components/Auth/withAuth.js","components/ui/DialogMember.js","helpers/dateParser.js","components/ui/PrintedOrder.js","components/ui/SalePointCard.js","components/ui/DialogSalePoint.js","components/ui/CommCheckCard.js","components/ui/DialogComm.js","components/PosOrderList/SearchField.js","components/PosOrderList/OrderItem.js","components/PosOrderList/OrderList.js","components/PosOrderList/Pagination.js","components/PosOrderList/DailyStatisticList.js","components/PosOrderList/PosOrderList.js"],"names":["authLevelMapping","shop","company","enterprise","withAuth","authLevel","ChildComponent","connect","state","auth","authenticated","level","props","history","useEffect","push","formFieldStyle","display","padding","flex","color","paddingRight","flexWrap","py","pr","alignItems","position","fontSize","bottom","transform","fontWeight","flexGrow","lineHeight","letterSpacing","width","justifyContent","bgcolor","theme","palette","primary","main","borderRadius","borderBottomLeftRadius","borderBottomRightRadius","border","light","borderTopLeftRadius","borderTopRightRadius","members","fetchMembers","open","handleClose","onSelectClick","useState","memberFormInfo","setMemberFormInfo","validateErrors","setValidateError","list","handleInputChange","e","target","name","value","newValue","handleCreate","a","preventDefault","validateCreate","data","memberName","phone","memberRequest","post","headers","response","console","log","fireDialogToast","error","errors","Object","keys","length","id","onClose","aria-labelledby","fullWidth","maxWidth","PaperProps","sx","margin","variant","aria-label","onClick","right","top","height","component","className","type","onChange","autoComplete","petName","disableElevation","borderRight","background","darkPaper","maxHeight","overflow","map","item","noWrap","memberCode","title","homePhone","minWidth","getDateString","dateString","changeType","originMs","Date","getTime","parseMsToDateString","ms","divider","originDate","monthNumber","getMonth","monthString","toString","padStart","dateNumber","getDate","getFullYear","showOrderTime","timestamp","toLocaleString","renderPayment","payments","payment","SalePointPayment","paymentName","OrderItemDetail","index","stockMaster","description","stockDescription","user","price","quantity","subTotal","orderTableStyle","backgroundColor","textAlign","wordBreak","paper","paddingLeft","PrintedOrder","order","creditCardInfo","salesPayments","find","Boolean","creditCard","minHeight","container","px","default","xs","date","memberInfo","salesman","realName","cashRegister","salePoint","salePointName","invoicePage","no","salesDetails","p","borderTop","flexDirection","cardNo","replaceAll","slice","approvalCode","actualTotal","SalePointCard","selectedSalePoints","handleSelectSalePoint","Card","Grid","wrap","spacing","Checkbox","readOnly","checked","some","el","zeroMinWidth","Typography","onSalePointSelectClick","salePoints","setSalePoints","setSelectedSalePoints","salePointRequest","get","fetchSalePoints","newSelectedSalePoints","filter","Dialog","Box","IconButton","DialogContent","mt","md","pb","overflowY","gap","colNum","renderSalePointCards","Divider","orientation","flexItem","mx","direction","pl","mb","pt","Paper","elevation","square","renderSelectedSalePoints","Button","size","endIcon","CommCheckCard","comm","selectedComms","handleSelectComm","stockId","comms","fetchComms","onCommSelectClick","commFormInfo","setCommFormInfo","setSelectedComms","newSelectedComms","stockIds","renderCommCards","renderSelectedComms","changeDate","args","currentTarget","dataset","originStartValue","formState","values","originEndValue","startDateField","fields","endDateField","change","putInMember","memberNameField","memberIdField","putInComms","commIdField","commNameField","stockIdsArrayString","join","stockNamesArrayString","putInSalePoints","salePointIdField","salePointNameField","salePointIdsArrayString","salePointNamesArrayString","getMonthIntervalDate","indicator","today","monthResult","dateResult","monthInterval","btnFieldStyle","paddingBottom","marginLeft","marginTop","marginBottom","threeWordFieldStyle","handleSearchSubmit","currentSearchContent","isMemberOpen","setIsMemberOpen","isCommOpen","setIsCommOpen","isSalePointOpen","setIsSalePointOpen","users","setUsers","userRequest","params","limit","fetchUsers","onSubmit","renderUserOptions","userId","initialValues","render","putInCommsMutator","putInSalePointsMutator","putInMemberMutator","handleSubmit","submitError","submitting","form","pristine","borderBottom","marginRight","cursor","input","meta","max","endDate","min","startDate","ArrowLeft","viewBox","data-change-type","mutators","ArrowRight","disabled","DialogMember","member","DialogSalePoint","reset","OrderItem","offset","creditInfo","onPrintClick","isReturn","OrderList","filteredOrders","printContentRef","useRef","printOrder","setPrintOrder","printContent","current","printIframe","document","querySelector","innerHTML","window","print","orders","Fragment","boxShadow","mr","paddingTop","offsetTop","getElementById","scroll","left","behavior","ref","Pagination","totalPage","currentPage","handlePageChange","count","page","siblingCount","shape","showFirstButton","showLastButton","formatDateDivider","statisticItemStyle","DailyStatisticList","salePayments","aggregatePayment","paymentObj","forEach","dailyData","renderDashboard","result","key","Grow","TransitionGroup","renderDailyStatistic","divideData","dailyDataArray","renderDailyStatistics","dividedData","cashRegisterName","divideCashRegisterData","REQUIRED_STATE_NAMES","PosOrderList","currentSearchString","fetchSales","sort","fetchSalePayments","salesRequest","setState","componentDidMount","location","search","newSearchContent","queryObj","qs","parse","stateName","Number","componentDidUpdate","noPageQueryObj","omit","noPageSearchString","URLSearchParams","searchContentString","newCurrentPage","changePage","pageValue","filterParams","filteredParams","searchContent","queryString","this","Container","sales","React","Component","enhance","compose"],"mappings":"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","file":"static/js/9.b509b841.chunk.js","sourcesContent":["import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\n\nconst authLevelMapping = {\n  shop: 5,\n  company: 10,\n  enterprise: 15\n}\n\nconst withAuth = authLevel => ChildComponent => {\n  const ComposedComponent = props => {\n    const { auth, level, history } = props\n\n    useEffect(() => {\n      if (!auth) {\n        history.push('/signin')\n        return\n      }\n      if (authLevel && (!level || authLevelMapping[authLevel] > authLevelMapping[level])) {\n        history.push('/')\n        return\n      }\n    }, [auth, level, history])\n\n    return (\n      <ChildComponent {...props} />\n    )\n  }\n\n  const mapStateToProps = state => {\n    return {\n      auth: state.auth.authenticated,\n      level: state.auth.level\n    }\n  }\n\n  return connect(mapStateToProps)(ComposedComponent)\n}\n\nexport default withAuth","import React, { useState, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { fetchMembers } from '../../slices/membersSlice'\nimport { memberRequest } from '../../apis'\nimport CancelIcon from '@mui/icons-material/Cancel'\nimport { fireDialogToast } from '../../helpers/sweetAlert'\nimport { Button, Dialog, DialogContent, IconButton, Typography, Box } from '@mui/material'\n\nconst MemberDialog = ({\n  auth,\n  open,\n  members,\n  handleClose,\n  fetchMembers,\n  onSelectClick,\n}) => {\n  const [memberFormInfo, setMemberFormInfo] = useState({})\n  const [validateErrors, setValidateError] = useState({})\n\n  useEffect(() => {\n    if (!open) return\n    fetchMembers()\n  }, [open, fetchMembers])\n\n  const handleInputChange = e => {\n    const { name, value } = e.target\n    const newValue = { ...memberFormInfo, [name]: value }\n    setMemberFormInfo(newValue)\n  }\n\n  const handleSubmit = e => {\n    e.preventDefault()\n    fetchMembers(memberFormInfo)\n    setValidateError({})\n  }\n\n  const handleCreate = async e => {\n    e.preventDefault()\n    if (validateCreate()) return\n\n    try {\n      const data = {\n        memberName: memberFormInfo.name,\n        phone: memberFormInfo.phone,\n      }\n      const response = await memberRequest.post('', data, {\n        headers: { 'Authorization': 'Bearer ' + auth.authenticated },\n      })\n      console.log(response)\n\n      fetchMembers()\n      setMemberFormInfo({})\n      fireDialogToast('新增會員成功', 'success')\n    } catch (error) {\n      fireDialogToast(`錯誤: ${error?.response?.data?.error || '新增會員失敗'}`, 'error')\n    }\n  }\n\n  const validateCreate = () => {\n    const errors = {}\n    if (!memberFormInfo.phone) {\n      errors.phone = '電話為必填'\n    } else if (memberFormInfo.phone[0] !== '0') {\n      errors.phone = '電話格式錯誤'\n    }\n    if (!memberFormInfo.name) {\n      errors.name = '姓名為必填'\n    }\n    setValidateError(errors)\n    return (Object.keys(errors).length > 0)\n  }\n\n  const renderList = (list) => {\n    return list.map(item => {\n      return (\n        <div className=\"list-item\" key={item.id}>\n          <div className=\"id-sec\">\n            <Typography variant=\"body1\" noWrap={true}>\n              {item.memberCode || '-'}\n            </Typography>\n          </div>\n          <div className=\"name-sec\">\n            <Typography variant=\"body1\" noWrap={true} title={item.memberName}>\n              {item.memberName}\n            </Typography>\n          </div>\n          <div className=\"mobile-sec\">\n            <Typography variant=\"body1\" noWrap={true}>\n              {item.phone || '-'}\n            </Typography>\n          </div>\n          <div className=\"tel-sec\">\n            <Typography variant=\"body1\" noWrap={true}>\n              {item.homePhone || '-'}\n            </Typography>\n          </div>\n          <div className=\"select-sec\" onClick={() => onSelectClick(item)}>\n            <Button sx={{\n              minWidth: '3.5em',\n              height: '1.75em',\n              padding: '0',\n              color: 'background.paper',\n              bgcolor: (theme) => theme.palette.primary.main,\n              '&:hover': {\n                bgcolor: '#fabd5e',\n              },\n            }}>\n              選取\n            </Button>\n          </div>\n        </div>\n      )\n    }\n    )\n  }\n\n  return (\n    <Dialog\n      id=\"dialog-member\"\n      open={open}\n      onClose={handleClose}\n      aria-labelledby=\"dialog-member\"\n      fullWidth maxWidth=\"sm\"\n      PaperProps={{\n        sx: { maxWidth: 700 }\n      }}\n    >\n      <Box\n        sx={{\n          margin: 0,\n          padding: '0.375em 1.75em 0.25em',\n          bgcolor: 'background.default',\n          '& h6': {\n            color: 'secondary.main',\n            fontSize: '1.25rem',\n            fontWeight: 'bold',\n          }\n        }}\n      // sx={{\n      //   flex: '0 0 auto',\n      //   margin: 0,\n      //   padding: '0.375em 1.25em 0.25em',\n      //   lineHeight: 1.6,\n      //   letterSpacing: '0.0075rem',\n      //   '& h6': {\n      //     color: (theme) => theme.palette.primary.main,\n      //     fontSize: '1.375rem',\n      //     fontWeight: 'bold',\n      //     letterSpacing: '0.05em',\n      //   }\n      // }}\n      >\n        <Typography variant=\"h6\">會員選取</Typography>\n        {handleClose ? (\n          <IconButton aria-label=\"close\" onClick={handleClose} sx={{\n            position: 'absolute',\n            right: '0.5em',\n            top: '0.25em',\n            color: '#cb5c5c',\n            padding: 0,\n          }}>\n            <CancelIcon sx={{ width: '1.25em', height: '1.25em' }} />\n          </IconButton>\n        ) : null}\n      </Box>\n\n      <DialogContent sx={{ padding: '0.25em 1.75em 2em', bgcolor: 'background.paper' }}>\n        <Box component=\"form\" sx={formFieldStyle}>\n          <div className=\"input-field\">\n\n            <div className=\"input-wrapper\">\n              <label>姓名 : &nbsp;</label>\n              <input\n                className={`input-md ${validateErrors.name ? 'error' : ''}`}\n                type=\"text\"\n                name=\"name\"\n                value={memberFormInfo.name || ''}\n                onChange={handleInputChange}\n                autoComplete=\"off\"\n              />\n              {validateErrors.name && (<span>{validateErrors.name}</span>)}\n            </div>\n\n            <div className=\"input-wrapper\">\n              <label>電話 : &nbsp;</label>\n              <input\n                className={`input-md ${validateErrors.phone ? 'error' : ''}`}\n                type=\"text\"\n                name=\"phone\"\n                value={memberFormInfo.phone || ''}\n                onChange={handleInputChange}\n                autoComplete=\"off\"\n              />\n              {validateErrors.phone && (<span>{validateErrors.phone}</span>)}\n            </div>\n\n\n\n            <div className=\"input-wrapper\">\n              <label>寵物名字 : &nbsp;</label>\n              <input\n                className={`input-sm ${validateErrors.petName ? 'error' : ''}`}\n                type=\"text\"\n                name=\"petName\"\n                value={memberFormInfo.petName || ''}\n                onChange={handleInputChange}\n              />\n            </div>\n          </div>\n\n          <div className=\"submit-field\">\n            <Button\n              className=\"submitBtn\"\n              type=\"submit\"\n              onClick={handleSubmit}\n            >\n              搜尋\n            </Button>\n            <Button\n              className=\"newBtn\"\n              variant=\"contained\"\n              color=\"primary\"\n              disableElevation\n              onClick={handleCreate}\n            >\n              新增\n            </Button>\n          </div>\n        </Box>\n\n        {/* <Box sx={{\n          padding: '0.25em 0 0.5em',\n          '& button': {\n            fontSize: '1rem',\n            fontWeight: 'bold',\n            padding: '0 0.5em',\n            marginRight: '0.5em',\n            borderRadius: 0,\n            color: 'text.secondary',\n            borderColor: 'text.secondary',\n          },\n        }}>\n          <Button variant=\"outlined\">最近交易會員</Button>\n          <Button variant=\"outlined\">未結批價單會員</Button>\n        </Box> */}\n\n        <div>\n          <Box sx={{\n            display: 'flex',\n            bgcolor: 'secondary.main',\n            '& > div': {\n              display: 'flex',\n              justifyContent: 'center',\n              alignItems: 'center',\n              fontSize: '1rem',\n              borderRight: theme => `1px solid ${theme.palette.background.darkPaper}`,\n              color: 'background.paper',\n              height: '1.75em',\n            },\n            '& .id-sec': {\n              flex: '0 0 17.5%',\n            },\n            '& .name-sec': {\n              flex: '0 0 17.5%',\n            },\n            '& .mobile-sec': {\n              flex: '0 0 25%',\n            },\n            '& .tel-sec': {\n              flex: '0 0 25%',\n            },\n            '& .select-sec': {\n              flex: '0 0 15%',\n              borderRight: 'none',\n            },\n          }}>\n            <div className=\"id-sec\">代碼</div>\n            <div className=\"name-sec\">會員名稱</div>\n            <div className=\"mobile-sec\">手機號碼</div>\n            <div className=\"tel-sec\">住家號碼</div>\n            <div className=\"select-sec\"></div>\n          </Box>\n          <Box sx={{\n            maxHeight: '14rem',\n            overflow: 'overlay',\n            '& .list-item': {\n              display: 'flex',\n              '& > div': {\n                display: 'flex',\n                justifyContent: 'center',\n                alignItems: 'center',\n                fontSize: '1rem',\n                borderRight: theme => `1px solid ${theme.palette.background.darkPaper}`,\n                color: 'secondary.main',\n                height: '2em',\n                overflow: 'hidden',\n                padding: '0 0.5em',\n              },\n              '&:nth-of-type(2n + 1)': {\n                bgcolor: '#ececec',\n              },\n              '& .id-sec': {\n                flex: '0 0 17.5%',\n              },\n              '& .name-sec': {\n                flex: '0 0 17.5%',\n              },\n              '& .mobile-sec': {\n                flex: '0 0 25%',\n              },\n              '& .tel-sec': {\n                flex: '0 0 25%',\n              },\n              '& .select-sec': {\n                flex: '0 0 15%',\n                borderRight: 'none',\n                overflow: 'hidden',\n              },\n            },\n          }}>\n            {renderList(members)}\n          </Box>\n        </div>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst mapStateToProps = state => {\n  return {\n    auth: state.auth,\n    members: state.members,\n  }\n}\n\nconst formFieldStyle = {\n  display: 'flex',\n  padding: '0.5em 0 0.75em',\n  '& .input-field': {\n    flex: '0 0 85%',\n    color: 'secondary.main',\n    paddingRight: '0.5em',\n    display: 'flex',\n    flexWrap: 'wrap',\n  },\n  '& .input-wrapper': {\n    flex: '0 0 50%',\n    py: '0.375em',\n    pr: '0.5em',\n    display: 'flex',\n    alignItems: 'center',\n    flexWrap: 'wrap',\n    position: 'relative',\n    '& span': {\n      color: 'error.light',\n      fontSize: '0.75rem',\n      position: 'absolute',\n      bottom: '0',\n      transform: 'translateY(50%)',\n    },\n  },\n  '& label': {\n    fontWeight: 'bold',\n    fontSize: '1.125rem',\n  },\n  '& input': {\n    flexGrow: 1,\n    lineHeight: 1.25,\n    padding: '0 0.25em',\n    '&::placeholder': {\n      fontSize: '0.875rem',\n      letterSpacing: '0.04em',\n    },\n    '&.error::placeholder': {\n      color: 'error.light',\n    },\n  },\n  '& input.input-md': {\n    width: 'calc(100% - 4em)',\n  },\n  '& input.input-sm': {\n    width: 'calc(100% - 6.5em)',\n  },\n  '& .submit-field': {\n    flex: '0 0 15%',\n    display: 'flex',\n    flexWrap: 'wrap',\n    justifyContent: 'center',\n    '& .submitBtn': {\n      flex: '0 0 100%',\n      color: 'background.paper',\n      fontWeight: 'bold',\n      fontSize: '1.125rem',\n      display: 'inline-flex',\n      justifyContent: 'center',\n      bgcolor: (theme) => theme.palette.primary.main,\n      // margin: '0.75em 0',\n      borderRadius: '0.5em',\n      borderBottomLeftRadius: 0,\n      borderBottomRightRadius: 0,\n      border: 'none',\n      '&:hover': {\n        // bgcolor: '#fabd5e',\n        bgcolor: (theme) => theme.palette.primary.light,\n      },\n    },\n    '& .newBtn': {\n      flex: '0 0 100%',\n      lineHeight: 1.5,\n      color: 'background.paper',\n      fontWeight: 'bold',\n      borderRadius: '0.5em',\n      borderTopLeftRadius: 0,\n      borderTopRightRadius: 0,\n      bgcolor: '#6aabc3',\n      '&:hover': {\n        bgcolor: '#72b9d3',\n      },\n    },\n  },\n}\n\nexport default connect(\n  mapStateToProps,\n  { fetchMembers }\n)(MemberDialog)","// 取得前一天或後一天的 Date Input 字串\nexport const getDateString = (dateString, changeType) => {\n  const originMs = new Date(dateString).getTime()\n  const newMs = changeType === 'previous' ? (originMs - 86400000) : (originMs + 86400000)\n  return parseMsToDateString(newMs)\n}\n\nexport const parseMsToDateString = (ms, divider = '-') => {\n  const originDate = new Date(ms)\n  const monthNumber = originDate.getMonth() + 1\n  const monthString = monthNumber.toString().padStart(2, '0')\n  // const monthString = monthNumber < 10 ? ('0' + monthNumber.toString()) : monthNumber.toString()\n  const dateNumber = originDate.getDate()\n  const dateString = dateNumber.toString().padStart(2, '0')\n  // const dateString = dateNumber < 10 ? ('0' + dateNumber.toString()) : dateNumber.toString()\n  return (originDate.getFullYear().toString() + divider + monthString + divider + dateString)\n}","import React from 'react'\nimport Box from '@mui/material/Box'\nimport Grid from '@mui/material/Grid'\nimport Paper from '@mui/material/Paper'\n\nexport const showOrderTime = timestamp => {\n  return new Date(timestamp).toLocaleString()\n}\n\nexport const renderPayment = payments => {\n  console.log(payments)\n  return payments.map(payment => {\n    return (\n      <div className=\"received-sec\" key={payment.id}>\n        <span>\n          {`${payment.SalePointPayment?.paymentName} : `}\n        </span>\n        <span className=\"main-value\">\n          {payment.value}\n        </span>\n      </div>\n    )\n  })\n}\n\nexport const OrderItemDetail = ({ list }) => {\n  return (\n    <Box className=\"order-table\">\n      <div className=\"table-header\">\n        <div className=\"serial-sec\">項次</div>\n        <div className=\"name-sec\">商品名稱</div>\n        <div className=\"clerk-sec\">服務員</div>\n        <div className=\"price-sec\">定價</div>\n        <div className=\"quantity-sec\">數量</div>\n        <div className=\"discount-sec\">折數</div>\n        <div className=\"total-sec\">合計</div>\n      </div>\n\n      <div className=\"table-list\">\n        {list.map((item, index) => {\n          return (\n            <div className=\"table-item\" key={item.id}>\n              <div className=\"serial-sec\">{index + 1}</div>\n              <div className=\"name-sec\">\n                {(item.stockMaster && item.stockMaster.description) || item.stockDescription}\n              </div>\n              <div className=\"clerk-sec\">{item.user}</div>\n              <div className=\"price-sec\">{item.price}</div>\n              <div className=\"quantity-sec\">{item.quantity}</div>\n              <div className=\"discount-sec\">\n                {((item.price * item.quantity) - item.subTotal) || ''}\n              </div>\n              <div className=\"total-sec\">{item.subTotal}</div>\n            </div>\n          )\n        }\n        )}\n      </div>\n    </Box>\n  )\n}\n\nexport const PrintedOrder = ({ order }) => {\n  const creditCardInfo = order?.salesPayments?.find(payment => Boolean(payment.creditCard))?.creditCard || {}\n\n  return (\n    <Paper\n      sx={{\n        width: '100%',\n        minHeight: '100%',\n        overflow: 'hidden',\n        '& .order-table': orderTableStyle,\n      }}\n    >\n      <Grid container alignItems=\"center\"\n        sx={{\n          px: '0.5rem',\n          py: '0.25rem',\n          bgcolor: theme => theme.palette.background.default,\n        }}\n      >\n\n        <Grid item xs>\n          <Grid container>\n            <Grid item xs container>\n              <Grid item xs=\"auto\">\n                日期 :&nbsp;\n              </Grid>\n              <Grid item xs className=\"bold\">\n                {showOrderTime(order.date)}\n              </Grid>\n            </Grid>\n\n            <Grid item xs container>\n              <Grid item xs=\"auto\">\n                會員 :&nbsp;\n              </Grid>\n              <Grid item xs className=\"bold\">\n                {order.memberInfo ? `${order.memberInfo.memberName} | ${order.memberInfo.phone}` : '---'}\n              </Grid>\n            </Grid>\n\n            <Grid item xs container>\n              <Grid item xs=\"auto\">\n                銷售員 :&nbsp;\n              </Grid>\n              <Grid item xs className=\"bold\">\n                {order.salesman && order.salesman.realName}\n              </Grid>\n            </Grid>\n          </Grid>\n\n          <Grid container>\n            <Grid item xs container>\n              <Grid item xs=\"auto\">\n                門市 :&nbsp;\n              </Grid>\n              <Grid item xs className=\"bold\">\n                {(order?.cashRegister?.salePoint?.salePointName || '-')}\n              </Grid>\n            </Grid>\n\n            <Grid item xs container>\n              <Grid item xs=\"auto\">\n                發票 :&nbsp;\n              </Grid>\n              <Grid item xs className=\"bold\">\n                {order.invoicePage ? order.invoicePage.no : '無發票資訊'}\n              </Grid>\n            </Grid>\n\n            <Grid item xs container>\n              <Grid item xs=\"auto\">\n                服務員 :&nbsp;\n              </Grid>\n              <Grid item xs className=\"bold\">\n                {order.user && order.user.realName}\n              </Grid>\n            </Grid>\n          </Grid>\n        </Grid>\n\n        <Grid item xs=\"auto\">\n          {order.no}\n        </Grid>\n\n      </Grid>\n\n      <OrderItemDetail list={order.salesDetails || []} />\n\n\n      <Grid container justifyContent=\"space-between\" alignItems=\"center\"\n        sx={{\n          p: '0.25rem',\n          borderTop: theme => `1px solid ${theme.palette.divider}`,\n        }}\n      >\n        <Grid item xs=\"auto\" container flexDirection=\"column\">\n\n          <Grid item xs container>\n            <Grid item xs=\"auto\">\n              信用卡號末四碼 :&nbsp;\n            </Grid>\n            <Grid item xs className=\"bold\">\n              {creditCardInfo.cardNo ? creditCardInfo.cardNo.replaceAll(' ', '').slice(-4) : '- - - -'}\n            </Grid>\n          </Grid>\n\n          <Grid item xs container>\n            <Grid item xs=\"auto\">\n              授權碼 :&nbsp;\n            </Grid>\n            <Grid item xs className=\"bold\">\n              {creditCardInfo.approvalCode || '- - - -'}\n            </Grid>\n          </Grid>\n\n        </Grid>\n\n        <Grid item xs=\"auto\">\n          <Box className=\"received-list\" display=\"inline-flex\" sx={{\n            '& > div': {\n              pr: '1rem',\n            },\n            '& .main-value': {\n              fontWeight: 'bold',\n            },\n          }}>\n            {renderPayment((order.salesPayments || []))}\n          </Box>\n\n          <Box className=\"total-sum\" display=\"inline-flex\" sx={{\n            fontSize: '1.25rem',\n          }}>\n            <span>總金額 :&nbsp;</span>\n            <span className=\"bold\">\n              {`${order ? order.actualTotal : '- - -'}元`}\n            </span>\n          </Box>\n        </Grid>\n      </Grid>\n\n    </Paper>\n  )\n}\n\nexport const orderTableStyle = {\n  '& .table-header': {\n    display: 'flex',\n    color: 'background.paper',\n    backgroundColor: '#a4a4a4',\n    '& > div': {\n      display: 'inline-flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      textAlign: 'center',\n      padding: '0.25em 0.5em',\n      wordBreak: 'break-all',\n      borderRight: theme => `1px solid ${theme.palette.background.paper}`,\n    },\n    '& > div:last-child': {\n      borderRight: 'none',\n    },\n    '& .name-sec': {\n      justifyContent: 'flex-start',\n      paddingLeft: '1.5em',\n      paddingRight: '1.5em',\n    },\n  },\n  '& .table-item': {\n    display: 'flex',\n    color: 'text.primary',\n    backgroundColor: 'background.darkPaper',\n    '&:nth-of-type(2n)': {\n      backgroundColor: 'background.paper',\n    },\n    '& > div': {\n      display: 'inline-flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      textAlign: 'center',\n      padding: '0.5em 0.5em',\n      wordBreak: 'break-all',\n      borderRight: theme => `1px solid ${theme.palette.background.paper}`,\n    },\n    '& > div:last-of-type': {\n      borderRight: 'none',\n    },\n    '& .name-sec': {\n      justifyContent: 'flex-start',\n      paddingLeft: '1.5em',\n      paddingRight: '1.5em',\n    },\n  },\n  '& .serial-sec': {\n    flex: '0 0 5%',\n    minWidth: '2rem',\n  },\n  '& .name-sec': {\n    flex: '1 0 auto',\n  },\n  '& .clerk-sec': {\n    flex: '0 0 10%'\n  },\n  '& .price-sec': {\n    flex: '0 0 10%'\n  },\n  '& .quantity-sec': {\n    flex: '0 0 10%'\n  },\n  '& .discount-sec': {\n    flex: '0 0 10%'\n  },\n  '& .total-sec': {\n    flex: '0 0 10%'\n  },\n}\n\n\nexport default PrintedOrder","import React from 'react'\nimport { Grid, Typography, Card, Checkbox } from '@mui/material'\n\nfunction SalePointCard({\n  salePoint,\n  selectedSalePoints,\n  handleSelectSalePoint,\n}) {\n  return (\n    <Card onClick={() => handleSelectSalePoint(salePoint)}>\n      <Grid container wrap=\"nowrap\" spacing={2}>\n        <Grid item container xs=\"auto\" alignItems=\"center\">\n          <Checkbox\n            readOnly\n            checked={selectedSalePoints.some(el => el.id === salePoint.id)}\n          />\n        </Grid>\n        <Grid item container xs alignItems=\"center\" zeroMinWidth>\n          <Typography className='salePoint-name' variant=\"subtitle1\" noWrap title={salePoint.salePointName}>\n            {salePoint.salePointName}\n          </Typography>\n\n          {/* <Typography className='salePoint-id' variant=\"body2\" noWrap>\n            {salePoint.stockId}\n          </Typography> */}\n        </Grid>\n      </Grid>\n    </Card>\n  )\n}\n\nexport default SalePointCard","import React, { useState, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport CancelIcon from '@mui/icons-material/Cancel'\nimport SendIcon from '@mui/icons-material/Send'\nimport { Box, Button, Paper, Grid, Divider, Dialog, DialogContent, IconButton, Typography } from '@mui/material'\nimport SalePointCard from './SalePointCard'\nimport { salePointRequest } from '../../apis'\n\nfunction DialogSalePoint({\n  auth,\n  open,\n  handleClose,\n  onSalePointSelectClick,\n}) {\n  const [salePoints, setSalePoints] = useState([])\n  const [selectedSalePoints, setSelectedSalePoints] = useState([])\n\n  useEffect(() => {\n    const fetchSalePoints = async () => {\n      const { data } = await salePointRequest.get('', {\n        headers: { 'Authorization': 'Bearer ' + auth.authenticated },\n      })\n      setSalePoints(data)\n    }\n    fetchSalePoints()\n\n    return () => {\n      setSalePoints([])\n    }\n  }, [auth.authenticated])\n\n\n  const handleSelectSalePoint = salePoint => {\n    const newSelectedSalePoints = selectedSalePoints.some(el => el.id === salePoint.id)\n      ? selectedSalePoints.filter(el => el.id !== salePoint.id)\n      : [...selectedSalePoints, salePoint]\n    setSelectedSalePoints(newSelectedSalePoints)\n  }\n\n  const handleSubmit = () => {\n    onSalePointSelectClick(selectedSalePoints)\n  }\n\n  const onClose = () => {\n    setSelectedSalePoints([])\n    handleClose()\n  }\n\n  const renderSalePointCards = (salePoints, colNum) => {\n    return salePoints.map(salePoint => (\n      <div className=\"card-grid\" key={salePoint.id}>\n        <SalePointCard\n          salePoint={salePoint}\n          selectedSalePoints={selectedSalePoints}\n          handleSelectSalePoint={handleSelectSalePoint}\n        />\n      </div>\n    ))\n  }\n\n  const renderSelectedSalePoints = salePoints => {\n    return salePoints.map(salePoint => (\n      <Grid item xs={12} key={salePoint.id}>\n        <Paper elevation={0} square>\n          <Typography variant=\"subtitle2\">\n            {salePoint.salePointName}\n          </Typography>\n        </Paper>\n      </Grid>\n    ))\n  }\n\n  return (\n    <Dialog\n      id=\"dialog-member\"\n      open={open}\n      onClose={onClose}\n      fullWidth\n      maxWidth=\"sm\"\n      aria-labelledby=\"dialog-member\"\n      PaperProps={{\n        sx: { maxWidth: 800 }\n      }}\n    >\n      <Box\n        sx={{\n          margin: 0,\n          padding: '0.375em 1.75em 0.25em',\n          bgcolor: 'background.default',\n          '& h6': {\n            color: 'secondary.main',\n            fontSize: '1.25rem',\n            fontWeight: 'bold',\n          }\n        }}\n      >\n        <Typography variant=\"h6\">門市選取</Typography>\n\n        {handleClose ? (\n          <IconButton aria-label=\"close\" onClick={handleClose} sx={{\n            position: 'absolute',\n            right: '0.5em',\n            top: '0.25em',\n            color: '#cb5c5c',\n            padding: 0,\n          }}>\n            <CancelIcon sx={{ width: '1.25em', height: '1.25em' }} />\n          </IconButton>\n        ) : null}\n      </Box>\n\n      <DialogContent sx={{ padding: '0.25em 1.75em 2em', bgcolor: 'background.paper' }}>\n\n        <Grid\n          container\n          alignItems=\"flex-start\"\n          // wrap=\"nowrap\"\n          sx={{\n            mt: '1.5rem',\n            p: '0.5rem 0.25rem',\n            bgcolor: '#eeeeee',\n            borderRadius: 2,\n            '& hr': {\n              height: 'unset',\n            },\n          }}>\n          <Grid\n            xs={12}\n            md\n            item\n          >\n            <Typography variant=\"subtitle1\" sx={{\n              p: '0.25rem 0.5rem',\n              fontWeight: 'bold',\n            }}>\n              門市列表\n            </Typography>\n            <Grid\n              container\n              sx={{\n                px: '0.5rem',\n                pb: '2rem',\n                maxHeight: 400,\n                overflowY: 'auto',\n                display: 'flex',\n                gap: '1rem',\n                '& .MuiCard-root': {\n                  p: '1.5rem 1rem',\n                },\n                '& .salePoint-name': {\n                  flex: '0 0 100%',\n                },\n                '& .card-grid': {\n                  flex: '0 0 calc(50% - 0.5rem)',\n                  maxWidth: 'calc(50% - 0.5rem)',\n                  '& .MuiPaper-root': {\n                    bgcolor: 'background.default',\n                  },\n                },\n              }}\n            >\n              {renderSalePointCards(salePoints, 6)}\n            </Grid>\n          </Grid>\n\n          <Divider orientation=\"vertical\" variant=\"middle\" flexItem sx={{ mx: '1rem' }} />\n\n          <Grid\n            xs={12}\n            md={3}\n            item\n          >\n            <Typography variant=\"subtitle1\" sx={{\n              p: '0.25rem 0.5rem',\n              fontWeight: 'bold',\n            }}>\n              已選取\n            </Typography>\n            <Grid\n              container\n              // spacing={1}\n              direction=\"column\"\n              wrap=\"nowrap\"\n              sx={{\n                pl: '0.25rem',\n                pr: '0.5rem',\n                maxHeight: 400,\n                overflowY: 'auto',\n                '& .MuiPaper-root': {\n                  p: '1.5rem 2rem',\n                  mb: '1rem',\n                },\n                '& .salePoint-id': {\n                  pt: '0.25rem',\n                  color: 'text.secondary',\n                },\n              }}\n            >\n              {renderSelectedSalePoints(selectedSalePoints)}\n            </Grid>\n          </Grid>\n\n        </Grid>\n\n        <Box component=\"form\" sx={formFieldStyle}>\n\n          <div className=\"submit-field\">\n            <Button\n              size=\"large\"\n              className=\"submitBtn primaryBtn\"\n              onClick={handleSubmit}\n              endIcon={<SendIcon />}\n            >\n              確認\n            </Button>\n          </div>\n        </Box>\n\n\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst formFieldStyle = {\n  display: 'flex',\n  p: '1.5em 0 0rem',\n  alignItems: 'center',\n  justifyContent: 'flex-end',\n  '& .input-field': {\n    flex: '0 0 30%',\n    color: 'secondary.main',\n    paddingRight: '0.5em',\n  },\n  '& .input-wrapper': {\n    padding: '0.375em 0',\n  },\n  '& label': {\n    fontWeight: 'bold',\n    fontSize: '1.125rem',\n  },\n  '& input': {\n    width: 'calc(100% - 4em)',\n    lineHeight: 1.25,\n    padding: '0 0.25em',\n    '&::placeholder': {\n      fontSize: '0.875rem',\n      letterSpacing: '0.04em',\n    },\n    '&.error::placeholder': {\n      color: 'error.light',\n    },\n  },\n  '& .submit-field': {\n    flex: '0 0 18%',\n    display: 'flex',\n    flexWrap: 'wrap',\n    justifyContent: 'center',\n    '& .submitBtn': {\n      flex: '0 0 100%',\n      fontWeight: 'bold',\n      fontSize: '1.125rem',\n      display: 'inline-flex',\n      justifyContent: 'center',\n      // borderRadius: '0.5em',\n      // border: 'none',\n    },\n    '& .primaryBtn': {\n      color: 'background.paper',\n      bgcolor: (theme) => theme.palette.primary.main,\n      '&:hover': {\n        bgcolor: (theme) => theme.palette.primary.light,\n      },\n    },\n  },\n}\n\nconst mapStateToProps = (state) => ({\n  auth: state.auth,\n})\n\nexport default connect(mapStateToProps)(DialogSalePoint)","import React from 'react'\nimport { Grid, Typography, Card, Checkbox } from '@mui/material'\n\nfunction CommCheckCard({\n  comm,\n  selectedComms,\n  handleSelectComm,\n}) {\n  return (\n    <Card onClick={() => handleSelectComm(comm)}>\n      <Grid container wrap=\"nowrap\" spacing={2}>\n        <Grid item container xs=\"auto\" alignItems=\"center\">\n          <Checkbox\n            readOnly\n            checked={selectedComms.some(el => el.stockId === comm.stockId)}\n          />\n        </Grid>\n        <Grid item container xs alignItems=\"center\" zeroMinWidth>\n          <Typography className='comm-name' variant=\"subtitle1\" noWrap title={comm.description}>\n            {comm.description}\n          </Typography>\n\n          <Typography className='comm-id' variant=\"body2\" noWrap>\n            {comm.stockId}\n          </Typography>\n        </Grid>\n      </Grid>\n    </Card>\n  )\n}\n\nexport default CommCheckCard\n","import React, { useState, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { fetchComms } from '../../slices/commsSlice'\nimport CancelIcon from '@mui/icons-material/Cancel'\nimport SendIcon from '@mui/icons-material/Send'\nimport { Box, Button, Paper, Grid, Divider, Dialog, DialogContent, IconButton, Typography } from '@mui/material'\nimport CommCheckCard from './CommCheckCard'\n\nfunction DialogComm({\n  comms,\n  open,\n  handleClose,\n  fetchComms,\n  onCommSelectClick,\n}) {\n  const [commFormInfo, setCommFormInfo] = useState({})\n  const [selectedComms, setSelectedComms] = useState([])\n\n  useEffect(() => {\n    if (!open) return\n    fetchComms()\n  }, [open, fetchComms])\n\n\n  const handleInputChange = e => {\n    const { name, value } = e.target\n    const newValue = { ...commFormInfo, [name]: value }\n    setCommFormInfo(newValue)\n  }\n\n  const handleSearch = e => {\n    e.preventDefault()\n    fetchComms({\n      ...(commFormInfo.name && { name: commFormInfo.name }),\n      ...(commFormInfo.stockIds && { stockIds: commFormInfo.stockIds }),\n    })\n  }\n\n  const handleSelectComm = comm => {\n    const newSelectedComms = selectedComms.some(el => el.stockId === comm.stockId) ? selectedComms.filter(el => el.stockId !== comm.stockId) : [...selectedComms, comm]\n    setSelectedComms(newSelectedComms)\n  }\n\n  const handleSubmit = () => {\n    onCommSelectClick(selectedComms)\n  }\n\n  const renderCommCards = (comms, colNum) => {\n    return comms.map(comm => (\n      <div className=\"card-grid\" key={comm.stockId}>\n        <CommCheckCard\n          comm={comm}\n          selectedComms={selectedComms}\n          handleSelectComm={handleSelectComm}\n        />\n      </div>\n    ))\n  }\n\n  const renderSelectedComms = comms => {\n    return comms.map(comm => (\n      <Grid item xs={12} key={comm.stockId}>\n        <Paper elevation={0} square>\n          <Typography variant=\"subtitle2\">\n            {comm.description}\n          </Typography>\n          <Typography className=\"comm-id\" variant=\"subtitle2\">\n            {comm.stockId}\n          </Typography>\n        </Paper>\n      </Grid>\n    ))\n  }\n\n  return (\n    <Dialog\n      id=\"dialog-member\"\n      open={open}\n      onClose={handleClose}\n      aria-labelledby=\"dialog-member\"\n      fullWidth maxWidth=\"sm\"\n      PaperProps={{\n        sx: { maxWidth: 900 }\n      }}\n    >\n      <Box\n        sx={{\n          margin: 0,\n          padding: '0.375em 1.75em 0.25em',\n          bgcolor: 'background.default',\n          '& h6': {\n            color: 'secondary.main',\n            fontSize: '1.25rem',\n            fontWeight: 'bold',\n          }\n        }}\n      >\n        <Typography variant=\"h6\">商品選取</Typography>\n\n        {handleClose ? (\n          <IconButton aria-label=\"close\" onClick={handleClose} sx={{\n            position: 'absolute',\n            right: '0.5em',\n            top: '0.25em',\n            color: '#cb5c5c',\n            padding: 0,\n          }}>\n            <CancelIcon sx={{ width: '1.25em', height: '1.25em' }} />\n          </IconButton>\n        ) : null}\n      </Box>\n\n      <DialogContent sx={{ padding: '0.25em 1.75em 2em', backgroundColor: 'background.paper' }}>\n        <Box component=\"form\" sx={formFieldStyle}>\n\n          <div className=\"input-field\">\n            <div className=\"input-wrapper\">\n              <label>名稱 : &nbsp;</label>\n              <input\n                className={`input-md`}\n                type=\"text\"\n                name=\"name\"\n                value={commFormInfo.name || ''}\n                onChange={handleInputChange}\n                autoComplete=\"off\"\n              />\n            </div>\n          </div>\n\n          <div className=\"input-field\">\n            <div className=\"input-wrapper\">\n              <label>編號 : &nbsp;</label>\n              <input\n                className={`input-md`}\n                type=\"text\"\n                name=\"stockIds\"\n                value={commFormInfo.stockIds || ''}\n                onChange={handleInputChange}\n              />\n            </div>\n          </div>\n\n          <div className=\"submit-field\">\n            <Button\n              disableElevation\n              variant=\"outlined\"\n              size=\"large\"\n              className=\"submitBtn\"\n              type=\"submit\"\n              color=\"primary\"\n              onClick={handleSearch}\n            >\n              搜尋\n            </Button>\n          </div>\n\n          <div className=\"submit-field\">\n            <Button\n              size=\"large\"\n              className=\"submitBtn primaryBtn\"\n              onClick={handleSubmit}\n              endIcon={<SendIcon />}\n            >\n              確認\n            </Button>\n          </div>\n        </Box>\n\n        <Grid\n          container\n          alignItems=\"flex-start\"\n          // wrap=\"nowrap\"\n          sx={{\n            p: '0.5rem 0.25rem',\n            bgcolor: '#eeeeee',\n            borderRadius: 2,\n            '& hr': {\n              height: 'unset',\n            },\n          }}>\n          <Grid xs={12} md item >\n            <Typography variant=\"subtitle1\" sx={{\n              p: '0.25rem 0.5rem',\n              fontWeight: 'bold',\n            }}>\n              商品列表\n            </Typography>\n            <Grid\n              container\n              sx={{\n                px: '0.5rem',\n                pb: '2rem',\n                maxHeight: 400,\n                overflowY: 'auto',\n                display: 'flex',\n                gap: '1rem',\n                '& .MuiCard-root': {\n                  p: '1.5rem 1rem',\n                },\n                '& .comm-name': {\n                  flex: '0 0 100%',\n                },\n                '& .card-grid': {\n                  flex: '0 0 calc(50% - 0.5rem)',\n                  maxWidth: 'calc(50% - 0.5rem)',\n                  '& .MuiPaper-root': {\n                    bgcolor: 'background.default',\n                  },\n                },\n              }}\n            >\n              {renderCommCards(comms, 6)}\n            </Grid>\n          </Grid>\n\n          <Divider orientation=\"vertical\" variant=\"middle\" flexItem sx={{ mx: '1rem' }} />\n\n          <Grid\n            xs={12}\n            md={3}\n            item\n          >\n            <Typography variant=\"subtitle1\" sx={{\n              p: '0.25rem 0.5rem',\n              fontWeight: 'bold',\n            }}>\n              已選取\n            </Typography>\n            <Grid\n              container\n              // spacing={1}\n              direction=\"column\"\n              wrap=\"nowrap\"\n              sx={{\n                pl: '0.25rem',\n                pr: '0.5rem',\n                maxHeight: 400,\n                overflowY: 'auto',\n                '& .MuiPaper-root': {\n                  p: '1.5rem 2rem',\n                  mb: '1rem',\n                },\n                '& .comm-id': {\n                  pt: '0.25rem',\n                  color: 'text.secondary',\n                },\n              }}\n            >\n              {renderSelectedComms(selectedComms)}\n            </Grid>\n          </Grid>\n\n        </Grid>\n\n\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst formFieldStyle = {\n  display: 'flex',\n  p: '1.5em 0 1.5rem',\n  alignItems: 'center',\n  justifyContent: 'space-between',\n  '& .input-field': {\n    flex: '0 0 30%',\n    color: 'secondary.main',\n    paddingRight: '0.5em',\n  },\n  '& .input-wrapper': {\n    padding: '0.375em 0',\n  },\n  '& label': {\n    fontWeight: 'bold',\n    fontSize: '1.125rem',\n  },\n  '& input': {\n    width: 'calc(100% - 4em)',\n    lineHeight: 1.25,\n    padding: '0 0.25em',\n    '&::placeholder': {\n      fontSize: '0.875rem',\n      letterSpacing: '0.04em',\n    },\n    '&.error::placeholder': {\n      color: 'error.light',\n    },\n  },\n  '& .submit-field': {\n    flex: '0 0 18%',\n    display: 'flex',\n    flexWrap: 'wrap',\n    justifyContent: 'center',\n    '& .submitBtn': {\n      flex: '0 0 100%',\n      fontWeight: 'bold',\n      fontSize: '1.125rem',\n      display: 'inline-flex',\n      justifyContent: 'center',\n      // borderRadius: '0.5em',\n      // border: 'none',\n    },\n    '& .primaryBtn': {\n      color: 'background.paper',\n      backgroundColor: (theme) => theme.palette.primary.main,\n      '&:hover': {\n        backgroundColor: (theme) => theme.palette.primary.light,\n      },\n    },\n  },\n}\n\nconst mapStateToProps = state => {\n  return {\n    comms: state.comms,\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  { fetchComms }\n)(DialogComm)\n","import React, { useState, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { Form, Field } from 'react-final-form'\n// import { FORM_ERROR } from 'final-form'\nimport { Box, Grid, Button } from '@mui/material'\nimport { ArrowLeft, ArrowRight } from '@mui/icons-material'\nimport { getDateString, parseMsToDateString } from '../../helpers/dateParser'\nimport { userRequest } from '../../apis'\nimport DialogMember from '../ui/DialogMember'\nimport DialogComm from '../ui/DialogComm'\nimport DialogSalePoint from '../ui/DialogSalePoint'\n\n\n// Form Mutators\nconst changeDate = (args, state) => {\n  const changeType = args[0].currentTarget.dataset.changeType\n\n  const originStartValue = state.formState.values['startDate']\n  const originEndValue = state.formState.values['endDate']\n  const startDateField = state.fields['startDate']\n  const endDateField = state.fields['endDate']\n  originStartValue && startDateField.change(getDateString(originStartValue, changeType))\n  originEndValue && endDateField.change(getDateString(originEndValue, changeType))\n}\n\nconst putInMember = (args, state) => {\n  const memberNameField = state.fields['memberName']\n  const memberIdField = state.fields['memberId']\n  memberNameField.change(args[0].memberName)\n  memberIdField.change(args[0].id)\n}\n\nconst putInComms = (args, state) => {\n  const commIdField = state.fields['stockIds']\n  const commNameField = state.fields['stockNames']\n  const stockIdsArrayString = args[0].map(el => el.stockId).join(',')\n  const stockNamesArrayString = args[0].map(el => el.description).join(',')\n  commIdField.change(stockIdsArrayString)\n  commNameField.change(stockNamesArrayString)\n}\n\nconst putInSalePoints = (args, state) => {\n  const salePointIdField = state.fields['salePointIds']\n  const salePointNameField = state.fields['salePointNames']\n  const salePointIdsArrayString = args[0].map(el => el.id).join(',')\n  const salePointNamesArrayString = args[0].map(el => el.salePointName).join(',')\n  salePointIdField.change(salePointIdsArrayString)\n  salePointNameField.change(salePointNamesArrayString)\n}\n\n// 計算一個月前或一個月後的日期\nconst getMonthIntervalDate = (date, indicator) => {\n  const today = new Date(date)\n  const monthResult = indicator ? (today.getMonth() + 1) : (today.getMonth() - 1)\n  const dateResult = indicator ? (today.getDate() + 1) : (today.getDate() - 1)\n  const monthInterval = new Date(today.getFullYear(), monthResult, dateResult)\n  return parseMsToDateString(monthInterval)\n}\n\n// Component Start\nconst SearchField = ({\n  auth,\n  handleSearchSubmit,\n  currentSearchContent,\n}) => {\n  const [isMemberOpen, setIsMemberOpen] = useState(false)\n  const [isCommOpen, setIsCommOpen] = useState(false)\n  const [isSalePointOpen, setIsSalePointOpen] = useState(false)\n  const [users, setUsers] = useState([])\n  // const [currentMemberId, setCurrentMemberId] = useState('')\n  // const INITIAL_FORM_DATA = {}\n\n  useEffect(() => {\n    const fetchUsers = async () => {\n      const { data } = await userRequest.get('', {\n        headers: { 'Authorization': 'Bearer ' + auth.authenticated },\n        params: { limit: 'zero' },\n      })\n      setUsers(data.list)\n    }\n\n    fetchUsers()\n  }, [auth.authenticated])\n\n  const onSubmit = async (values) => {\n    // console.log('When submit', values)\n    handleSearchSubmit(values)\n  }\n\n  const onSelectClick = putInMemberMutator => member => {\n    putInMemberMutator(member)\n    setIsMemberOpen(false)\n  }\n\n  const onCommSelectClick = putInCommsMutator => comm => {\n    putInCommsMutator(comm)\n    setIsCommOpen(false)\n  }\n\n  const onSalePointSelectClick = putInSalePointsMutator => salePoint => {\n    putInSalePointsMutator(salePoint)\n    setIsSalePointOpen(false)\n  }\n\n  const renderUserOptions = () => {\n    return users.map(user => (\n      <option key={user.userId} value={user.userId}>{user.realName}</option>\n    ))\n  }\n\n  const renderForm = ({\n    handleSubmit,\n    submitError,\n    submitting,\n    pristine,\n    form,\n    values,\n  }) => (\n    <Box component=\"form\" id=\"search-field\" onSubmit={handleSubmit}\n      sx={{\n        fontWeight: 'bold',\n        borderBottom: '2px solid #c4c4c4',\n        '& label': {\n          fontSize: '1.125rem',\n        },\n        '& input': {\n          display: 'inline-block',\n          fontSize: '1rem',\n          lineHeight: 1.5,\n          border: '1px solid #c4c4c4',\n          borderRadius: '0.25em',\n          paddingLeft: '0.25em',\n          paddingRight: '0.25em',\n          minWidth: 0,\n        },\n        '& select': {\n          height: '1.78rem',\n          border: '1px solid #c4c4c4',\n          borderRadius: '0.25em',\n          display: 'inline-block',\n          minWidth: 0,\n        },\n        '& input.error::placeholder': {\n          color: '#cb5c5c',\n        },\n      }}\n    >\n      <Grid container justifyContent=\"space-between\" sx={{ maxWidth: 1100, margin: '0 auto' }}>\n        <Box\n          sx={{\n            flex: '0 0 100%',\n            maxWidth: '100%',\n            display: 'flex',\n            flexDirection: 'column',\n            justifyContent: 'space-between',\n            '@media (min-width: 960px)': {\n              flex: '0 0 41.25%',\n              maxWidth: '41.25%',\n            },\n          }}\n        >\n          <Box\n            sx={{\n              display: 'flex',\n              position: 'relative',\n              paddingBottom: '1rem',\n              '& label': {\n                flex: '0 0 3.5rem',\n                maxWidth: '3.5rem',\n              },\n              '& .date-input-wrapper': {\n                flexGrow: 1,\n                minWidth: 0,\n                '&:first-of-type': {\n                  marginRight: '0.5rem',\n                },\n                '& input': {\n                  width: '100%',\n                },\n              },\n              '& .date-control': {\n                flex: '0 0 3rem',\n                minWidth: '3rem',\n                color: '#767676',\n                cursor: 'pointer',\n              },\n            }}\n          >\n            <label className=\"label\">日期 :</label>\n            <Field name=\"startDate\">\n              {({ input, meta }) => (\n                <div className=\"date-input-wrapper\">\n                  <input className=\"date-input\" {...input} type=\"date\" max={values.endDate} min={values.endDate && getMonthIntervalDate(values.endDate, false)} />\n                </div>\n              )}\n            </Field>\n\n            <Field name=\"endDate\">\n              {({ input, meta }) => {\n                return (\n                  <div className=\"date-input-wrapper\">\n                    <input className=\"date-input\" {...input} type=\"date\" min={values.startDate} max={values.startDate && getMonthIntervalDate(values.startDate, true)} />\n                  </div>\n\n                )\n              }}\n            </Field>\n\n            <div className=\"date-control\">\n              <ArrowLeft viewBox=\"1 2.5 20 20\" data-change-type=\"previous\" onClick={form.mutators.changeDate} />\n              <ArrowRight viewBox=\"4 2.5 20 20\" data-change-type=\"next\" onClick={form.mutators.changeDate} />\n            </div>\n          </Box>\n\n          <Field name=\"memberName\">\n            {({ input, meta }) => (\n              <Box\n                sx={btnFieldStyle}\n              >\n                <label>會員 :</label>\n                <input\n                  {...input}\n                  type=\"text\"\n                  autoComplete=\"off\"\n                  disabled\n                // disabled={values.memberId ? true : false}\n                />\n                <Button\n                  disableElevation\n                  variant=\"contained\"\n                  data-change-type=\"previous\"\n                  onClick={() => setIsMemberOpen(true)}>\n                  查詢\n                </Button>\n                <Button\n                  variant=\"contained\"\n                  disableElevation\n                  data-change-type=\"next\"\n                  onClick={() => form.mutators.putInMember({})}\n                >\n                  清除\n                </Button>\n              </Box>\n            )}\n          </Field>\n\n          <Field name=\"memberId\">\n            {({ input, meta }) => (\n              <input {...input} type=\"hidden\" />\n            )}\n          </Field>\n\n          <DialogMember\n            open={isMemberOpen}\n            onSelectClick={onSelectClick(form.mutators.putInMember)}\n            handleClose={() => setIsMemberOpen(false)}\n          />\n        </Box>\n\n        <Box sx={{\n          flex: '0 0 100%',\n          maxWidth: '100%',\n          display: 'flex',\n          flexDirection: 'column',\n          justifyContent: 'space-between',\n          '@media (min-width: 600px)': {\n            flex: '0 0 49%',\n            maxWidth: '49%',\n          },\n          '@media (min-width: 960px)': {\n            flex: '0 0 33.75%',\n            maxWidth: '33.75%',\n          },\n        }}>\n          <Field name=\"salePointNames\">\n            {({ input, meta }) => (\n              <Box sx={btnFieldStyle}>\n                <label>門市 :</label>\n                <input\n                  {...input}\n                  type=\"text\"\n                  autoComplete=\"off\"\n                  disabled\n                // disabled={values.memberId ? true : false}\n                />\n                <Button\n                  disableElevation\n                  variant=\"contained\"\n                  onClick={() => setIsSalePointOpen(true)}>\n                  查詢\n                </Button>\n                <Button\n                  variant=\"contained\"\n                  disableElevation\n                  onClick={() => form.mutators.putInSalePoints([])}\n                >\n                  清除\n                </Button>\n              </Box>\n            )}\n          </Field>\n\n          <Field name=\"salePointIds\">\n            {({ input, meta }) => (\n              <input {...input} type=\"hidden\" />\n            )}\n          </Field>\n\n          <DialogSalePoint\n            open={isSalePointOpen}\n            onSalePointSelectClick={onSalePointSelectClick(form.mutators.putInSalePoints)}\n            handleClose={() => setIsSalePointOpen(false)}\n          />\n\n          <Field name=\"stockNames\">\n            {({ input, meta }) => (\n              <Box sx={btnFieldStyle}>\n                <label>商品 :</label>\n                <input\n                  {...input}\n                  type=\"text\"\n                  autoComplete=\"off\"\n                  disabled\n                // disabled={values.memberId ? true : false}\n                />\n                <Button\n                  disableElevation\n                  variant=\"contained\"\n                  data-change-type=\"previous\"\n                  onClick={() => setIsCommOpen(true)}>\n                  查詢\n                </Button>\n                <Button\n                  variant=\"contained\"\n                  disableElevation\n                  data-change-type=\"next\"\n                  onClick={() => form.mutators.putInComms([])}\n                >\n                  清除\n                </Button>\n              </Box>\n            )}\n          </Field>\n\n          <Field name=\"stockIds\">\n            {({ input, meta }) => (\n              <input {...input} type=\"hidden\" />\n            )}\n          </Field>\n\n          <DialogComm\n            open={isCommOpen}\n            onCommSelectClick={onCommSelectClick(form.mutators.putInComms)}\n            handleClose={() => setIsCommOpen(false)}\n          />\n        </Box>\n\n        <Box sx={{\n          flex: '0 0 100%',\n          maxWidth: '100%',\n          display: 'flex',\n          flexDirection: 'column',\n          justifyContent: 'space-between',\n          '@media (min-width: 600px)': {\n            flex: '0 0 49%',\n            maxWidth: '49%',\n          },\n          '@media (min-width: 960px)': {\n            flex: '0 0 20%',\n            maxWidth: '20%',\n          },\n        }}>\n          <Field name=\"salesman\">\n            {({ input, meta }) => (\n              <Box sx={threeWordFieldStyle}>\n                <label>銷售員 :</label>\n                <select {...input} name=\"\">\n                  <option />\n                  {renderUserOptions()}\n                </select>\n              </Box>\n            )}\n          </Field>\n          <Field name=\"userId\">\n            {({ input, meta }) => (\n              <Box sx={threeWordFieldStyle}>\n                <label>服務員 :</label>\n                <select {...input} name=\"\">\n                  <option />\n                  {renderUserOptions()}\n                </select>\n              </Box>\n            )}\n          </Field>\n        </Box>\n\n        <Grid container item xs={12} justifyContent=\"center\" sx={{ padding: '1rem 0 1.5rem' }}>\n          {submitError && <span className=\"error\">{submitError}</span>}\n          {/* <div className={classes.btnWrapper}>\n          </div> */}\n          <Box sx={{\n            display: 'flex',\n            '& button': {\n              fontSize: '1rem',\n              minWidth: '6.5em',\n              padding: '0.125rem 0.75rem',\n              margin: '0 0.75em',\n            },\n            '& button.subBtn': {\n              color: 'secondary.matte',\n              border: '1px solid #e8e8e8',\n            },\n            '& button.mainBtn': {\n              fontWeight: 'bold',\n              color: 'background.paper',\n              backgroundColor: (theme) => theme.palette.primary.main,\n              '&:hover': {\n                backgroundColor: '#fabd5e',\n              },\n            },\n          }}>\n            <Button\n              className=\"subBtn\"\n              onClick={() => form.reset({})}\n              disabled={submitting}\n              variant=\"outlined\"\n              type=\"button\"\n            >\n              全部清除\n            </Button>\n            {/* <Button\n              className=\"subBtn\"\n              onClick={() => form.reset({ ...currentSearchContent })}\n              disabled={submitting}\n              variant=\"outlined\"\n              type=\"button\">\n              匯出還原\n            </Button> */}\n            <Button\n              className=\"mainBtn\"\n              variant=\"contained\"\n              disableElevation={true}\n              type=\"submit\"\n              disabled={submitting}>\n              搜尋\n            </Button>\n          </Box>\n        </Grid>\n      </Grid>\n    </Box>\n  )\n\n  return (\n    <Form\n      initialValues={{ ...currentSearchContent }}\n      onSubmit={onSubmit}\n      // validate={validate}\n      render={renderForm}\n      mutators={{\n        changeDate,\n        putInMember,\n        putInComms,\n        putInSalePoints,\n      }}\n    ></Form>\n  )\n}\n\nconst btnFieldStyle = {\n  display: 'flex',\n  position: 'relative',\n  paddingBottom: '1rem',\n  '& label': {\n    flex: '0 0 3.5rem',\n    maxWidth: '3.5rem',\n  },\n  '& input': {\n    flexGrow: 1,\n    '&:disabled': {\n      color: '#000000',\n      backgroundColor: '#fbfbfb',\n    },\n  },\n  '& button': {\n    padding: '0 7px',\n    minWidth: '41px',\n    marginLeft: '0.25rem',\n    marginTop: '0.125rem',\n    marginBottom: '0.125rem',\n    color: 'background.paper',\n    bgcolor: 'primary.light',\n    '&:hover': {\n      bgcolor: 'primary.main',\n    },\n  },\n}\n\nconst threeWordFieldStyle = {\n  display: 'flex',\n  position: 'relative',\n  paddingBottom: '1rem',\n  '& label': {\n    flex: '0 0 4.5rem',\n    maxWidth: '4.5rem',\n  },\n  '& input': {\n    flex: '0 0 calc(100% - 4.5rem)',\n    maxWidth: 'calc(100% - 4.5rem)',\n  },\n  '& select': {\n    flex: '0 0 calc(100% - 4.5rem)',\n    maxWidth: 'calc(100% - 4.5rem)',\n  },\n}\n\nconst mapStateToProps = (state) => ({\n  auth: state.auth,\n})\n\nexport default connect(mapStateToProps)(SearchField)","import React from 'react'\nimport Box from '@mui/material/Box'\nimport IconButton from '@mui/material/IconButton'\nimport PrintRoundedIcon from '@mui/icons-material/PrintRounded'\nimport { OrderItemDetail, showOrderTime, renderPayment } from '../ui/PrintedOrder'\n\nconst OrderItem = ({\n  order,\n  index,\n  offset,\n  creditInfo,\n  onPrintClick,\n}) => {\n\n  return (\n    <Box\n      className=\"order-list-item\"\n    >\n      <Box className={`order-info-wrapper${order.isReturn ? ' returned' : ''}`}>\n        <div className=\"order-info\">\n          <div className=\"serial-sec\">{index + 1 + offset}</div>\n\n          <div className=\"info-sec-container\">\n            <div className=\"info-sec-wrapper\">\n              <div className=\"info-sec\">\n                <span className=\"info-title\">日期 : </span>\n                <span className=\"info-content\">{showOrderTime(order.date)}</span>\n              </div>\n              <div className=\"info-sec\">\n                <span className=\"info-title\">門市 : </span>\n                <span className=\"info-content\">\n                  {order?.cashRegister?.salePoint?.salePointName || '-'}\n                </span>\n              </div>\n            </div>\n\n            <div className=\"info-sec-wrapper\">\n              <div className=\"info-sec\">\n                <span className=\"info-title\">會員 : </span>\n                <span className=\"info-content\">\n                  {order.memberInfo ? `${order.memberInfo.memberName} | ${order.memberInfo.phone}` : '---'}\n                </span>\n              </div>\n              <div className=\"info-sec\">\n                <span className=\"info-title\">發票 : </span>\n                <span className=\"info-content\">\n                  {order.invoicePage ? order.invoicePage.no : '無發票資訊'}\n                </span>\n              </div>\n            </div>\n\n            <div className=\"info-sec-wrapper\">\n              <div className=\"info-sec\">\n                <span className=\"info-title\">銷售員 : </span>\n                <span className=\"info-content\">\n                  {order.salesman && order.salesman.realName}\n                </span>\n              </div>\n              <div className=\"info-sec\">\n                <span className=\"info-title\">服務員 : </span>\n                <span className=\"info-content\">\n                  {order.user && order.user.realName}\n                </span>\n              </div>\n            </div>\n\n          </div>\n        </div>\n\n        <div className=\"order-id\">\n          {order.no}\n        </div>\n\n        <IconButton className=\"print-btn\" onClick={() => onPrintClick(order)}>\n          <PrintRoundedIcon />\n        </IconButton>\n      </Box>\n\n      <OrderItemDetail list={order.salesDetails || []} />\n\n      <Box\n        className=\"order-detail\"\n      >\n        <div className=\"credit-info\">\n          <div className=\"last-yard\">\n            <span>信用卡號末四碼 : </span>\n            <span>\n              {creditInfo.cardNo ? creditInfo.cardNo.replaceAll(' ', '').slice(-4) : '- - - -'}\n            </span>\n          </div>\n          <div className=\"auth-yard\">\n            <span>授權碼 : </span>\n            <span>\n              {creditInfo.approvalCode || '- - - -'}\n            </span>\n          </div>\n        </div>\n\n        <div className=\"received-info\">\n          <div className=\"received-list\">\n            {renderPayment(order.salesPayments || [])}\n          </div>\n\n          <div className=\"total-sum\">\n            <span>總金額 :&nbsp;</span>\n            <span>\n              {`${order.actualTotal}元`}\n            </span>\n          </div>\n        </div>\n      </Box>\n    </Box>\n  )\n}\n\nexport default OrderItem\n","import React, { useState, useEffect, useRef } from 'react'\nimport Box from '@mui/material/Box'\nimport IconButton from '@mui/material/IconButton'\nimport ArrowUpwardIcon from '@mui/icons-material/ArrowUpward'\nimport OrderItem from './OrderItem'\nimport PrintedOrder, { orderTableStyle } from '../ui/PrintedOrder'\n\nconst OrderList = ({ filteredOrders, offset }) => {\n  const printContentRef = useRef(null)\n  const [printOrder, setPrintOrder] = useState(null)\n\n  const onPrintClick = order => {\n    setPrintOrder(order)\n  }\n\n  useEffect(() => {\n    if (printOrder) {\n      const printContent = printContentRef.current\n      const printIframe = document.querySelector('#print-iframe')\n      printIframe.innerHTML = printContent.innerHTML\n      window.print()\n\n      printIframe.innerHTML = null\n      setPrintOrder(null)\n    }\n\n  }, [printOrder])\n\n  const topListTop = () => {\n    const offsetTop = document.getElementById('pagination').offsetTop\n    window.scroll({ top: offsetTop, left: 0, behavior: 'auto' })\n  }\n\n  const renderOrders = orders => {\n    return orders.map((order, index) => {\n\n      const creditInfo = order.salesPayments.find(payment => Boolean(payment.creditCard))?.creditCard || {}\n\n      return (\n        <OrderItem\n          key={order.id}\n          index={index}\n          order={order}\n          offset={offset}\n          creditInfo={creditInfo}\n          onPrintClick={onPrintClick}\n        />\n      )\n    })\n  }\n\n  return (\n    <React.Fragment>\n      <Box\n        id=\"order-list-container\"\n        sx={{\n          pt: '1.5rem',\n          pb: '1.5rem',\n          '& .order-list-item': {\n            borderBottom: '2px solid #a4a4a4',\n            marginBottom: '4rem',\n            boxShadow: '0px 0px 14px -10px #bbbbbb',\n            '&:last-of-type': {\n              marginBottom: 0,\n            },\n          },\n          '& .order-info-wrapper': {\n            display: 'flex',\n            flexWrap: 'wrap',\n            alignItems: 'center',\n            justifyContent: 'center',\n            bgcolor: 'secondary.matte',\n            '&.returned': {\n              bgcolor: '#878787',\n            },\n            '& .order-info': {\n              flexGrow: 1,\n              display: 'inline-flex',\n              flexWrap: 'wrap',\n              alignItems: 'center',\n              fontWeight: 'bold',\n            },\n            '& .order-id': {\n              color: 'background.paper',\n              py: '0.5em',\n              pr: '0.5em',\n            },\n            '& .print-btn': {\n              mr: '0.25em',\n              color: 'background.paper',\n            },\n            '& .serial-sec': {\n              flex: '0 0 4rem',\n              display: 'inline-flex',\n              justifyContent: 'center',\n              fontSize: '1.5rem',\n              color: 'background.paper',\n              padding: '0 1em',\n              minWidth: 0,\n            },\n            '& .info-sec-container': {\n              flex: '0 0 calc(100% - 4rem)',\n              display: 'inline-flex',\n              flexWrap: 'wrap',\n              padding: '0.25em 0',\n            },\n            '& .info-sec-wrapper': {\n              flex: '0 0 100%',\n              display: 'inline-flex',\n              flexWrap: 'wrap',\n              paddingRight: '1.75em',\n            },\n            '& .info-sec': {\n              flex: '0 0 50%',\n              paddingTop: '0.125em',\n              paddingBottom: '0.125em',\n              '@media (min-width: 600px)': {\n                flex: 'unset',\n              },\n            },\n            '& .info-title': {\n              color: (theme) => theme.palette.primary.main,\n            },\n            '& .info-content': {\n              color: 'background.paper',\n            },\n          },\n          '& .order-table': orderTableStyle,\n          '& .order-detail': {\n            display: 'flex',\n            justifyContent: 'space-between',\n            color: 'text.secondary',\n            backgroundColor: 'background.default',\n            padding: '0.5em 1em',\n            '& .credit-info': {\n              display: 'inline-flex',\n              flexWrap: 'wrap',\n              alignItems: 'center',\n            },\n            '& .credit-info > div': {\n              fontSize: '0.9rem',\n              flex: '0 0 100%',\n              display: 'inline-block',\n              paddingRight: '1em',\n            },\n            '& .received-info': {\n              display: 'inline-flex',\n              alignItems: 'center',\n            },\n            '& .received-info > div': {\n              display: 'inline-flex',\n              alignItems: 'center',\n            },\n            '& .received-list > div': {\n              display: 'inline-block',\n              paddingRight: '1em',\n            },\n            '& .total-sum': {\n              fontSize: '1.25rem',\n              fontWeight: 'bold',\n              color: 'secondary.main',\n            },\n          },\n          '@media (min-width: 600px)': {\n            '& .order-info-wrapper .info-sec-wrapper': {\n              flexDirection: 'column',\n              flex: 'unset',\n            },\n            '& .order-info-wrapper .info-sec-wrapper:last-child': {\n              paddingRight: 0,\n            },\n            '& .order-info-wrapper .info-sec': {\n              flex: 'unset',\n            },\n          },\n        }}\n      >\n        {renderOrders(filteredOrders)}\n      </Box >\n\n      <Box sx={{\n        display: 'flex',\n        justifyContent: 'flex-end',\n        pb: '1.5rem'\n      }}>\n        <IconButton\n          onClick={topListTop}\n          size=\"large\"\n          sx={{\n            bgcolor: 'primary.main',\n            color: 'background.default',\n            '&:hover': {\n              bgcolor: 'primary.light',\n            },\n          }}\n        >\n          <ArrowUpwardIcon fontSize=\"large\" />\n        </IconButton>\n      </Box>\n\n      <Box className=\"print-content\" ref={printContentRef} sx={{ display: 'none' }}>\n        {printOrder && <PrintedOrder order={printOrder} />}\n      </Box>\n\n\n    </React.Fragment>\n  )\n}\n\nexport default OrderList","import React from 'react'\nimport { Pagination as PaginationComponent } from '@mui/material'\n\nconst Pagination = ({ totalPage, currentPage, handlePageChange }) => {\n\n  return (\n    <div id=\"pagination\">\n      <PaginationComponent\n        count={totalPage}\n        page={currentPage}\n        siblingCount={2}\n        size=\"small\"\n        shape=\"rounded\"\n        showFirstButton\n        showLastButton\n        onChange={handlePageChange}\n        sx={{\n          padding: '2rem 0 0rem',\n          // borderBottom: '2px dashed #dddddd',\n          '& .MuiPagination-ul': {\n            justifyContent: 'flex-end',\n          },\n          '& .MuiPaginationItem-root': {\n            color: 'secondary.main',\n          },\n          '& .MuiPaginationItem-page.Mui-selected': {\n            color: 'background.default',\n            backgroundColor: (theme) => theme.palette.primary.main,\n          },\n        }}\n      />\n    </div>\n  )\n}\n\nexport default Pagination","import React from 'react'\nimport { Box, Grow } from '@mui/material'\nimport { TransitionGroup } from 'react-transition-group'\n\nconst formatDateDivider = dateString => {\n  return dateString\n    ? dateString.replaceAll('-', '/')\n    : '-'\n}\n\nconst DailyStatisticList = ({\n  salePayments,\n  currentSearchContent,\n}) => {\n\n  const aggregatePayment = data => {\n    const paymentObj = {}\n    data.forEach(dailyData => {\n      if (!paymentObj[dailyData.paymentName]) { paymentObj[dailyData.paymentName] = 0 }\n      paymentObj[dailyData.paymentName] += dailyData.value\n    })\n\n    return paymentObj\n  }\n\n  const renderDashboard = (title, result, key) => {\n    if (!result || result.length === 0) { return null }\n    return (\n      <Grow key={key}>\n        <Box sx={statisticItemStyle}>\n          <div className=\"header-sec\">\n            <div className=\"date-sec\">\n              <span>{formatDateDivider(currentSearchContent.startDate)}</span>\n              &nbsp; - &nbsp;\n              <span>{formatDateDivider(currentSearchContent.endDate)}</span>\n            </div>\n            <div className=\"store-sec\">\n              {title}\n            </div>\n          </div>\n          <div className=\"receiveds-sec\">\n            {result}\n          </div>\n        </Box>\n      </Grow>\n    )\n  }\n\n  const renderDailyStatistic = (data = []) => {\n    const paymentObj = aggregatePayment(data)\n    const result = Object.keys(paymentObj).map(paymentName => {\n      return (\n        <Box key={paymentName}>\n          <div className=\"title\">{paymentName}:</div>\n          <span className=\"content\">{paymentObj[paymentName]}</span>\n        </Box>\n      )\n    })\n\n    return renderDashboard('全部 收銀機', result, 'All')\n  }\n\n  // // 先依照天次區分資料\n  // const divideDailyData = (data = []) => {\n  //   const divideData = {}\n  //   data.forEach(item => {\n  //     const dataDate = parseMsToDateString(item.date)\n  //     if (!divideData[dataDate]) { divideData[dataDate] = [] }\n  //     divideData[dataDate].push(item)\n  //   })\n  //   return divideData\n  // }\n\n  // 先依照收銀機區分資料\n  const divideCashRegisterData = (data = []) => {\n    const dividedData = {}\n    data.forEach(item => {\n      const cashRegisterName = item.cashRegisterName\n      if (!dividedData[cashRegisterName]) { dividedData[cashRegisterName] = [] }\n      dividedData[cashRegisterName].push(item)\n    })\n    return dividedData\n  }\n\n  const renderDailyStatistics = (divideData = {}) => {\n    // 先依照天次處理資料\n    return Object.keys(divideData).map((divider) => {\n      const dailyDataArray = divideData[divider]\n      const paymentObj = aggregatePayment(dailyDataArray)\n      const result = Object.keys(paymentObj).map(paymentName => {\n        return (\n          <Box key={paymentName}>\n            <div className=\"title\">{paymentName}:</div>\n            <span className=\"content\">{paymentObj[paymentName]}</span>\n          </Box>\n        )\n      })\n\n      return renderDashboard(divider, result, divider)\n    })\n  }\n\n  return (\n    <Box component=\"section\" id=\"daily-statistic-list\"\n      sx={{\n        // margin: '3rem 0 0',\n        padding: '3rem 0 1.5rem',\n        borderBottom: '2px dashed #dddddd',\n      }}\n    >\n      <Box sx={{ display: 'flex', flexWrap: 'wrap', justifyContent: 'space-between' }}>\n        <TransitionGroup component={null}>\n          {renderDailyStatistic(salePayments)}\n          {renderDailyStatistics(divideCashRegisterData(salePayments))}\n        </TransitionGroup>\n      </Box>\n    </Box>\n  )\n}\n\nconst statisticItemStyle = {\n  flex: '0 0 100%',\n  borderRadius: '0.25em',\n  backgroundColor: '#f7f7f7',\n  marginBottom: '2em',\n  boxShadow: '0px 0px 12px -2px #cacaca',\n  overflow: 'hidden',\n  '@media (min-width: 600px)': {\n    flex: '0 0 49%',\n  },\n  '& .header-sec': {\n    display: 'flex',\n    flexWrap: 'wrap',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    backgroundColor: 'var(--gray-blue)',\n    padding: '0.5em 0.75em',\n  },\n  '& .date-sec': {\n    letterSpacing: '0.025em',\n    fontWeight: 'bold',\n    fontSize: '1.15rem',\n    color: 'background.paper',\n    // '& span': {\n    //   background: (theme) => `linear-gradient(to bottom, transparent, transparent 50%, ${alpha(theme.palette.text.primary, 0.2)} 50%)`,\n    // },\n  },\n  '& .store-sec': {\n    fontSize: '0.9rem',\n    color: 'background.paper',\n  },\n  '& .receiveds-sec': {\n    display: 'flex',\n    flexWrap: 'wrap',\n    padding: '0.5em 0',\n    '& > div': {\n      flex: '0 0 20%',\n      display: 'inline-block',\n      fontWeight: 'bold',\n      textAlign: 'center',\n      color: '#333333',\n      padding: '0 0.5em',\n      margin: '0.25em 0',\n      borderRight: '1px solid #cccccc',\n    },\n    '& .title': {\n      fontSize: '0.9rem',\n      color: 'text.secondary',\n    },\n    '& .content': {\n      fontSize: '1.125rem',\n    },\n  },\n}\n\nexport default DailyStatisticList","import React from 'react'\nimport { compose } from 'redux'\nimport { connect } from 'react-redux'\nimport { Box, Container, Typography } from '@mui/material'\nimport { omit } from 'lodash-es'\nimport { fetchSales } from '../../slices/salesSlice'\nimport qs from 'query-string'\nimport withAuth from '../Auth/withAuth'\nimport SearchField from './SearchField'\nimport OrderList from './OrderList'\nimport Pagination from './Pagination'\nimport DailyStatisticList from './DailyStatisticList'\nimport { salesRequest } from '../../apis'\n// import { parseMsToDateString } from '../../helpers/dateParser'\n\nconst ORDERS_PER_PAGE = 5\nconst REQUIRED_STATE_NAMES = ['startDate', 'endDate', 'memberName', 'memberId', 'salePointNames', 'salePointIds', 'stockNames', 'stockIds', 'salesman', 'userId']\n\n// const todayParams = { startDate: parseMsToDateString(Date.now()), endDate: parseMsToDateString(Date.now()) }\n// const todayQueryString = '?' + new URLSearchParams(todayParams).toString()\n\n\nclass PosOrderList extends React.Component {\n  state = {\n    // currentSearchContent: todayParams,\n    currentSearchContent: {},\n    // currentSearchString: todayQueryString,\n    currentSearchString: '',\n    currentPage: 1,\n    // posOrders為統計用，filteredOrders為分頁用\n    // posOrders: [],\n    filteredOrders: [],\n    salePayments: [],\n  }\n\n  fetchSales = params => {\n    this.props.fetchSales({\n      limit: ORDERS_PER_PAGE,\n      sort: 'date desc',\n      ...params,\n    })\n  }\n\n  fetchSalePayments = async (params) => {\n    const { data } = await salesRequest.get('/payment/summary', {\n      headers: { 'Authorization': 'Bearer ' + this.props.auth.authenticated },\n      params: params,\n    })\n    this.setState({ salePayments: data.list })\n  }\n\n  componentDidMount = () => {\n    if (this.props.location.search) {\n      const newSearchContent = {}\n      const queryObj = qs.parse(this.props.location.search)\n      REQUIRED_STATE_NAMES.forEach(stateName => {\n        if (queryObj[stateName]) { newSearchContent[stateName] = queryObj[stateName] }\n      })\n      this.setState({\n        currentSearchContent: newSearchContent,\n        currentSearchString: this.props.location.search,\n        ...(Number(queryObj.page) ? { currentPage: Number(queryObj.page) } : { currentPage: 1 }),\n      })\n      this.fetchSales({\n        ...newSearchContent,\n        ...(Number(queryObj.page) ? { page: Number(queryObj.page) } : {}),\n      })\n      newSearchContent.startDate && newSearchContent.endDate && this.fetchSalePayments({\n        ...newSearchContent,\n        ...(Number(queryObj.page) ? { page: Number(queryObj.page) } : {}),\n      })\n    }\n    else {\n      this.fetchSales({\n        page: 1,\n        // ...todayParams,\n      })\n      // this.props.history.push(todayQueryString)\n    }\n  }\n\n  componentDidUpdate = () => {\n    // 比較 URL QueryString 與暫存的 currentSearchString，不同時重新抓取資料\n    // 因為分頁被獨立出來成currentPage，所以需要忽略page去判斷\n    if (this.props.location.search !== this.state.currentSearchString) {\n      const queryObj = qs.parse(this.props.location.search, { sort: false })\n      const noPageQueryObj = omit(queryObj, ['page'])\n      const noPageSearchString = new URLSearchParams(noPageQueryObj).toString()\n      const searchContentString = new URLSearchParams(this.state.currentSearchContent).toString()\n      const newCurrentPage = Number(queryObj.page) || 1\n      if (noPageSearchString !== searchContentString) {\n        // Refetch search API here with noPageQueryObj\n        this.setState({\n          currentPage: newCurrentPage,\n          currentSearchContent: noPageQueryObj,\n          currentSearchString: this.props.location.search,\n        })\n      }\n      else {\n        this.setState({\n          currentPage: newCurrentPage,\n          currentSearchString: this.props.location.search\n        })\n      }\n      // this.setState({ currentPage: newCurrentPage })\n      this.fetchSales({\n        ...queryObj,\n        page: newCurrentPage,\n      })\n      queryObj.startDate && queryObj.endDate && this.fetchSalePayments({\n        ...queryObj,\n        page: newCurrentPage,\n      })\n    }\n  }\n\n  changePage = pageValue => {\n    this.setState({ currentPage: pageValue })\n    this.fetchSales({\n      ...this.state.currentSearchContent,\n      page: pageValue,\n    })\n  }\n\n  filterParams = params => {\n    const filteredParams = {}\n    REQUIRED_STATE_NAMES.forEach(stateName => {\n      if (params[stateName]) { filteredParams[stateName] = params[stateName] }\n    })\n    return filteredParams\n  }\n\n  handlePageChange = (e, value) => {\n    this.changePage(value)\n    // 處理 URL QueryString\n    const searchContent = value === 1\n      ? omit(this.state.currentSearchContent, ['page'])\n      : { ...this.state.currentSearchContent, page: value }\n    const searchParams = new URLSearchParams(searchContent)\n    const queryString = '?' + searchParams.toString()\n    const offsetTop = document.getElementById('pagination').offsetTop\n    this.setState({ currentSearchString: queryString })\n    this.props.history.push(queryString)\n    window.scroll({ top: offsetTop, left: 0, behavior: 'smooth' })\n  }\n\n  handleSearchSubmit = values => {\n    const params = this.filterParams(values)\n    this.setState({\n      currentSearchContent: params,\n      currentPage: 1,\n    })\n    this.fetchSales(params)\n    params.startDate && params.endDate\n      ? this.fetchSalePayments(params)\n      : this.setState({ salePayments: [] })\n    const searchParams = new URLSearchParams(params)\n    const queryString = '?' + searchParams.toString()\n    this.setState({ currentSearchString: queryString })\n    this.props.history.push(queryString)\n  }\n\n\n  render() {\n    const offset = (this.state.currentPage - 1) * ORDERS_PER_PAGE\n\n    return (\n      <Box id=\"pos-order-list\" component=\"div\"\n        sx={{\n          bgcolor: 'background.paper',\n        }}\n      >\n        <Container maxWidth={false} sx={{\n          bgcolor: 'background.paper',\n          maxWidth: 1600,\n          minHeight: 'calc(100vh - 2.5rem)',\n          boxShadow: '0px 0px 12px -6px #cccccc',\n        }}>\n          <Typography variant=\"h1\" component=\"div\" sx={{\n            fontSize: '1.75rem',\n            fontWeight: 'bold',\n            textAlign: 'center',\n            color: 'secondary.main',\n            padding: '1.75rem 0 1.75rem',\n            margin: 0,\n          }}>\n            銷售明細表\n          </Typography>\n          <SearchField\n            currentSearchContent={this.state.currentSearchContent}\n            handleSearchSubmit={this.handleSearchSubmit}\n          />\n          {\n            this.state.currentSearchContent.startDate &&\n            this.state.currentSearchContent.endDate &&\n            (<DailyStatisticList\n              salePayments={this.state.salePayments}\n              currentSearchContent={this.state.currentSearchContent}\n            />)\n          }\n          <Pagination\n            totalPage={this.props.sales.totalPage}\n            currentPage={this.state.currentPage}\n            handlePageChange={this.handlePageChange}\n          />\n          <OrderList\n            offset={offset}\n            filteredOrders={this.props.sales.list || []}\n          />\n        </Container>\n      </Box>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    auth: state.auth,\n    sales: state.sales,\n  }\n}\n\nconst enhance = compose(\n  withAuth(),\n  connect(mapStateToProps, { fetchSales }),\n)\n\nexport default enhance(PosOrderList)\n"],"sourceRoot":""}