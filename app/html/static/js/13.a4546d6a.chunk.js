(this["webpackJsonpbonvies-pos"]=this["webpackJsonpbonvies-pos"]||[]).push([[13],{253:function(e,t,c){"use strict";var a=c(5),n=c(0),r=c(54),i=c(2),o={shop:5,company:10,enterprise:15};t.a=function(e){return function(t){return Object(r.b)((function(e){return{auth:e.auth.authenticated,level:e.auth.level}}))((function(c){var r=c.auth,s=c.level,l=c.history;return Object(n.useEffect)((function(){r?e&&(!s||o[e]>o[s])&&l.push("/"):l.push("/signin")}),[r,s,l]),Object(i.jsx)(t,Object(a.a)({},c))}))}}},353:function(e,t,c){"use strict";c.r(t);var a=c(0),n=c.n(a),r=c(30),i=c(244),o=c(277),s=c(7),l=c(10),d=c(5),m=c(16),b=c(112),p=c(54),h=c(358),u=c(268),j=c(45),g=c(2),x={flex:"1 1 auto",display:"flex",flexDirection:"column",minHeight:0,pb:"2rem","& .comm-header":{backgroundColor:"#dadada",lineHeight:2,"& .comm-info-header":{display:"inline-flex",alignItems:"center",width:"85%"},"& .comm-btn-header":{display:"inline-block",width:"15%",textAlign:"center",paddingRight:"5px"}},"& .comm-list":{overflowY:"auto",overflowX:"hidden","& .comm-list-wrapper > div":{lineHeight:2.5,bgcolor:"background.paper",borderBottom:"1px dashed #666666",overflow:"hidden",transition:"all 0.04s linear"},"& .comm-list-wrapper > div.active":{zIndex:2,backgroundColor:"background.default"},"& .comm-list-wrapper > div:hover":{zIndex:2,backgroundColor:" #e4e4e4"},"& .comm-info":{display:"inline-flex",alignItems:"center",width:"85%"}},"& .comm-id":{display:"inline-block",width:"20%",padding:"0 0.5rem"},"& .comm-name":{display:"inline-block",width:"35%",padding:"0 0.5rem","& p":{fontWeight:"bold"}},"& .comm-price":{display:"inline-block",width:"17.5%",padding:"0 0.5rem",textAlign:"center"},"& .comm-class-name":{display:"inline-block",width:"25%",padding:"0 0.5rem",textAlign:"center"}},f=function(){var e=Object(a.useState)(""),t=Object(m.a)(e,2),c=t[0],r=t[1],f=Object(a.useState)({}),O=Object(m.a)(f,2),v=O[0],y=O[1],k=Object(a.useState)(""),w=Object(m.a)(k,2),N=w[0],R=w[1],I=Object(a.useState)(!1),C=Object(m.a)(I,2),S=C[0],W=C[1],z=Object(a.useState)(""),A=Object(m.a)(z,2),D=A[0],B=A[1],H=Object(a.useState)(!1),L=Object(m.a)(H,2),T=L[0],J=L[1],E=Object(a.useState)(""),F=Object(m.a)(E,2),_=F[0],X=F[1],Y=Object(p.d)((function(e){return e.auth})),q=Object(b.b)(["/stock-master",Y.authenticated,Object(d.a)({sort:"sale_start_date desc",limit:15},v)]),G=q.data,K=q.error,M=Object(b.b)(["/stock-category",Y.authenticated,{limit:"zero",catRank:1}]),P=M.data,Q=M.error,U=Object(b.b)(S?["/stock-category",Y.authenticated,{limit:"zero",catRank:2,parent:N}]:null),V=U.data,Z=U.error,$=Object(b.b)(T?["/stock-category",Y.authenticated,{limit:"zero",catRank:3,parent:D}]:null),ee=$.data,te=$.error,ce=G?G.list:[],ae=P?P.list:[],ne=V?V.list:[],re=ee?ee.list:[];K&&Object(j.d)(K,"#comm-mange"),Q&&Object(j.d)(Q,"#comm-mange"),Z&&Object(j.d)(Z,"#comm-mange"),te&&Object(j.d)(te,"#comm-mange");var ie,oe=function(){var e=Object(l.a)(Object(s.a)().mark((function e(t){var a,n;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.value,n=a?{categoryId:a,name:c}:{name:c},R(a),B(""),X(""),W(!0),J(!1),y(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(l.a)(Object(s.a)().mark((function e(t){var a,n;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.value,n=a?{categoryId:a,name:c}:{categoryId:N,name:c},B(a),X(""),J(!0),y(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(e){return e.map((function(e){return Object(g.jsx)("option",{value:e.categoryId,children:(t=e.categoryDescription,t.replaceAll(/[[\]]/g,""))},e.categoryId);var t}))},de=ce.map((function(e){return Object(g.jsx)("div",{children:Object(g.jsxs)("div",{className:"comm-info",children:[Object(g.jsx)("span",{className:"comm-id",children:Object(g.jsx)(u.a,{noWrap:!0,variant:"body2",title:e.stockId,children:e.stockId})}),Object(g.jsx)("span",{className:"comm-name",children:Object(g.jsx)(u.a,{noWrap:!0,variant:"body2",title:e.description,children:e.description})}),Object(g.jsx)("span",{className:"comm-price",children:Object(g.jsx)(u.a,{noWrap:!0,variant:"body2",title:e.price?e.price.price:0,children:e.price?e.price.price:0})}),Object(g.jsx)("span",{className:"comm-class-name",children:Object(g.jsx)(u.a,{noWrap:!0,variant:"body2",title:e.stockCategory.categoryDescription,children:e.stockCategory.categoryDescription})})]})},e.stockId)}));return Object(g.jsx)(n.a.Fragment,{children:Object(g.jsxs)(o.a,{item:!0,xs:12,md:7,id:"comm-manage-list",sx:{display:"flex",height:"calc(100vh - 2.5rem)",bgcolor:"background.paper",flexDirection:"column",padding:"0 1em 2em",color:"#3c3c3c","& h5":{pt:"1.5rem",pb:"0.5rem",fontWeight:"bold"},"& .comm-classes":{paddingBottom:"0.75em"},"& .comm-classes select":{width:"100%",color:"#666666",borderColor:"#cccccc"},"@media (min-width: 960px)":{borderRight:"3px dashed #cccccc"}},children:[Object(g.jsx)(u.a,{variant:"h5",children:"\u5546\u54c1\u76ee\u9304"}),Object(g.jsxs)(i.a,{component:"form",className:"comm-search",sx:{padding:"0 0 0.75em",'& input[type="text"]':{width:"80%",border:"1px solid #c4c4c4",borderRight:"none",lineHeight:1.75,borderTopLeftRadius:"0.3em",borderBottomLeftRadius:"0.3em"},'& input[type="submit"]':{width:"20%",lineHeight:1.75,border:"1px solid #c4c4c4",borderLeft:"none",letterSpacing:"0.2em",color:"background.default",bgcolor:"primary.light",borderTopRightRadius:"0.3em",borderBottomRightRadius:"0.3em"}},children:[Object(g.jsx)("input",{placeholder:"\u8acb\u8f38\u5165\u5546\u54c1\u540d\u7a31",type:"text",value:c,onChange:function(e){return r(e.target.value)}}),Object(g.jsx)("input",{type:"submit",value:"\u641c\u5c0b",onClick:function(e){e.preventDefault(),y(c?{name:c,categoryId:_||D||N}:{categoryId:_||D||N})}})]}),Object(g.jsx)(i.a,{className:"comm-classes",children:Object(g.jsxs)("select",{onChange:oe,children:[Object(g.jsx)("option",{value:"",children:"\u5168\u90e8\u5927\u985e\u5225"}),le(ae)]})}),ne.length>0&&Object(g.jsx)(i.a,{className:"comm-classes",children:Object(g.jsxs)("select",{onChange:se,children:[Object(g.jsx)("option",{value:"",children:"\u5168\u90e8\u6b21\u985e\u5225"}),le(ne)]})}),re.length>0&&Object(g.jsx)(i.a,{className:"comm-classes",children:Object(g.jsxs)("select",{onChange:function(e){var t=e.target.value,a=t?{categoryId:t,name:c}:{categoryId:D||N,name:c};X(t),y(a)},children:[Object(g.jsx)("option",{value:"",children:"\u5168\u90e8\u5c0f\u985e\u5225"}),le(re)]})}),Object(g.jsxs)(i.a,{className:"comm-table",sx:x,children:[Object(g.jsxs)("div",{className:"comm-header",children:[Object(g.jsxs)("div",{className:"comm-info-header",children:[Object(g.jsx)("span",{className:"comm-id",children:"ID"}),Object(g.jsx)("span",{className:"comm-name",children:"\u540d\u7a31"}),Object(g.jsx)("span",{className:"comm-price",children:"\u50f9\u683c"}),Object(g.jsx)("span",{className:"comm-class-name",children:"\u985e\u5225"})]}),Object(g.jsx)("div",{className:"comm-btn-header",children:"-"})]}),Object(g.jsx)("div",{className:"comm-list",children:Object(g.jsx)("div",{className:"comm-list-wrapper",children:G||K?de:(ie=15,Array.from({length:ie}).map((function(e,t){return Object(g.jsx)(i.a,{children:Object(g.jsx)(h.a,{variant:"rectangular",animation:"wave",width:"100%",height:"2.5em"},t)},t)})))})})]})]})})},O=function(e){return e.replaceAll(/[[\]-]/g,"")},v={classList:{"& .skeleton":{mb:"2rem"},"& .class-wrapper":{p:"0.5rem",pr:"1rem",mb:"2rem",borderRadius:1,border:function(e){return"1px solid ".concat(e.palette.text.secondary)},"& > .class-item":{borderTop:"none"},"& > .class-item > .class-item-name":{fontWeight:"bold"},"& > .class-item > .class-item-name .id-span":{color:"text.primary"}},"& .class-item":{borderTop:function(e){return"1px solid ".concat(e.palette.text.disabled)}},"& .id-span":{color:"text.secondary",fontSize:"0.75rem"},"& .class-item-children":{pl:"1.5rem"}},addClassCard:{position:"relative",backgroundColor:"background.default",display:"flex",justifyContent:"center",alignItems:"center",height:"6em",borderRadius:"0.5em",cursor:"grab",userSelect:"none","& span":{display:"inline-block",color:"background.default",fontSize:"1.25em",lineHeight:"0.8",fontWeight:"bold",paddingBottom:"1px",borderRadius:"5em",transform:"rotate(45deg)",textShadow:"2px 0px 3px #dedede"},"& .add-input":{width:"100%",borderTopLeftRadius:"0.3em",borderTopRightRadius:"0.3em",border:"none",textAlign:"center",backgroundColor:"#f6fbff",lineHeight:4.5,outlineColor:function(e){return e.palette.primary.main}},"& .add-cancel":{width:"50%",border:"none",backgroundColor:"#d6d6d6",borderBottomLeftRadius:"0.3em"},"& .add-submit":{width:"50%",border:"none",backgroundColor:"#d0ebff",borderBottomRightRadius:"0.3em"}}},y=function(){var e=Object(p.d)((function(e){return e.auth})),t=Object(b.b)(["/stock-category",e.authenticated,{limit:"zero"}]),c=t.data,a=t.error,r=c?c.list:[];a&&Object(j.d)(a,"#comm-mange");var i,s=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=JSON.parse(JSON.stringify(e)),c=Object.keys(t).length,a=function(e){t[e].forEach((function(c){var a=t[e-1];if(a){var n=a.find((function(e){return e.categoryId===c.parent}));n&&(n.children=n.children||[],n.children.push(c))}}))},n=c;n>=1;n--)a(n);return t[1]}(function(){var e={};return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(t){e[t.catRank]||(e[t.catRank]=[]),e[t.catRank].push(t)})),e}(r));return Object(g.jsx)(n.a.Fragment,{children:Object(g.jsxs)(o.a,{item:!0,xs:12,md:5,id:"comm-manage-class-list",sx:{padding:"0 1.5em",bgcolor:"background.paper",height:"100vh",color:"#3c3c3c",overflow:"auto","@media (min-width: 960px)":{height:"calc(100vh - 2.5rem)"},"& h5":{pt:"1.5rem",pb:"0.5rem",fontWeight:"bold"}},children:[Object(g.jsx)(u.a,{variant:"h5",children:"\u5546\u54c1\u985e\u5225\u76ee\u9304"}),Object(g.jsx)(o.a,{container:!0,sx:v.classList,children:c||a?function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t.map((function(t,a){var n=t.categoryId,r=t.categoryDescription,i=t.children,s=Object(g.jsxs)("div",{className:"class-item",children:[Object(g.jsxs)(u.a,{className:"class-item-name",variant:"subtitle1",noWrap:!0,children:[Object(g.jsx)("span",{className:"id-span",children:n}),"\xa0-\xa0",O(r)]}),i&&i.length>0&&Object(g.jsx)("div",{className:"class-item-children",children:e(i,c+1)})]},n);return 1===c?Object(g.jsx)(o.a,{className:"class-wrapper",item:!0,xs:12,children:s},n):s}))}(s):(i=3,Array.from({length:i}).map((function(e,t){return Object(g.jsx)(o.a,{className:"skeleton",item:!0,xs:12,children:Object(g.jsx)(h.a,{variant:"rectangular",animation:"wave",width:"100%",height:"20rem"})},t)})))})]})})},k=c(253),w=Object(r.c)(Object(k.a)());t.default=w((function(){return Object(g.jsx)(i.a,{id:"comm-mange",sx:{position:"relative",bgcolor:"background.paper","& .comm-manage-container":{maxWidth:"1600px",margin:"0 auto",boxShadow:"0px 0px 12px -6px #cccccc"}},children:Object(g.jsxs)(o.a,{container:!0,className:"comm-manage-container",children:[Object(g.jsx)(f,{}),Object(g.jsx)(y,{})]})})}))}}]);
//# sourceMappingURL=13.a4546d6a.chunk.js.map