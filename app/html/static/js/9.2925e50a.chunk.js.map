{"version":3,"sources":["components/Auth/withAuth.js","helpers/dateParser.js","components/ui/DialogMember.js","components/ui/PrintedOrder.js","components/ui/SalePointCard.js","components/ui/DialogSalePoint.js","components/ui/CommCheckCard.js","components/ui/DialogComm.js","components/PosOrderList/SearchField.js","components/PosOrderList/OrderItem.js","components/PosOrderList/OrderList.js","components/PosOrderList/Pagination.js","components/PosOrderList/DailyStatisticList.js","components/PosOrderList/PosOrderList.js"],"names":["authLevelMapping","shop","company","enterprise","withAuth","authLevel","ChildComponent","connect","state","auth","authenticated","level","props","history","useEffect","push","getDateString","dateString","changeType","originMs","Date","getTime","parseMsToDateString","ms","divider","originDate","monthNumber","getMonth","monthString","toString","padStart","dateNumber","getDate","getFullYear","formFieldStyle","display","padding","flex","color","paddingRight","flexWrap","py","pr","alignItems","position","fontSize","bottom","transform","fontWeight","flexGrow","lineHeight","letterSpacing","width","justifyContent","bgcolor","theme","palette","primary","main","borderRadius","borderBottomLeftRadius","borderBottomRightRadius","border","light","borderTopLeftRadius","borderTopRightRadius","members","fetchMembers","open","handleClose","onSelectClick","useState","memberFormInfo","setMemberFormInfo","validateErrors","setValidateError","list","handleInputChange","e","target","name","value","newValue","handleCreate","preventDefault","validateCreate","data","memberName","phone","memberRequest","post","headers","response","console","log","fireDialogToast","error","errors","Object","keys","length","id","onClose","fullWidth","maxWidth","PaperProps","sx","margin","variant","onClick","right","top","height","component","className","type","onChange","autoComplete","petName","disableElevation","borderRight","background","darkPaper","maxHeight","overflow","map","item","noWrap","memberCode","title","homePhone","minWidth","showOrderTime","timestamp","toLocaleString","renderPayment","payments","payment","SalePointPayment","paymentName","OrderItemDetail","index","stockMaster","description","stockDescription","user","price","quantity","subTotal","orderTableStyle","backgroundColor","textAlign","wordBreak","paper","paddingLeft","PrintedOrder","order","creditCardInfo","salesPayments","find","Boolean","creditCard","minHeight","container","px","default","xs","date","memberInfo","salesman","realName","cashRegister","salePoint","salePointName","invoicePage","no","salesDetails","p","borderTop","flexDirection","cardNo","replaceAll","slice","approvalCode","actualTotal","SalePointCard","selectedSalePoints","handleSelectSalePoint","Card","Grid","wrap","spacing","Checkbox","readOnly","checked","some","el","zeroMinWidth","Typography","onSalePointSelectClick","salePoints","setSalePoints","setSelectedSalePoints","fetchSalePoints","salePointRequest","get","newSelectedSalePoints","filter","Dialog","Box","IconButton","DialogContent","mt","md","pb","overflowY","gap","colNum","renderSalePointCards","Divider","orientation","flexItem","mx","direction","pl","mb","pt","Paper","elevation","square","renderSelectedSalePoints","Button","size","endIcon","CommCheckCard","comm","selectedComms","handleSelectComm","stockId","comms","fetchComms","onCommSelectClick","commFormInfo","setCommFormInfo","setSelectedComms","newSelectedComms","outlineColor","stockIds","renderCommCards","renderSelectedComms","changeDate","args","currentTarget","dataset","originStartValue","formState","values","originEndValue","startDateField","fields","endDateField","change","putInMember","memberNameField","memberIdField","putInComms","commIdField","commNameField","stockIdsArrayString","join","stockNamesArrayString","putInSalePoints","salePointIdField","salePointNameField","salePointIdsArrayString","salePointNamesArrayString","getMonthIntervalDate","indicator","today","monthResult","dateResult","monthInterval","btnFieldStyle","paddingBottom","marginLeft","marginTop","marginBottom","threeWordFieldStyle","handleSearchSubmit","currentSearchContent","isMemberOpen","setIsMemberOpen","isCommOpen","setIsCommOpen","isSalePointOpen","setIsSalePointOpen","users","setUsers","fetchUsers","userRequest","params","limit","onSubmit","renderUserOptions","userId","initialValues","render","putInCommsMutator","putInSalePointsMutator","putInMemberMutator","handleSubmit","submitError","submitting","form","pristine","borderBottom","marginRight","cursor","input","meta","max","endDate","min","startDate","ArrowLeft","viewBox","mutators","ArrowRight","disabled","DialogMember","member","DialogSalePoint","reset","OrderItem","offset","creditInfo","onPrintClick","isReturn","OrderList","filteredOrders","printContentRef","useRef","printOrder","setPrintOrder","printContent","current","printIframe","document","querySelector","innerHTML","window","print","orders","Fragment","boxShadow","mr","paddingTop","offsetTop","getElementById","scroll","left","behavior","ref","Pagination","totalPage","currentPage","handlePageChange","count","page","siblingCount","shape","showFirstButton","showLastButton","formatDateDivider","statisticItemStyle","DailyStatisticList","salePayments","aggregatePayment","paymentObj","forEach","dailyData","renderDashboard","result","key","Grow","TransitionGroup","renderDailyStatistic","divideData","dailyDataArray","renderDailyStatistics","dividedData","cashRegisterName","divideCashRegisterData","REQUIRED_STATE_NAMES","todayParams","now","todayQueryString","URLSearchParams","PosOrderList","currentSearchString","fetchSales","sort","fetchSalePayments","salesRequest","setState","componentDidMount","location","search","newSearchContent","queryObj","qs","parse","stateName","Number","componentDidUpdate","noPageQueryObj","omit","noPageSearchString","searchContentString","newCurrentPage","changePage","pageValue","filterParams","filteredParams","searchContent","queryString","this","Container","sales","React","Component","enhance","compose"],"mappings":"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","file":"static/js/9.2925e50a.chunk.js","sourcesContent":["import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\n\nconst authLevelMapping = {\n  shop: 5,\n  company: 10,\n  enterprise: 15\n}\n\nconst withAuth = authLevel => ChildComponent => {\n  const ComposedComponent = props => {\n    const { auth, level, history } = props\n\n    useEffect(() => {\n      if (!auth) {\n        history.push('/signin')\n        return\n      }\n      if (authLevel && (!level || authLevelMapping[authLevel] > authLevelMapping[level])) {\n        history.push('/')\n        return\n      }\n    }, [auth, level, history])\n\n    return (\n      <ChildComponent {...props} />\n    )\n  }\n\n  const mapStateToProps = state => {\n    return {\n      auth: state.auth.authenticated,\n      level: state.auth.level\n    }\n  }\n\n  return connect(mapStateToProps)(ComposedComponent)\n}\n\nexport default withAuth","// 取得前一天或後一天的 Date Input 字串\nexport const getDateString = (dateString, changeType) => {\n  const originMs = new Date(dateString).getTime()\n  const newMs = changeType === 'previous' ? (originMs - 86400000) : (originMs + 86400000)\n  return parseMsToDateString(newMs)\n}\n\nexport const parseMsToDateString = (ms, divider = '-') => {\n  const originDate = new Date(ms)\n  const monthNumber = originDate.getMonth() + 1\n  const monthString = monthNumber.toString().padStart(2, '0')\n  // const monthString = monthNumber < 10 ? ('0' + monthNumber.toString()) : monthNumber.toString()\n  const dateNumber = originDate.getDate()\n  const dateString = dateNumber.toString().padStart(2, '0')\n  // const dateString = dateNumber < 10 ? ('0' + dateNumber.toString()) : dateNumber.toString()\n  return (originDate.getFullYear().toString() + divider + monthString + divider + dateString)\n}","import React, { useState, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { fetchMembers } from '../../slices/membersSlice'\nimport { memberRequest } from '../../apis'\nimport CancelIcon from '@mui/icons-material/Cancel'\nimport { fireDialogToast } from '../../helpers/sweetAlert'\nimport { Button, Dialog, DialogContent, IconButton, Typography, Box } from '@mui/material'\n\nconst MemberDialog = ({\n  auth,\n  open,\n  members,\n  handleClose,\n  fetchMembers,\n  onSelectClick,\n}) => {\n  const [memberFormInfo, setMemberFormInfo] = useState({})\n  const [validateErrors, setValidateError] = useState({})\n\n  useEffect(() => {\n    if (!open) return\n    fetchMembers()\n  }, [open, fetchMembers])\n\n  const handleInputChange = e => {\n    const { name, value } = e.target\n    const newValue = { ...memberFormInfo, [name]: value }\n    setMemberFormInfo(newValue)\n  }\n\n  const handleSubmit = e => {\n    e.preventDefault()\n    fetchMembers(memberFormInfo)\n    setValidateError({})\n  }\n\n  const handleCreate = async e => {\n    e.preventDefault()\n    if (validateCreate()) return\n\n    try {\n      const data = {\n        memberName: memberFormInfo.name,\n        phone: memberFormInfo.phone,\n      }\n      const response = await memberRequest.post('', data, {\n        headers: { 'Authorization': 'Bearer ' + auth.authenticated },\n      })\n      console.log(response)\n\n      fetchMembers()\n      setMemberFormInfo({})\n      fireDialogToast('新增會員成功', 'success')\n    } catch (error) {\n      fireDialogToast(`錯誤: ${error?.response?.data?.error || '新增會員失敗'}`, 'error')\n    }\n  }\n\n  const validateCreate = () => {\n    const errors = {}\n    if (!memberFormInfo.phone) {\n      errors.phone = '電話為必填'\n    } else if (memberFormInfo.phone[0] !== '0') {\n      errors.phone = '電話格式錯誤'\n    }\n    if (!memberFormInfo.name) {\n      errors.name = '姓名為必填'\n    }\n    setValidateError(errors)\n    return (Object.keys(errors).length > 0)\n  }\n\n  const renderList = (list) => {\n    return list.map(item => {\n      return (\n        <div className=\"list-item\" key={item.id}>\n          <div className=\"id-sec\">\n            <Typography variant=\"body1\" noWrap={true}>\n              {item.memberCode || '-'}\n            </Typography>\n          </div>\n          <div className=\"name-sec\">\n            <Typography variant=\"body1\" noWrap={true} title={item.memberName}>\n              {item.memberName}\n            </Typography>\n          </div>\n          <div className=\"mobile-sec\">\n            <Typography variant=\"body1\" noWrap={true}>\n              {item.phone || '-'}\n            </Typography>\n          </div>\n          <div className=\"tel-sec\">\n            <Typography variant=\"body1\" noWrap={true}>\n              {item.homePhone || '-'}\n            </Typography>\n          </div>\n          <div className=\"select-sec\" onClick={() => onSelectClick(item)}>\n            <Button sx={{\n              minWidth: '3.5em',\n              height: '1.75em',\n              padding: '0',\n              color: 'background.paper',\n              bgcolor: (theme) => theme.palette.primary.main,\n              '&:hover': {\n                bgcolor: '#fabd5e',\n              },\n            }}>\n              選取\n            </Button>\n          </div>\n        </div>\n      )\n    }\n    )\n  }\n\n  return (\n    <Dialog\n      id=\"dialog-member\"\n      open={open}\n      onClose={handleClose}\n      aria-labelledby=\"dialog-member\"\n      fullWidth maxWidth=\"sm\"\n      PaperProps={{\n        sx: { maxWidth: 700 }\n      }}\n    >\n      <Box\n        sx={{\n          margin: 0,\n          padding: '0.375em 1.75em 0.25em',\n          bgcolor: 'background.default',\n          '& h6': {\n            color: 'secondary.main',\n            fontSize: '1.25rem',\n            fontWeight: 'bold',\n          }\n        }}\n      // sx={{\n      //   flex: '0 0 auto',\n      //   margin: 0,\n      //   padding: '0.375em 1.25em 0.25em',\n      //   lineHeight: 1.6,\n      //   letterSpacing: '0.0075rem',\n      //   '& h6': {\n      //     color: (theme) => theme.palette.primary.main,\n      //     fontSize: '1.375rem',\n      //     fontWeight: 'bold',\n      //     letterSpacing: '0.05em',\n      //   }\n      // }}\n      >\n        <Typography variant=\"h6\">會員選取</Typography>\n        {handleClose ? (\n          <IconButton aria-label=\"close\" onClick={handleClose} sx={{\n            position: 'absolute',\n            right: '0.5em',\n            top: '0.25em',\n            color: '#cb5c5c',\n            padding: 0,\n          }}>\n            <CancelIcon sx={{ width: '1.25em', height: '1.25em' }} />\n          </IconButton>\n        ) : null}\n      </Box>\n\n      <DialogContent sx={{ padding: '0.25em 1.75em 2em', bgcolor: 'background.paper' }}>\n        <Box component=\"form\" sx={formFieldStyle}>\n          <div className=\"input-field\">\n\n            <div className=\"input-wrapper\">\n              <label>姓名 : &nbsp;</label>\n              <input\n                className={`input-md ${validateErrors.name ? 'error' : ''}`}\n                type=\"text\"\n                name=\"name\"\n                value={memberFormInfo.name || ''}\n                onChange={handleInputChange}\n                autoComplete=\"off\"\n              />\n              {validateErrors.name && (<span>{validateErrors.name}</span>)}\n            </div>\n\n            <div className=\"input-wrapper\">\n              <label>電話 : &nbsp;</label>\n              <input\n                className={`input-md ${validateErrors.phone ? 'error' : ''}`}\n                type=\"text\"\n                name=\"phone\"\n                value={memberFormInfo.phone || ''}\n                onChange={handleInputChange}\n                autoComplete=\"off\"\n              />\n              {validateErrors.phone && (<span>{validateErrors.phone}</span>)}\n            </div>\n\n\n\n            <div className=\"input-wrapper\">\n              <label>寵物 : &nbsp;</label>\n              <input\n                className={`input-sm ${validateErrors.petName ? 'error' : ''}`}\n                type=\"text\"\n                name=\"petName\"\n                value={memberFormInfo.petName || ''}\n                onChange={handleInputChange}\n                autoComplete=\"off\"\n              />\n            </div>\n          </div>\n\n          <div className=\"submit-field\">\n            <Button\n              className=\"submitBtn\"\n              type=\"submit\"\n              onClick={handleSubmit}\n            >\n              搜尋\n            </Button>\n            <Button\n              className=\"newBtn\"\n              variant=\"contained\"\n              color=\"primary\"\n              disableElevation\n              onClick={handleCreate}\n            >\n              新增\n            </Button>\n          </div>\n        </Box>\n\n        {/* <Box sx={{\n          padding: '0.25em 0 0.5em',\n          '& button': {\n            fontSize: '1rem',\n            fontWeight: 'bold',\n            padding: '0 0.5em',\n            marginRight: '0.5em',\n            borderRadius: 0,\n            color: 'text.secondary',\n            borderColor: 'text.secondary',\n          },\n        }}>\n          <Button variant=\"outlined\">最近交易會員</Button>\n          <Button variant=\"outlined\">未結批價單會員</Button>\n        </Box> */}\n\n        <div>\n          <Box sx={{\n            display: 'flex',\n            bgcolor: 'secondary.main',\n            '& > div': {\n              display: 'flex',\n              justifyContent: 'center',\n              alignItems: 'center',\n              fontSize: '1rem',\n              borderRight: theme => `1px solid ${theme.palette.background.darkPaper}`,\n              color: 'background.paper',\n              height: '1.75em',\n            },\n            '& .id-sec': {\n              flex: '0 0 17.5%',\n            },\n            '& .name-sec': {\n              flex: '0 0 17.5%',\n            },\n            '& .mobile-sec': {\n              flex: '0 0 25%',\n            },\n            '& .tel-sec': {\n              flex: '0 0 25%',\n            },\n            '& .select-sec': {\n              flex: '0 0 15%',\n              borderRight: 'none',\n            },\n          }}>\n            <div className=\"id-sec\">代碼</div>\n            <div className=\"name-sec\">會員名稱</div>\n            <div className=\"mobile-sec\">手機號碼</div>\n            <div className=\"tel-sec\">住家號碼</div>\n            <div className=\"select-sec\"></div>\n          </Box>\n          <Box sx={{\n            maxHeight: '14rem',\n            overflow: 'overlay',\n            '& .list-item': {\n              display: 'flex',\n              '& > div': {\n                display: 'flex',\n                justifyContent: 'center',\n                alignItems: 'center',\n                fontSize: '1rem',\n                borderRight: theme => `1px solid ${theme.palette.background.darkPaper}`,\n                color: 'secondary.main',\n                height: '2em',\n                overflow: 'hidden',\n                padding: '0 0.5em',\n              },\n              '&:nth-of-type(2n + 1)': {\n                bgcolor: '#ececec',\n              },\n              '& .id-sec': {\n                flex: '0 0 17.5%',\n              },\n              '& .name-sec': {\n                flex: '0 0 17.5%',\n              },\n              '& .mobile-sec': {\n                flex: '0 0 25%',\n              },\n              '& .tel-sec': {\n                flex: '0 0 25%',\n              },\n              '& .select-sec': {\n                flex: '0 0 15%',\n                borderRight: 'none',\n                overflow: 'hidden',\n              },\n            },\n          }}>\n            {renderList(members)}\n          </Box>\n        </div>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst mapStateToProps = state => {\n  return {\n    auth: state.auth,\n    members: state.members,\n  }\n}\n\nconst formFieldStyle = {\n  display: 'flex',\n  padding: '0.5em 0 0.75em',\n  '& .input-field': {\n    flex: '0 0 85%',\n    color: 'secondary.main',\n    paddingRight: '0.5em',\n    display: 'flex',\n    flexWrap: 'wrap',\n  },\n  '& .input-wrapper': {\n    flex: '0 0 50%',\n    py: '0.375em',\n    pr: '0.5em',\n    display: 'flex',\n    alignItems: 'center',\n    flexWrap: 'wrap',\n    position: 'relative',\n    '& span': {\n      color: 'error.light',\n      fontSize: '0.75rem',\n      position: 'absolute',\n      bottom: '0',\n      transform: 'translateY(50%)',\n    },\n  },\n  '& label': {\n    fontWeight: 'bold',\n    fontSize: '1.125rem',\n  },\n  '& input': {\n    flexGrow: 1,\n    lineHeight: 1.25,\n    padding: '0 0.25em',\n    '&::placeholder': {\n      fontSize: '0.875rem',\n      letterSpacing: '0.04em',\n    },\n    '&.error::placeholder': {\n      color: 'error.light',\n    },\n  },\n  '& input.input-md': {\n    width: 'calc(100% - 4em)',\n  },\n  '& input.input-sm': {\n    width: 'calc(100% - 6.5em)',\n  },\n  '& .submit-field': {\n    flex: '0 0 15%',\n    display: 'flex',\n    flexWrap: 'wrap',\n    justifyContent: 'center',\n    '& .submitBtn': {\n      flex: '0 0 100%',\n      color: 'background.paper',\n      fontWeight: 'bold',\n      fontSize: '1.125rem',\n      display: 'inline-flex',\n      justifyContent: 'center',\n      bgcolor: (theme) => theme.palette.primary.main,\n      // margin: '0.75em 0',\n      borderRadius: '0.5em',\n      borderBottomLeftRadius: 0,\n      borderBottomRightRadius: 0,\n      border: 'none',\n      '&:hover': {\n        // bgcolor: '#fabd5e',\n        bgcolor: (theme) => theme.palette.primary.light,\n      },\n    },\n    '& .newBtn': {\n      flex: '0 0 100%',\n      lineHeight: 1.5,\n      color: 'background.paper',\n      fontWeight: 'bold',\n      borderRadius: '0.5em',\n      borderTopLeftRadius: 0,\n      borderTopRightRadius: 0,\n      bgcolor: '#6aabc3',\n      '&:hover': {\n        bgcolor: '#72b9d3',\n      },\n    },\n  },\n}\n\nexport default connect(\n  mapStateToProps,\n  { fetchMembers }\n)(MemberDialog)","import React from 'react'\nimport Box from '@mui/material/Box'\nimport Grid from '@mui/material/Grid'\nimport Paper from '@mui/material/Paper'\n\nexport const showOrderTime = timestamp => {\n  return new Date(timestamp).toLocaleString()\n}\n\nexport const renderPayment = payments => {\n  return payments.map(payment => {\n    return (\n      <div className=\"received-sec\" key={payment.id}>\n        <span>\n          {`${payment.SalePointPayment?.paymentName} : `}\n        </span>\n        <span className=\"main-value\">\n          {payment.value}\n        </span>\n      </div>\n    )\n  })\n}\n\nexport const OrderItemDetail = ({ list }) => {\n  return (\n    <Box className=\"order-table\">\n      <div className=\"table-header\">\n        <div className=\"serial-sec\">項次</div>\n        <div className=\"name-sec\">商品名稱</div>\n        <div className=\"clerk-sec\">服務員</div>\n        <div className=\"price-sec\">定價</div>\n        <div className=\"quantity-sec\">數量</div>\n        <div className=\"discount-sec\">折數</div>\n        <div className=\"total-sec\">合計</div>\n      </div>\n\n      <div className=\"table-list\">\n        {list.map((item, index) => {\n          return (\n            <div className=\"table-item\" key={item.id}>\n              <div className=\"serial-sec\">{index + 1}</div>\n              <div className=\"name-sec\">\n                {(item.stockMaster && item.stockMaster.description) || item.stockDescription}\n              </div>\n              <div className=\"clerk-sec\">{item.user}</div>\n              <div className=\"price-sec\">{item.price}</div>\n              <div className=\"quantity-sec\">{item.quantity}</div>\n              <div className=\"discount-sec\">\n                {((item.price * item.quantity) - item.subTotal) || ''}\n              </div>\n              <div className=\"total-sec\">{item.subTotal}</div>\n            </div>\n          )\n        }\n        )}\n      </div>\n    </Box>\n  )\n}\n\nexport const PrintedOrder = ({ order }) => {\n  const creditCardInfo = order?.salesPayments?.find(payment => Boolean(payment.creditCard))?.creditCard || {}\n\n  return (\n    <Paper\n      sx={{\n        width: '100%',\n        minHeight: '100%',\n        overflow: 'hidden',\n        '& .order-table': orderTableStyle,\n      }}\n    >\n      <Grid container alignItems=\"center\"\n        sx={{\n          px: '0.5rem',\n          py: '0.25rem',\n          bgcolor: theme => theme.palette.background.default,\n        }}\n      >\n\n        <Grid item xs>\n          <Grid container>\n            <Grid item xs container>\n              <Grid item xs=\"auto\">\n                日期 :&nbsp;\n              </Grid>\n              <Grid item xs className=\"bold\">\n                {showOrderTime(order.date)}\n              </Grid>\n            </Grid>\n\n            <Grid item xs container>\n              <Grid item xs=\"auto\">\n                會員 :&nbsp;\n              </Grid>\n              <Grid item xs className=\"bold\">\n                {order.memberInfo ? `${order.memberInfo.memberName} | ${order.memberInfo.phone}` : '---'}\n              </Grid>\n            </Grid>\n\n            <Grid item xs container>\n              <Grid item xs=\"auto\">\n                銷售員 :&nbsp;\n              </Grid>\n              <Grid item xs className=\"bold\">\n                {order.salesman && order.salesman.realName}\n              </Grid>\n            </Grid>\n          </Grid>\n\n          <Grid container>\n            <Grid item xs container>\n              <Grid item xs=\"auto\">\n                門市 :&nbsp;\n              </Grid>\n              <Grid item xs className=\"bold\">\n                {(order?.cashRegister?.salePoint?.salePointName || '-')}\n              </Grid>\n            </Grid>\n\n            <Grid item xs container>\n              <Grid item xs=\"auto\">\n                發票 :&nbsp;\n              </Grid>\n              <Grid item xs className=\"bold\">\n                {order.invoicePage ? order.invoicePage.no : '無發票資訊'}\n              </Grid>\n            </Grid>\n\n            <Grid item xs container>\n              <Grid item xs=\"auto\">\n                服務員 :&nbsp;\n              </Grid>\n              <Grid item xs className=\"bold\">\n                {order.user && order.user.realName}\n              </Grid>\n            </Grid>\n          </Grid>\n        </Grid>\n\n        <Grid item xs=\"auto\">\n          {order.no}\n        </Grid>\n\n      </Grid>\n\n      <OrderItemDetail list={order.salesDetails || []} />\n\n\n      <Grid container justifyContent=\"space-between\" alignItems=\"center\"\n        sx={{\n          p: '0.25rem',\n          borderTop: theme => `1px solid ${theme.palette.divider}`,\n        }}\n      >\n        <Grid item xs=\"auto\" container flexDirection=\"column\">\n\n          <Grid item xs container>\n            <Grid item xs=\"auto\">\n              信用卡號末四碼 :&nbsp;\n            </Grid>\n            <Grid item xs className=\"bold\">\n              {creditCardInfo.cardNo ? creditCardInfo.cardNo.replaceAll(' ', '').slice(-4) : '- - - -'}\n            </Grid>\n          </Grid>\n\n          <Grid item xs container>\n            <Grid item xs=\"auto\">\n              授權碼 :&nbsp;\n            </Grid>\n            <Grid item xs className=\"bold\">\n              {creditCardInfo.approvalCode || '- - - -'}\n            </Grid>\n          </Grid>\n\n        </Grid>\n\n        <Grid item xs=\"auto\">\n          <Box className=\"received-list\" display=\"inline-flex\" sx={{\n            '& > div': {\n              pr: '1rem',\n            },\n            '& .main-value': {\n              fontWeight: 'bold',\n            },\n          }}>\n            {renderPayment((order.salesPayments || []))}\n          </Box>\n\n          <Box className=\"total-sum\" display=\"inline-flex\" sx={{\n            fontSize: '1.25rem',\n          }}>\n            <span>總金額 :&nbsp;</span>\n            <span className=\"bold\">\n              {`${order ? order.actualTotal : '- - -'}元`}\n            </span>\n          </Box>\n        </Grid>\n      </Grid>\n\n    </Paper>\n  )\n}\n\nexport const orderTableStyle = {\n  '& .table-header': {\n    display: 'flex',\n    color: 'background.paper',\n    backgroundColor: '#a4a4a4',\n    '& > div': {\n      display: 'inline-flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      textAlign: 'center',\n      padding: '0.25em 0.5em',\n      wordBreak: 'break-all',\n      borderRight: theme => `1px solid ${theme.palette.background.paper}`,\n    },\n    '& > div:last-child': {\n      borderRight: 'none',\n    },\n    '& .name-sec': {\n      justifyContent: 'flex-start',\n      paddingLeft: '1.5em',\n      paddingRight: '1.5em',\n    },\n  },\n  '& .table-item': {\n    display: 'flex',\n    color: 'text.primary',\n    backgroundColor: 'background.darkPaper',\n    '&:nth-of-type(2n)': {\n      backgroundColor: 'background.paper',\n    },\n    '& > div': {\n      display: 'inline-flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      textAlign: 'center',\n      padding: '0.5em 0.5em',\n      wordBreak: 'break-all',\n      borderRight: theme => `1px solid ${theme.palette.background.paper}`,\n    },\n    '& > div:last-of-type': {\n      borderRight: 'none',\n    },\n    '& .name-sec': {\n      justifyContent: 'flex-start',\n      paddingLeft: '1.5em',\n      paddingRight: '1.5em',\n    },\n  },\n  '& .serial-sec': {\n    flex: '0 0 5%',\n    minWidth: '2rem',\n  },\n  '& .name-sec': {\n    flex: '1 0 auto',\n  },\n  '& .clerk-sec': {\n    flex: '0 0 10%'\n  },\n  '& .price-sec': {\n    flex: '0 0 10%'\n  },\n  '& .quantity-sec': {\n    flex: '0 0 10%'\n  },\n  '& .discount-sec': {\n    flex: '0 0 10%'\n  },\n  '& .total-sec': {\n    flex: '0 0 10%'\n  },\n}\n\n\nexport default PrintedOrder","import React from 'react'\nimport { Grid, Typography, Card, Checkbox } from '@mui/material'\n\nfunction SalePointCard({\n  salePoint,\n  selectedSalePoints,\n  handleSelectSalePoint,\n}) {\n  return (\n    <Card onClick={() => handleSelectSalePoint(salePoint)}>\n      <Grid container wrap=\"nowrap\" spacing={2}>\n        <Grid item container xs=\"auto\" alignItems=\"center\">\n          <Checkbox\n            readOnly\n            checked={selectedSalePoints.some(el => el.id === salePoint.id)}\n          />\n        </Grid>\n        <Grid item container xs alignItems=\"center\" zeroMinWidth>\n          <Typography className='salePoint-name' variant=\"subtitle1\" noWrap title={salePoint.salePointName}>\n            {salePoint.salePointName}\n          </Typography>\n\n          {/* <Typography className='salePoint-id' variant=\"body2\" noWrap>\n            {salePoint.stockId}\n          </Typography> */}\n        </Grid>\n      </Grid>\n    </Card>\n  )\n}\n\nexport default SalePointCard","import React, { useState, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport CancelIcon from '@mui/icons-material/Cancel'\nimport SendIcon from '@mui/icons-material/Send'\nimport { Box, Button, Paper, Grid, Divider, Dialog, DialogContent, IconButton, Typography } from '@mui/material'\nimport SalePointCard from './SalePointCard'\nimport { salePointRequest } from '../../apis'\n\nfunction DialogSalePoint({\n  auth,\n  open,\n  handleClose,\n  onSalePointSelectClick,\n}) {\n  const [salePoints, setSalePoints] = useState([])\n  const [selectedSalePoints, setSelectedSalePoints] = useState([])\n\n  useEffect(() => {\n    const fetchSalePoints = async () => {\n      const { data } = await salePointRequest.get('', {\n        headers: { 'Authorization': 'Bearer ' + auth.authenticated },\n      })\n      setSalePoints(data)\n    }\n    fetchSalePoints()\n\n    return () => {\n      setSalePoints([])\n    }\n  }, [auth.authenticated])\n\n\n  const handleSelectSalePoint = salePoint => {\n    const newSelectedSalePoints = selectedSalePoints.some(el => el.id === salePoint.id)\n      ? selectedSalePoints.filter(el => el.id !== salePoint.id)\n      : [...selectedSalePoints, salePoint]\n    setSelectedSalePoints(newSelectedSalePoints)\n  }\n\n  const handleSubmit = () => {\n    onSalePointSelectClick(selectedSalePoints)\n  }\n\n  const onClose = () => {\n    setSelectedSalePoints([])\n    handleClose()\n  }\n\n  const renderSalePointCards = (salePoints, colNum) => {\n    return salePoints.map(salePoint => (\n      <div className=\"card-grid\" key={salePoint.id}>\n        <SalePointCard\n          salePoint={salePoint}\n          selectedSalePoints={selectedSalePoints}\n          handleSelectSalePoint={handleSelectSalePoint}\n        />\n      </div>\n    ))\n  }\n\n  const renderSelectedSalePoints = salePoints => {\n    return salePoints.map(salePoint => (\n      <Grid item xs={12} key={salePoint.id}>\n        <Paper elevation={0} square>\n          <Typography variant=\"subtitle2\">\n            {salePoint.salePointName}\n          </Typography>\n        </Paper>\n      </Grid>\n    ))\n  }\n\n  return (\n    <Dialog\n      id=\"dialog-member\"\n      open={open}\n      onClose={onClose}\n      fullWidth\n      maxWidth=\"sm\"\n      aria-labelledby=\"dialog-member\"\n      PaperProps={{\n        sx: { maxWidth: 800 }\n      }}\n    >\n      <Box\n        sx={{\n          margin: 0,\n          padding: '0.375em 1.75em 0.25em',\n          bgcolor: 'background.default',\n          '& h6': {\n            color: 'secondary.main',\n            fontSize: '1.25rem',\n            fontWeight: 'bold',\n          }\n        }}\n      >\n        <Typography variant=\"h6\">門市選取</Typography>\n\n        {handleClose ? (\n          <IconButton aria-label=\"close\" onClick={handleClose} sx={{\n            position: 'absolute',\n            right: '0.5em',\n            top: '0.25em',\n            color: 'error.main',\n            padding: 0,\n          }}>\n            <CancelIcon sx={{ width: '1.25em', height: '1.25em' }} />\n          </IconButton>\n        ) : null}\n      </Box>\n\n      <DialogContent sx={{ padding: '0.25em 1.75em 2em', bgcolor: 'background.paper' }}>\n\n        <Grid\n          container\n          alignItems=\"flex-start\"\n          // wrap=\"nowrap\"\n          sx={{\n            mt: '1.5rem',\n            p: '0.5rem 0.25rem',\n            bgcolor: '#eeeeee',\n            borderRadius: 2,\n            '& hr': {\n              height: 'unset',\n            },\n          }}>\n          <Grid\n            xs={12}\n            md\n            item\n          >\n            <Typography variant=\"subtitle1\" sx={{\n              p: '0.25rem 0.5rem',\n              fontWeight: 'bold',\n            }}>\n              門市列表\n            </Typography>\n            <Grid\n              container\n              sx={{\n                px: '0.5rem',\n                pb: '2rem',\n                maxHeight: 400,\n                overflowY: 'auto',\n                display: 'flex',\n                gap: '1rem',\n                '& .MuiCard-root': {\n                  p: '1.5rem 1rem',\n                },\n                '& .salePoint-name': {\n                  flex: '0 0 100%',\n                },\n                '& .card-grid': {\n                  flex: '0 0 calc(50% - 0.5rem)',\n                  maxWidth: 'calc(50% - 0.5rem)',\n                  '& .MuiPaper-root': {\n                    bgcolor: 'background.default',\n                  },\n                },\n              }}\n            >\n              {renderSalePointCards(salePoints, 6)}\n            </Grid>\n          </Grid>\n\n          <Divider orientation=\"vertical\" variant=\"middle\" flexItem sx={{ mx: '1rem' }} />\n\n          <Grid\n            xs={12}\n            md={3}\n            item\n          >\n            <Typography variant=\"subtitle1\" sx={{\n              p: '0.25rem 0.5rem',\n              fontWeight: 'bold',\n            }}>\n              已選取\n            </Typography>\n            <Grid\n              container\n              // spacing={1}\n              direction=\"column\"\n              wrap=\"nowrap\"\n              sx={{\n                pl: '0.25rem',\n                pr: '0.5rem',\n                maxHeight: 400,\n                overflowY: 'auto',\n                '& .MuiPaper-root': {\n                  p: '1.5rem 2rem',\n                  mb: '1rem',\n                },\n                '& .salePoint-id': {\n                  pt: '0.25rem',\n                  color: 'text.secondary',\n                },\n              }}\n            >\n              {renderSelectedSalePoints(selectedSalePoints)}\n            </Grid>\n          </Grid>\n\n        </Grid>\n\n        <Box component=\"form\" sx={formFieldStyle}>\n\n          <div className=\"submit-field\">\n            <Button\n              size=\"large\"\n              className=\"submitBtn primaryBtn\"\n              onClick={handleSubmit}\n              endIcon={<SendIcon />}\n            >\n              確認\n            </Button>\n          </div>\n        </Box>\n\n\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst formFieldStyle = {\n  display: 'flex',\n  p: '1.5em 0 0rem',\n  alignItems: 'center',\n  justifyContent: 'flex-end',\n  '& .input-field': {\n    flex: '0 0 30%',\n    color: 'secondary.main',\n    paddingRight: '0.5em',\n  },\n  '& .input-wrapper': {\n    padding: '0.375em 0',\n  },\n  '& label': {\n    fontWeight: 'bold',\n    fontSize: '1.125rem',\n  },\n  '& input': {\n    width: 'calc(100% - 4em)',\n    lineHeight: 1.25,\n    padding: '0 0.25em',\n    '&::placeholder': {\n      fontSize: '0.875rem',\n      letterSpacing: '0.04em',\n    },\n    '&.error::placeholder': {\n      color: 'error.light',\n    },\n  },\n  '& .submit-field': {\n    flex: '0 0 18%',\n    display: 'flex',\n    flexWrap: 'wrap',\n    justifyContent: 'center',\n    '& .submitBtn': {\n      flex: '0 0 100%',\n      fontWeight: 'bold',\n      fontSize: '1.125rem',\n      display: 'inline-flex',\n      justifyContent: 'center',\n      // borderRadius: '0.5em',\n      // border: 'none',\n    },\n    '& .primaryBtn': {\n      color: 'background.paper',\n      bgcolor: (theme) => theme.palette.primary.main,\n      '&:hover': {\n        bgcolor: (theme) => theme.palette.primary.light,\n      },\n    },\n  },\n}\n\nconst mapStateToProps = (state) => ({\n  auth: state.auth,\n})\n\nexport default connect(mapStateToProps)(DialogSalePoint)","import React from 'react'\nimport { Grid, Typography, Card, Checkbox } from '@mui/material'\n\nfunction CommCheckCard({\n  comm,\n  selectedComms,\n  handleSelectComm,\n}) {\n  return (\n    <Card onClick={() => handleSelectComm(comm)}>\n      <Grid container wrap=\"nowrap\" spacing={2}>\n        <Grid item container xs=\"auto\" alignItems=\"center\">\n          <Checkbox\n            readOnly\n            checked={selectedComms.some(el => el.stockId === comm.stockId)}\n          />\n        </Grid>\n        <Grid item container xs alignItems=\"center\" zeroMinWidth>\n          <Typography className='comm-name' variant=\"subtitle1\" noWrap title={comm.description}>\n            {comm.description}\n          </Typography>\n\n          <Typography className='comm-id' variant=\"body2\" noWrap>\n            {comm.stockId}\n          </Typography>\n        </Grid>\n      </Grid>\n    </Card>\n  )\n}\n\nexport default CommCheckCard\n","import React, { useState, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { fetchComms } from '../../slices/commsSlice'\nimport CancelIcon from '@mui/icons-material/Cancel'\nimport SendIcon from '@mui/icons-material/Send'\nimport { Box, Button, Paper, Grid, Divider, Dialog, DialogContent, IconButton, Typography } from '@mui/material'\nimport CommCheckCard from './CommCheckCard'\n\nfunction DialogComm({\n  comms,\n  open,\n  handleClose,\n  fetchComms,\n  onCommSelectClick,\n}) {\n  const [commFormInfo, setCommFormInfo] = useState({})\n  const [selectedComms, setSelectedComms] = useState([])\n\n  useEffect(() => {\n    if (!open) return\n    fetchComms()\n  }, [open, fetchComms])\n\n\n  const handleInputChange = e => {\n    const { name, value } = e.target\n    const newValue = { ...commFormInfo, [name]: value }\n    setCommFormInfo(newValue)\n  }\n\n  const handleSearch = e => {\n    e.preventDefault()\n    fetchComms({\n      ...(commFormInfo.name && { name: commFormInfo.name }),\n      ...(commFormInfo.stockIds && { stockIds: commFormInfo.stockIds }),\n    })\n  }\n\n  const handleSelectComm = comm => {\n    const newSelectedComms = selectedComms.some(el => el.stockId === comm.stockId) ? selectedComms.filter(el => el.stockId !== comm.stockId) : [...selectedComms, comm]\n    setSelectedComms(newSelectedComms)\n  }\n\n  const handleSubmit = () => {\n    onCommSelectClick(selectedComms)\n  }\n\n  const renderCommCards = (comms, colNum) => {\n    return comms.map(comm => (\n      <div className=\"card-grid\" key={comm.stockId}>\n        <CommCheckCard\n          comm={comm}\n          selectedComms={selectedComms}\n          handleSelectComm={handleSelectComm}\n        />\n      </div>\n    ))\n  }\n\n  const renderSelectedComms = comms => {\n    return comms.map(comm => (\n      <Grid item xs={12} key={comm.stockId}>\n        <Paper elevation={0} square>\n          <Typography variant=\"subtitle2\">\n            {comm.description}\n          </Typography>\n          <Typography className=\"comm-id\" variant=\"subtitle2\">\n            {comm.stockId}\n          </Typography>\n        </Paper>\n      </Grid>\n    ))\n  }\n\n  return (\n    <Dialog\n      id=\"dialog-member\"\n      fullWidth\n      maxWidth=\"sm\"\n      open={open}\n      onClose={handleClose}\n      aria-labelledby=\"dialog-member\"\n      sx={{\n        '& input, select': { outlineColor: (theme) => theme.palette.primary.main },\n      }}\n      PaperProps={{\n        sx: { maxWidth: 900 }\n      }}\n    >\n      <Box\n        sx={{\n          margin: 0,\n          padding: '0.375em 1.75em 0.25em',\n          bgcolor: 'background.default',\n          '& h6': {\n            color: 'secondary.main',\n            fontSize: '1.25rem',\n            fontWeight: 'bold',\n          }\n        }}\n      >\n        <Typography variant=\"h6\">商品選取</Typography>\n\n        {handleClose ? (\n          <IconButton aria-label=\"close\" onClick={handleClose} sx={{\n            position: 'absolute',\n            right: '0.5em',\n            top: '0.25em',\n            color: 'error.main',\n            padding: 0,\n          }}>\n            <CancelIcon sx={{ width: '1.25em', height: '1.25em' }} />\n          </IconButton>\n        ) : null}\n      </Box>\n\n      <DialogContent sx={{ padding: '0.25em 1.75em 2em', backgroundColor: 'background.paper' }}>\n        <Box component=\"form\" sx={formFieldStyle}>\n\n          <div className=\"input-field\">\n            <div className=\"input-wrapper\">\n              <label>名稱 : &nbsp;</label>\n              <input\n                className={`input-md`}\n                type=\"text\"\n                name=\"name\"\n                value={commFormInfo.name || ''}\n                onChange={handleInputChange}\n                autoComplete=\"off\"\n              />\n            </div>\n          </div>\n\n          <div className=\"input-field\">\n            <div className=\"input-wrapper\">\n              <label>編號 : &nbsp;</label>\n              <input\n                className={`input-md`}\n                type=\"text\"\n                name=\"stockIds\"\n                value={commFormInfo.stockIds || ''}\n                onChange={handleInputChange}\n              />\n            </div>\n          </div>\n\n          <div className=\"submit-field\">\n            <Button\n              disableElevation\n              variant=\"outlined\"\n              size=\"large\"\n              className=\"submitBtn\"\n              type=\"submit\"\n              color=\"primary\"\n              onClick={handleSearch}\n            >\n              搜尋\n            </Button>\n          </div>\n\n          <div className=\"submit-field\">\n            <Button\n              size=\"large\"\n              className=\"submitBtn primaryBtn\"\n              onClick={handleSubmit}\n              endIcon={<SendIcon />}\n            >\n              確認\n            </Button>\n          </div>\n        </Box>\n\n        <Grid\n          container\n          alignItems=\"flex-start\"\n          // wrap=\"nowrap\"\n          sx={{\n            p: '0.5rem 0.25rem',\n            bgcolor: '#eeeeee',\n            borderRadius: 2,\n            '& hr': {\n              height: 'unset',\n            },\n          }}>\n          <Grid xs={12} md item >\n            <Typography variant=\"subtitle1\" sx={{\n              p: '0.25rem 0.5rem',\n              fontWeight: 'bold',\n            }}>\n              商品列表\n            </Typography>\n            <Grid\n              container\n              sx={{\n                px: '0.5rem',\n                pb: '2rem',\n                maxHeight: 400,\n                overflowY: 'auto',\n                display: 'flex',\n                gap: '1rem',\n                '& .MuiCard-root': {\n                  p: '1.5rem 1rem',\n                },\n                '& .comm-name': {\n                  flex: '0 0 100%',\n                },\n                '& .card-grid': {\n                  flex: '0 0 calc(50% - 0.5rem)',\n                  maxWidth: 'calc(50% - 0.5rem)',\n                  '& .MuiPaper-root': {\n                    bgcolor: 'background.default',\n                  },\n                },\n              }}\n            >\n              {renderCommCards(comms, 6)}\n            </Grid>\n          </Grid>\n\n          <Divider orientation=\"vertical\" variant=\"middle\" flexItem sx={{ mx: '1rem' }} />\n\n          <Grid\n            xs={12}\n            md={3}\n            item\n          >\n            <Typography variant=\"subtitle1\" sx={{\n              p: '0.25rem 0.5rem',\n              fontWeight: 'bold',\n            }}>\n              已選取\n            </Typography>\n            <Grid\n              container\n              // spacing={1}\n              direction=\"column\"\n              wrap=\"nowrap\"\n              sx={{\n                pl: '0.25rem',\n                pr: '0.5rem',\n                maxHeight: 400,\n                overflowY: 'auto',\n                '& .MuiPaper-root': {\n                  p: '1.5rem 2rem',\n                  mb: '1rem',\n                },\n                '& .comm-id': {\n                  pt: '0.25rem',\n                  color: 'text.secondary',\n                },\n              }}\n            >\n              {renderSelectedComms(selectedComms)}\n            </Grid>\n          </Grid>\n\n        </Grid>\n\n\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst formFieldStyle = {\n  display: 'flex',\n  p: '1.5em 0 1.5rem',\n  alignItems: 'center',\n  justifyContent: 'space-between',\n  '& .input-field': {\n    flex: '0 0 30%',\n    color: 'secondary.main',\n    paddingRight: '0.5em',\n  },\n  '& .input-wrapper': {\n    padding: '0.375em 0',\n  },\n  '& label': {\n    fontWeight: 'bold',\n    fontSize: '1.125rem',\n  },\n  '& input': {\n    width: 'calc(100% - 4em)',\n    lineHeight: 1.25,\n    padding: '0 0.25em',\n    '&::placeholder': {\n      fontSize: '0.875rem',\n      letterSpacing: '0.04em',\n    },\n    '&.error::placeholder': {\n      color: 'error.light',\n    },\n  },\n  '& .submit-field': {\n    flex: '0 0 18%',\n    display: 'flex',\n    flexWrap: 'wrap',\n    justifyContent: 'center',\n    '& .submitBtn': {\n      flex: '0 0 100%',\n      fontWeight: 'bold',\n      fontSize: '1.125rem',\n      display: 'inline-flex',\n      justifyContent: 'center',\n      // borderRadius: '0.5em',\n      // border: 'none',\n    },\n    '& .primaryBtn': {\n      color: 'background.paper',\n      backgroundColor: (theme) => theme.palette.primary.main,\n      '&:hover': {\n        backgroundColor: (theme) => theme.palette.primary.light,\n      },\n    },\n  },\n}\n\nconst mapStateToProps = state => {\n  return {\n    comms: state.comms,\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  { fetchComms }\n)(DialogComm)\n","import React, { useState, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { Form, Field } from 'react-final-form'\n// import { FORM_ERROR } from 'final-form'\nimport { Box, Grid, Button } from '@mui/material'\nimport { ArrowLeft, ArrowRight } from '@mui/icons-material'\nimport { getDateString, parseMsToDateString } from '../../helpers/dateParser'\nimport { userRequest } from '../../apis'\nimport DialogMember from '../ui/DialogMember'\nimport DialogComm from '../ui/DialogComm'\nimport DialogSalePoint from '../ui/DialogSalePoint'\n\n\n// Form Mutators\nconst changeDate = (args, state) => {\n  const changeType = args[0].currentTarget.dataset.changeType\n\n  const originStartValue = state.formState.values['startDate']\n  const originEndValue = state.formState.values['endDate']\n  const startDateField = state.fields['startDate']\n  const endDateField = state.fields['endDate']\n  originStartValue && startDateField.change(getDateString(originStartValue, changeType))\n  originEndValue && endDateField.change(getDateString(originEndValue, changeType))\n}\n\nconst putInMember = (args, state) => {\n  const memberNameField = state.fields['memberName']\n  const memberIdField = state.fields['memberId']\n  memberNameField.change(args[0].memberName)\n  memberIdField.change(args[0].id)\n}\n\nconst putInComms = (args, state) => {\n  const commIdField = state.fields['stockIds']\n  const commNameField = state.fields['stockNames']\n  const stockIdsArrayString = args[0].map(el => el.stockId).join(',')\n  const stockNamesArrayString = args[0].map(el => el.description).join(',')\n  commIdField.change(stockIdsArrayString)\n  commNameField.change(stockNamesArrayString)\n}\n\nconst putInSalePoints = (args, state) => {\n  const salePointIdField = state.fields['salePointIds']\n  const salePointNameField = state.fields['salePointNames']\n  const salePointIdsArrayString = args[0].map(el => el.id).join(',')\n  const salePointNamesArrayString = args[0].map(el => el.salePointName).join(',')\n  salePointIdField.change(salePointIdsArrayString)\n  salePointNameField.change(salePointNamesArrayString)\n}\n\n// 計算一個月前或一個月後的日期\nconst getMonthIntervalDate = (date, indicator) => {\n  const today = new Date(date)\n  const monthResult = indicator ? (today.getMonth() + 1) : (today.getMonth() - 1)\n  const dateResult = indicator ? (today.getDate() + 1) : (today.getDate() - 1)\n  const monthInterval = new Date(today.getFullYear(), monthResult, dateResult)\n  return parseMsToDateString(monthInterval)\n}\n\n// Component Start\nconst SearchField = ({\n  auth,\n  handleSearchSubmit,\n  currentSearchContent,\n}) => {\n  const [isMemberOpen, setIsMemberOpen] = useState(false)\n  const [isCommOpen, setIsCommOpen] = useState(false)\n  const [isSalePointOpen, setIsSalePointOpen] = useState(false)\n  const [users, setUsers] = useState([])\n  // const [currentMemberId, setCurrentMemberId] = useState('')\n  // const INITIAL_FORM_DATA = {}\n\n  useEffect(() => {\n    const fetchUsers = async () => {\n      const { data } = await userRequest.get('', {\n        headers: { 'Authorization': 'Bearer ' + auth.authenticated },\n        params: { limit: 'zero' },\n      })\n      setUsers(data.list)\n    }\n\n    fetchUsers()\n  }, [auth.authenticated])\n\n  const onSubmit = async (values) => {\n    // console.log('When submit', values)\n    handleSearchSubmit(values)\n  }\n\n  const onSelectClick = putInMemberMutator => member => {\n    putInMemberMutator(member)\n    setIsMemberOpen(false)\n  }\n\n  const onCommSelectClick = putInCommsMutator => comm => {\n    putInCommsMutator(comm)\n    setIsCommOpen(false)\n  }\n\n  const onSalePointSelectClick = putInSalePointsMutator => salePoint => {\n    putInSalePointsMutator(salePoint)\n    setIsSalePointOpen(false)\n  }\n\n  const renderUserOptions = () => {\n    return users.map(user => (\n      <option key={user.userId} value={user.userId}>{user.realName}</option>\n    ))\n  }\n\n  const renderForm = ({\n    handleSubmit,\n    submitError,\n    submitting,\n    pristine,\n    form,\n    values,\n  }) => (\n    <Box component=\"form\" id=\"search-field\" onSubmit={handleSubmit}\n      sx={{\n        fontWeight: 'bold',\n        borderBottom: '2px solid #c4c4c4',\n        '& label': {\n          fontSize: '1.125rem',\n        },\n        '& input': {\n          display: 'inline-block',\n          fontSize: '1rem',\n          lineHeight: 1.5,\n          border: '1px solid #c4c4c4',\n          borderRadius: '0.25em',\n          paddingLeft: '0.25em',\n          paddingRight: '0.25em',\n          minWidth: 0,\n        },\n        '& select': {\n          height: '1.78rem',\n          border: '1px solid #c4c4c4',\n          borderRadius: '0.25em',\n          display: 'inline-block',\n          minWidth: 0,\n        },\n        '& input.error::placeholder': {\n          color: 'error.main',\n        },\n      }}\n    >\n      <Grid container justifyContent=\"space-between\" sx={{ maxWidth: 1100, margin: '0 auto' }}>\n        <Box\n          sx={{\n            flex: '0 0 100%',\n            maxWidth: '100%',\n            display: 'flex',\n            flexDirection: 'column',\n            justifyContent: 'space-between',\n            '@media (min-width: 960px)': {\n              flex: '0 0 41.25%',\n              maxWidth: '41.25%',\n            },\n          }}\n        >\n          <Box\n            sx={{\n              display: 'flex',\n              position: 'relative',\n              paddingBottom: '1rem',\n              '& label': {\n                flex: '0 0 3.5rem',\n                maxWidth: '3.5rem',\n              },\n              '& .date-input-wrapper': {\n                flexGrow: 1,\n                minWidth: 0,\n                '&:first-of-type': {\n                  marginRight: '0.5rem',\n                },\n                '& input': {\n                  width: '100%',\n                },\n              },\n              '& .date-control': {\n                flex: '0 0 3rem',\n                minWidth: '3rem',\n                color: '#767676',\n                cursor: 'pointer',\n              },\n            }}\n          >\n            <label className=\"label\">日期 :</label>\n            <Field name=\"startDate\">\n              {({ input, meta }) => (\n                <div className=\"date-input-wrapper\">\n                  <input className=\"date-input\" {...input} type=\"date\" max={values.endDate} min={values.endDate && getMonthIntervalDate(values.endDate, false)} />\n                </div>\n              )}\n            </Field>\n\n            <Field name=\"endDate\">\n              {({ input, meta }) => {\n                return (\n                  <div className=\"date-input-wrapper\">\n                    <input className=\"date-input\" {...input} type=\"date\" min={values.startDate} max={values.startDate && getMonthIntervalDate(values.startDate, true)} />\n                  </div>\n\n                )\n              }}\n            </Field>\n\n            <div className=\"date-control\">\n              <ArrowLeft viewBox=\"1 2.5 20 20\" data-change-type=\"previous\" onClick={form.mutators.changeDate} />\n              <ArrowRight viewBox=\"4 2.5 20 20\" data-change-type=\"next\" onClick={form.mutators.changeDate} />\n            </div>\n          </Box>\n\n          <Field name=\"memberName\">\n            {({ input, meta }) => (\n              <Box\n                sx={btnFieldStyle}\n              >\n                <label>會員 :</label>\n                <input\n                  {...input}\n                  type=\"text\"\n                  autoComplete=\"off\"\n                  disabled\n                // disabled={values.memberId ? true : false}\n                />\n                <Button\n                  disableElevation\n                  variant=\"contained\"\n                  data-change-type=\"previous\"\n                  onClick={() => setIsMemberOpen(true)}>\n                  查詢\n                </Button>\n                <Button\n                  variant=\"contained\"\n                  disableElevation\n                  data-change-type=\"next\"\n                  onClick={() => form.mutators.putInMember({})}\n                >\n                  清除\n                </Button>\n              </Box>\n            )}\n          </Field>\n\n          <Field name=\"memberId\">\n            {({ input, meta }) => (\n              <input {...input} type=\"hidden\" />\n            )}\n          </Field>\n\n          <DialogMember\n            open={isMemberOpen}\n            onSelectClick={onSelectClick(form.mutators.putInMember)}\n            handleClose={() => setIsMemberOpen(false)}\n          />\n        </Box>\n\n        <Box sx={{\n          flex: '0 0 100%',\n          maxWidth: '100%',\n          display: 'flex',\n          flexDirection: 'column',\n          justifyContent: 'space-between',\n          '@media (min-width: 600px)': {\n            flex: '0 0 49%',\n            maxWidth: '49%',\n          },\n          '@media (min-width: 960px)': {\n            flex: '0 0 33.75%',\n            maxWidth: '33.75%',\n          },\n        }}>\n          <Field name=\"salePointNames\">\n            {({ input, meta }) => (\n              <Box sx={btnFieldStyle}>\n                <label>門市 :</label>\n                <input\n                  {...input}\n                  type=\"text\"\n                  autoComplete=\"off\"\n                  disabled\n                // disabled={values.memberId ? true : false}\n                />\n                <Button\n                  disableElevation\n                  variant=\"contained\"\n                  onClick={() => setIsSalePointOpen(true)}>\n                  查詢\n                </Button>\n                <Button\n                  variant=\"contained\"\n                  disableElevation\n                  onClick={() => form.mutators.putInSalePoints([])}\n                >\n                  清除\n                </Button>\n              </Box>\n            )}\n          </Field>\n\n          <Field name=\"salePointIds\">\n            {({ input, meta }) => (\n              <input {...input} type=\"hidden\" />\n            )}\n          </Field>\n\n          <DialogSalePoint\n            open={isSalePointOpen}\n            onSalePointSelectClick={onSalePointSelectClick(form.mutators.putInSalePoints)}\n            handleClose={() => setIsSalePointOpen(false)}\n          />\n\n          <Field name=\"stockNames\">\n            {({ input, meta }) => (\n              <Box sx={btnFieldStyle}>\n                <label>商品 :</label>\n                <input\n                  {...input}\n                  type=\"text\"\n                  autoComplete=\"off\"\n                  disabled\n                // disabled={values.memberId ? true : false}\n                />\n                <Button\n                  disableElevation\n                  variant=\"contained\"\n                  data-change-type=\"previous\"\n                  onClick={() => setIsCommOpen(true)}>\n                  查詢\n                </Button>\n                <Button\n                  variant=\"contained\"\n                  disableElevation\n                  data-change-type=\"next\"\n                  onClick={() => form.mutators.putInComms([])}\n                >\n                  清除\n                </Button>\n              </Box>\n            )}\n          </Field>\n\n          <Field name=\"stockIds\">\n            {({ input, meta }) => (\n              <input {...input} type=\"hidden\" />\n            )}\n          </Field>\n\n          <DialogComm\n            open={isCommOpen}\n            onCommSelectClick={onCommSelectClick(form.mutators.putInComms)}\n            handleClose={() => setIsCommOpen(false)}\n          />\n        </Box>\n\n        <Box sx={{\n          flex: '0 0 100%',\n          maxWidth: '100%',\n          display: 'flex',\n          flexDirection: 'column',\n          justifyContent: 'space-between',\n          '@media (min-width: 600px)': {\n            flex: '0 0 49%',\n            maxWidth: '49%',\n          },\n          '@media (min-width: 960px)': {\n            flex: '0 0 20%',\n            maxWidth: '20%',\n          },\n        }}>\n          <Field name=\"salesman\">\n            {({ input, meta }) => (\n              <Box sx={threeWordFieldStyle}>\n                <label>銷售員 :</label>\n                <select {...input} name=\"\">\n                  <option />\n                  {renderUserOptions()}\n                </select>\n              </Box>\n            )}\n          </Field>\n          <Field name=\"userId\">\n            {({ input, meta }) => (\n              <Box sx={threeWordFieldStyle}>\n                <label>服務員 :</label>\n                <select {...input} name=\"\">\n                  <option />\n                  {renderUserOptions()}\n                </select>\n              </Box>\n            )}\n          </Field>\n        </Box>\n\n        <Grid container item xs={12} justifyContent=\"center\" sx={{ padding: '1rem 0 1.5rem' }}>\n          {submitError && <span className=\"error\">{submitError}</span>}\n          {/* <div className={classes.btnWrapper}>\n          </div> */}\n          <Box sx={{\n            display: 'flex',\n            '& button': {\n              fontSize: '1rem',\n              minWidth: '6.5em',\n              padding: '0.125rem 0.75rem',\n              margin: '0 0.75em',\n            },\n            '& button.subBtn': {\n              color: 'secondary.matte',\n              border: '1px solid #e8e8e8',\n            },\n            '& button.mainBtn': {\n              fontWeight: 'bold',\n              color: 'background.paper',\n              backgroundColor: (theme) => theme.palette.primary.main,\n              '&:hover': {\n                backgroundColor: '#fabd5e',\n              },\n            },\n          }}>\n            <Button\n              className=\"subBtn\"\n              onClick={() => form.reset({})}\n              disabled={submitting}\n              variant=\"outlined\"\n              type=\"button\"\n            >\n              全部清除\n            </Button>\n            {/* <Button\n              className=\"subBtn\"\n              onClick={() => form.reset({ ...currentSearchContent })}\n              disabled={submitting}\n              variant=\"outlined\"\n              type=\"button\">\n              匯出還原\n            </Button> */}\n            <Button\n              className=\"mainBtn\"\n              variant=\"contained\"\n              disableElevation={true}\n              type=\"submit\"\n              disabled={submitting}>\n              搜尋\n            </Button>\n          </Box>\n        </Grid>\n      </Grid>\n    </Box>\n  )\n\n  return (\n    <Form\n      initialValues={{ ...currentSearchContent }}\n      onSubmit={onSubmit}\n      // validate={validate}\n      render={renderForm}\n      mutators={{\n        changeDate,\n        putInMember,\n        putInComms,\n        putInSalePoints,\n      }}\n    ></Form>\n  )\n}\n\nconst btnFieldStyle = {\n  display: 'flex',\n  position: 'relative',\n  paddingBottom: '1rem',\n  '& label': {\n    flex: '0 0 3.5rem',\n    maxWidth: '3.5rem',\n  },\n  '& input': {\n    flexGrow: 1,\n    '&:disabled': {\n      color: '#000000',\n      backgroundColor: '#fbfbfb',\n    },\n  },\n  '& button': {\n    padding: '0 7px',\n    minWidth: '41px',\n    marginLeft: '0.25rem',\n    marginTop: '0.125rem',\n    marginBottom: '0.125rem',\n    color: 'background.paper',\n    bgcolor: 'primary.light',\n    '&:hover': {\n      bgcolor: 'primary.main',\n    },\n  },\n}\n\nconst threeWordFieldStyle = {\n  display: 'flex',\n  position: 'relative',\n  paddingBottom: '1rem',\n  '& label': {\n    flex: '0 0 4.5rem',\n    maxWidth: '4.5rem',\n  },\n  '& input': {\n    flex: '0 0 calc(100% - 4.5rem)',\n    maxWidth: 'calc(100% - 4.5rem)',\n  },\n  '& select': {\n    flex: '0 0 calc(100% - 4.5rem)',\n    maxWidth: 'calc(100% - 4.5rem)',\n  },\n}\n\nconst mapStateToProps = (state) => ({\n  auth: state.auth,\n})\n\nexport default connect(mapStateToProps)(SearchField)","import React from 'react'\nimport Box from '@mui/material/Box'\nimport IconButton from '@mui/material/IconButton'\nimport PrintRoundedIcon from '@mui/icons-material/PrintRounded'\nimport { OrderItemDetail, showOrderTime, renderPayment } from '../ui/PrintedOrder'\n\nconst OrderItem = ({\n  order,\n  index,\n  offset,\n  creditInfo,\n  onPrintClick,\n}) => {\n\n  return (\n    <Box\n      className=\"order-list-item\"\n    >\n      <Box className={`order-info-wrapper${order.isReturn ? ' returned' : ''}`}>\n        <div className=\"order-info\">\n          <div className=\"serial-sec\">{index + 1 + offset}</div>\n\n          <div className=\"info-sec-container\">\n            <div className=\"info-sec-wrapper\">\n              <div className=\"info-sec\">\n                <span className=\"info-title\">日期 : </span>\n                <span className=\"info-content\">{showOrderTime(order.date)}</span>\n              </div>\n              <div className=\"info-sec\">\n                <span className=\"info-title\">門市 : </span>\n                <span className=\"info-content\">\n                  {order?.cashRegister?.salePoint?.salePointName || '-'}\n                </span>\n              </div>\n            </div>\n\n            <div className=\"info-sec-wrapper\">\n              <div className=\"info-sec\">\n                <span className=\"info-title\">會員 : </span>\n                <span className=\"info-content\">\n                  {order.memberInfo ? `${order.memberInfo.memberName} | ${order.memberInfo.phone}` : '---'}\n                </span>\n              </div>\n              <div className=\"info-sec\">\n                <span className=\"info-title\">發票 : </span>\n                <span className=\"info-content\">\n                  {order.invoicePage ? order.invoicePage.no : '無發票資訊'}\n                </span>\n              </div>\n            </div>\n\n            <div className=\"info-sec-wrapper\">\n              <div className=\"info-sec\">\n                <span className=\"info-title\">銷售員 : </span>\n                <span className=\"info-content\">\n                  {order.salesman && order.salesman.realName}\n                </span>\n              </div>\n              <div className=\"info-sec\">\n                <span className=\"info-title\">服務員 : </span>\n                <span className=\"info-content\">\n                  {order.user && order.user.realName}\n                </span>\n              </div>\n            </div>\n\n          </div>\n        </div>\n\n        <div className=\"order-id\">\n          {order.no}\n        </div>\n\n        <IconButton className=\"print-btn\" onClick={() => onPrintClick(order)}>\n          <PrintRoundedIcon />\n        </IconButton>\n      </Box>\n\n      <OrderItemDetail list={order.salesDetails || []} />\n\n      <Box\n        className=\"order-detail\"\n      >\n        <div className=\"credit-info\">\n          <div className=\"last-yard\">\n            <span>信用卡號末四碼 : </span>\n            <span>\n              {creditInfo.cardNo ? creditInfo.cardNo.replaceAll(' ', '').slice(-4) : '- - - -'}\n            </span>\n          </div>\n          <div className=\"auth-yard\">\n            <span>授權碼 : </span>\n            <span>\n              {creditInfo.approvalCode || '- - - -'}\n            </span>\n          </div>\n        </div>\n\n        <div className=\"received-info\">\n          <div className=\"received-list\">\n            {renderPayment(order.salesPayments || [])}\n          </div>\n\n          <div className=\"total-sum\">\n            <span>總金額 :&nbsp;</span>\n            <span>\n              {`${order.actualTotal}元`}\n            </span>\n          </div>\n        </div>\n      </Box>\n    </Box>\n  )\n}\n\nexport default OrderItem\n","import React, { useState, useEffect, useRef } from 'react'\nimport Box from '@mui/material/Box'\nimport IconButton from '@mui/material/IconButton'\nimport ArrowUpwardIcon from '@mui/icons-material/ArrowUpward'\nimport OrderItem from './OrderItem'\nimport PrintedOrder, { orderTableStyle } from '../ui/PrintedOrder'\n\nconst OrderList = ({ filteredOrders, offset }) => {\n  const printContentRef = useRef(null)\n  const [printOrder, setPrintOrder] = useState(null)\n\n  const onPrintClick = order => {\n    setPrintOrder(order)\n  }\n\n  useEffect(() => {\n    if (printOrder) {\n      const printContent = printContentRef.current\n      const printIframe = document.querySelector('#print-iframe')\n      printIframe.innerHTML = printContent.innerHTML\n      window.print()\n\n      printIframe.innerHTML = null\n      setPrintOrder(null)\n    }\n\n  }, [printOrder])\n\n  const topListTop = () => {\n    const offsetTop = document.getElementById('pagination').offsetTop\n    window.scroll({ top: offsetTop, left: 0, behavior: 'auto' })\n  }\n\n  const renderOrders = orders => {\n    return orders.map((order, index) => {\n\n      const creditInfo = order.salesPayments.find(payment => Boolean(payment.creditCard))?.creditCard || {}\n\n      return (\n        <OrderItem\n          key={order.id}\n          index={index}\n          order={order}\n          offset={offset}\n          creditInfo={creditInfo}\n          onPrintClick={onPrintClick}\n        />\n      )\n    })\n  }\n\n  return (\n    <React.Fragment>\n      <Box\n        id=\"order-list-container\"\n        sx={{\n          pt: '1.5rem',\n          pb: '1.5rem',\n          '& .order-list-item': {\n            borderBottom: '2px solid #a4a4a4',\n            marginBottom: '4rem',\n            boxShadow: '0px 0px 14px -10px #bbbbbb',\n            '&:last-of-type': {\n              marginBottom: 0,\n            },\n          },\n          '& .order-info-wrapper': {\n            display: 'flex',\n            flexWrap: 'wrap',\n            alignItems: 'center',\n            justifyContent: 'center',\n            bgcolor: 'secondary.matte',\n            '&.returned': {\n              bgcolor: '#878787',\n            },\n            '& .order-info': {\n              flexGrow: 1,\n              display: 'inline-flex',\n              flexWrap: 'wrap',\n              alignItems: 'center',\n              fontWeight: 'bold',\n            },\n            '& .order-id': {\n              color: 'background.paper',\n              py: '0.5em',\n              pr: '0.5em',\n            },\n            '& .print-btn': {\n              mr: '0.25em',\n              color: 'background.paper',\n            },\n            '& .serial-sec': {\n              flex: '0 0 4rem',\n              display: 'inline-flex',\n              justifyContent: 'center',\n              fontSize: '1.5rem',\n              color: 'background.paper',\n              padding: '0 1em',\n              minWidth: 0,\n            },\n            '& .info-sec-container': {\n              flex: '0 0 calc(100% - 4rem)',\n              display: 'inline-flex',\n              flexWrap: 'wrap',\n              padding: '0.25em 0',\n            },\n            '& .info-sec-wrapper': {\n              flex: '0 0 100%',\n              display: 'inline-flex',\n              flexWrap: 'wrap',\n              paddingRight: '1.75em',\n            },\n            '& .info-sec': {\n              flex: '0 0 50%',\n              paddingTop: '0.125em',\n              paddingBottom: '0.125em',\n              '@media (min-width: 600px)': {\n                flex: 'unset',\n              },\n            },\n            '& .info-title': {\n              color: (theme) => theme.palette.primary.main,\n            },\n            '& .info-content': {\n              color: 'background.paper',\n            },\n          },\n          '& .order-table': orderTableStyle,\n          '& .order-detail': {\n            display: 'flex',\n            justifyContent: 'space-between',\n            color: 'text.secondary',\n            backgroundColor: 'background.default',\n            padding: '0.5em 1em',\n            '& .credit-info': {\n              display: 'inline-flex',\n              flexWrap: 'wrap',\n              alignItems: 'center',\n            },\n            '& .credit-info > div': {\n              fontSize: '0.9rem',\n              flex: '0 0 100%',\n              display: 'inline-block',\n              paddingRight: '1em',\n            },\n            '& .received-info': {\n              display: 'inline-flex',\n              alignItems: 'center',\n            },\n            '& .received-info > div': {\n              display: 'inline-flex',\n              alignItems: 'center',\n            },\n            '& .received-list > div': {\n              display: 'inline-block',\n              paddingRight: '1em',\n            },\n            '& .total-sum': {\n              fontSize: '1.25rem',\n              fontWeight: 'bold',\n              color: 'secondary.main',\n            },\n          },\n          '@media (min-width: 600px)': {\n            '& .order-info-wrapper .info-sec-wrapper': {\n              flexDirection: 'column',\n              flex: 'unset',\n            },\n            '& .order-info-wrapper .info-sec-wrapper:last-child': {\n              paddingRight: 0,\n            },\n            '& .order-info-wrapper .info-sec': {\n              flex: 'unset',\n            },\n          },\n        }}\n      >\n        {renderOrders(filteredOrders)}\n      </Box >\n\n      <Box sx={{\n        display: 'flex',\n        justifyContent: 'flex-end',\n        pb: '1.5rem'\n      }}>\n        <IconButton\n          onClick={topListTop}\n          size=\"large\"\n          sx={{\n            bgcolor: 'primary.main',\n            color: 'background.default',\n            '&:hover': {\n              bgcolor: 'primary.light',\n            },\n          }}\n        >\n          <ArrowUpwardIcon fontSize=\"large\" />\n        </IconButton>\n      </Box>\n\n      <Box className=\"print-content\" ref={printContentRef} sx={{ display: 'none' }}>\n        {printOrder && <PrintedOrder order={printOrder} />}\n      </Box>\n\n\n    </React.Fragment>\n  )\n}\n\nexport default OrderList","import React from 'react'\nimport { Pagination as PaginationComponent } from '@mui/material'\n\nconst Pagination = ({ totalPage, currentPage, handlePageChange }) => {\n\n  return (\n    <div id=\"pagination\">\n      <PaginationComponent\n        count={totalPage}\n        page={currentPage}\n        siblingCount={2}\n        size=\"small\"\n        shape=\"rounded\"\n        showFirstButton\n        showLastButton\n        onChange={handlePageChange}\n        sx={{\n          padding: '2rem 0 0rem',\n          // borderBottom: '2px dashed #dddddd',\n          '& .MuiPagination-ul': {\n            justifyContent: 'flex-end',\n          },\n          '& .MuiPaginationItem-root': {\n            color: 'secondary.main',\n          },\n          '& .MuiPaginationItem-page.Mui-selected': {\n            color: 'background.default',\n            backgroundColor: (theme) => theme.palette.primary.main,\n          },\n        }}\n      />\n    </div>\n  )\n}\n\nexport default Pagination","import React from 'react'\nimport { Box, Grow } from '@mui/material'\nimport { TransitionGroup } from 'react-transition-group'\n\nconst formatDateDivider = dateString => {\n  return dateString\n    ? dateString.replaceAll('-', '/')\n    : '-'\n}\n\nconst DailyStatisticList = ({\n  salePayments,\n  currentSearchContent,\n}) => {\n\n  const aggregatePayment = data => {\n    const paymentObj = {}\n    data.forEach(dailyData => {\n      if (!paymentObj[dailyData.paymentName]) { paymentObj[dailyData.paymentName] = 0 }\n      paymentObj[dailyData.paymentName] += dailyData.value\n    })\n\n    return paymentObj\n  }\n\n  const renderDashboard = (title, result, key) => {\n    if (!result || result.length === 0) { return null }\n    return (\n      <Grow key={key}>\n        <Box sx={statisticItemStyle}>\n          <div className=\"header-sec\">\n            <div className=\"date-sec\">\n              <span>{formatDateDivider(currentSearchContent.startDate)}</span>\n              &nbsp; - &nbsp;\n              <span>{formatDateDivider(currentSearchContent.endDate)}</span>\n            </div>\n            <div className=\"store-sec\">\n              {title}\n            </div>\n          </div>\n          <div className=\"receiveds-sec\">\n            {result}\n          </div>\n        </Box>\n      </Grow>\n    )\n  }\n\n  const renderDailyStatistic = (data = []) => {\n    const paymentObj = aggregatePayment(data)\n    const result = Object.keys(paymentObj).map(paymentName => {\n      return (\n        <Box key={paymentName}>\n          <div className=\"title\">{paymentName}:</div>\n          <span className=\"content\">{paymentObj[paymentName]}</span>\n        </Box>\n      )\n    })\n\n    return renderDashboard('全部 收銀機', result, 'All')\n  }\n\n  // // 先依照天次區分資料\n  // const divideDailyData = (data = []) => {\n  //   const divideData = {}\n  //   data.forEach(item => {\n  //     const dataDate = parseMsToDateString(item.date)\n  //     if (!divideData[dataDate]) { divideData[dataDate] = [] }\n  //     divideData[dataDate].push(item)\n  //   })\n  //   return divideData\n  // }\n\n  // 先依照收銀機區分資料\n  const divideCashRegisterData = (data = []) => {\n    const dividedData = {}\n    data.forEach(item => {\n      const cashRegisterName = item.cashRegisterName\n      if (!dividedData[cashRegisterName]) { dividedData[cashRegisterName] = [] }\n      dividedData[cashRegisterName].push(item)\n    })\n    return dividedData\n  }\n\n  const renderDailyStatistics = (divideData = {}) => {\n    // 先依照天次處理資料\n    return Object.keys(divideData).map((divider) => {\n      const dailyDataArray = divideData[divider]\n      const paymentObj = aggregatePayment(dailyDataArray)\n      const result = Object.keys(paymentObj).map(paymentName => {\n        return (\n          <Box key={paymentName}>\n            <div className=\"title\">{paymentName}:</div>\n            <span className=\"content\">{paymentObj[paymentName]}</span>\n          </Box>\n        )\n      })\n\n      return renderDashboard(divider, result, divider)\n    })\n  }\n\n  return (\n    <Box component=\"section\" id=\"daily-statistic-list\"\n      sx={{\n        // margin: '3rem 0 0',\n        padding: '3rem 0 1.5rem',\n        borderBottom: '2px dashed #dddddd',\n      }}\n    >\n      <Box sx={{ display: 'flex', flexWrap: 'wrap', justifyContent: 'space-between' }}>\n        <TransitionGroup component={null}>\n          {renderDailyStatistic(salePayments)}\n          {renderDailyStatistics(divideCashRegisterData(salePayments))}\n        </TransitionGroup>\n      </Box>\n    </Box>\n  )\n}\n\nconst statisticItemStyle = {\n  flex: '0 0 100%',\n  borderRadius: '0.25em',\n  backgroundColor: '#f7f7f7',\n  marginBottom: '2em',\n  boxShadow: '0px 0px 12px -2px #cacaca',\n  overflow: 'hidden',\n  '@media (min-width: 600px)': {\n    flex: '0 0 49%',\n  },\n  '& .header-sec': {\n    display: 'flex',\n    flexWrap: 'wrap',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    backgroundColor: 'secondary.matte',\n    padding: '0.5em 0.75em',\n  },\n  '& .date-sec': {\n    letterSpacing: '0.025em',\n    fontWeight: 'bold',\n    fontSize: '1.15rem',\n    color: 'background.paper',\n    // '& span': {\n    //   background: (theme) => `linear-gradient(to bottom, transparent, transparent 50%, ${alpha(theme.palette.text.primary, 0.2)} 50%)`,\n    // },\n  },\n  '& .store-sec': {\n    fontSize: '0.9rem',\n    color: 'background.paper',\n  },\n  '& .receiveds-sec': {\n    display: 'flex',\n    flexWrap: 'wrap',\n    padding: '0.5em 0',\n    '& > div': {\n      flex: '0 0 20%',\n      display: 'inline-block',\n      fontWeight: 'bold',\n      textAlign: 'center',\n      color: '#333333',\n      padding: '0 0.5em',\n      margin: '0.25em 0',\n      borderRight: '1px solid #cccccc',\n    },\n    '& .title': {\n      fontSize: '0.9rem',\n      color: 'text.secondary',\n    },\n    '& .content': {\n      fontSize: '1.125rem',\n    },\n  },\n}\n\nexport default DailyStatisticList","import React from 'react'\nimport { compose } from 'redux'\nimport { connect } from 'react-redux'\nimport { Box, Container, Typography } from '@mui/material'\nimport { omit } from 'lodash-es'\nimport { fetchSales } from '../../slices/salesSlice'\nimport qs from 'query-string'\nimport withAuth from '../Auth/withAuth'\nimport SearchField from './SearchField'\nimport OrderList from './OrderList'\nimport Pagination from './Pagination'\nimport DailyStatisticList from './DailyStatisticList'\nimport { salesRequest } from '../../apis'\nimport { parseMsToDateString } from '../../helpers/dateParser'\n\nconst ORDERS_PER_PAGE = 5\nconst REQUIRED_STATE_NAMES = ['startDate', 'endDate', 'memberName', 'memberId', 'salePointNames', 'salePointIds', 'stockNames', 'stockIds', 'salesman', 'userId']\n\nconst todayParams = { startDate: parseMsToDateString(Date.now()), endDate: parseMsToDateString(Date.now()) }\nconst todayQueryString = '?' + new URLSearchParams(todayParams).toString()\n\n\nclass PosOrderList extends React.Component {\n  state = {\n    currentSearchContent: todayParams,\n    // currentSearchContent: {},\n    currentSearchString: todayQueryString,\n    // currentSearchString: '',\n    currentPage: 1,\n    // posOrders為統計用，filteredOrders為分頁用\n    // posOrders: [],\n    filteredOrders: [],\n    salePayments: [],\n  }\n\n  fetchSales = params => {\n    this.props.fetchSales({\n      limit: ORDERS_PER_PAGE,\n      sort: 'date desc',\n      ...params,\n    })\n  }\n\n  fetchSalePayments = async (params) => {\n    const { data } = await salesRequest.get('/payment/summary', {\n      headers: { 'Authorization': 'Bearer ' + this.props.auth.authenticated },\n      params: params,\n    })\n    this.setState({ salePayments: data.list })\n  }\n\n  componentDidMount = () => {\n    if (this.props.location.search) {\n      const newSearchContent = {}\n      const queryObj = qs.parse(this.props.location.search)\n      REQUIRED_STATE_NAMES.forEach(stateName => {\n        if (queryObj[stateName]) { newSearchContent[stateName] = queryObj[stateName] }\n      })\n      this.setState({\n        currentSearchContent: newSearchContent,\n        currentSearchString: this.props.location.search,\n        ...(Number(queryObj.page) ? { currentPage: Number(queryObj.page) } : { currentPage: 1 }),\n      })\n      this.fetchSales({\n        ...newSearchContent,\n        ...(Number(queryObj.page) ? { page: Number(queryObj.page) } : {}),\n      })\n      newSearchContent.startDate && newSearchContent.endDate && this.fetchSalePayments({\n        ...newSearchContent,\n        ...(Number(queryObj.page) ? { page: Number(queryObj.page) } : {}),\n      })\n    }\n    else {\n      this.fetchSales({\n        page: 1,\n        ...todayParams,\n      })\n      this.fetchSalePayments({\n        page: 1,\n        ...todayParams,\n      })\n      this.props.history.push(todayQueryString)\n    }\n  }\n\n  componentDidUpdate = () => {\n    // 比較 URL QueryString 與暫存的 currentSearchString，不同時重新抓取資料\n    // 因為分頁被獨立出來成currentPage，所以需要忽略page去判斷\n    if (this.props.location.search !== this.state.currentSearchString) {\n      const queryObj = qs.parse(this.props.location.search, { sort: false })\n      const noPageQueryObj = omit(queryObj, ['page'])\n      const noPageSearchString = new URLSearchParams(noPageQueryObj).toString()\n      const searchContentString = new URLSearchParams(this.state.currentSearchContent).toString()\n      const newCurrentPage = Number(queryObj.page) || 1\n      if (noPageSearchString !== searchContentString) {\n        // Refetch search API here with noPageQueryObj\n        this.setState({\n          currentPage: newCurrentPage,\n          currentSearchContent: noPageQueryObj,\n          currentSearchString: this.props.location.search,\n        })\n      }\n      else {\n        this.setState({\n          currentPage: newCurrentPage,\n          currentSearchString: this.props.location.search\n        })\n      }\n      // this.setState({ currentPage: newCurrentPage })\n      this.fetchSales({\n        ...queryObj,\n        page: newCurrentPage,\n      })\n      queryObj.startDate && queryObj.endDate && this.fetchSalePayments({\n        ...queryObj,\n        page: newCurrentPage,\n      })\n    }\n  }\n\n  changePage = pageValue => {\n    this.setState({ currentPage: pageValue })\n    this.fetchSales({\n      ...this.state.currentSearchContent,\n      page: pageValue,\n    })\n  }\n\n  filterParams = params => {\n    const filteredParams = {}\n    REQUIRED_STATE_NAMES.forEach(stateName => {\n      if (params[stateName]) { filteredParams[stateName] = params[stateName] }\n    })\n    return filteredParams\n  }\n\n  handlePageChange = (e, value) => {\n    this.changePage(value)\n    // 處理 URL QueryString\n    const searchContent = value === 1\n      ? omit(this.state.currentSearchContent, ['page'])\n      : { ...this.state.currentSearchContent, page: value }\n    const searchParams = new URLSearchParams(searchContent)\n    const queryString = '?' + searchParams.toString()\n    const offsetTop = document.getElementById('pagination').offsetTop\n    this.setState({ currentSearchString: queryString })\n    this.props.history.push(queryString)\n    window.scroll({ top: offsetTop, left: 0, behavior: 'smooth' })\n  }\n\n  handleSearchSubmit = values => {\n    const params = this.filterParams(values)\n    this.setState({\n      currentSearchContent: params,\n      currentPage: 1,\n    })\n    this.fetchSales(params)\n    params.startDate && params.endDate\n      ? this.fetchSalePayments(params)\n      : this.setState({ salePayments: [] })\n    const searchParams = new URLSearchParams(params)\n    const queryString = '?' + searchParams.toString()\n    this.setState({ currentSearchString: queryString })\n    this.props.history.push(queryString)\n  }\n\n\n  render() {\n    const offset = (this.state.currentPage - 1) * ORDERS_PER_PAGE\n\n    return (\n      <Box id=\"pos-order-list\" component=\"div\"\n        sx={{\n          bgcolor: 'background.paper',\n        }}\n      >\n        <Container maxWidth={false} sx={{\n          bgcolor: 'background.paper',\n          maxWidth: 1600,\n          minHeight: 'calc(100vh - 2.5rem)',\n          boxShadow: '0px 0px 12px -6px #cccccc',\n        }}>\n          <Typography variant=\"h1\" component=\"div\" sx={{\n            fontSize: '1.75rem',\n            fontWeight: 'bold',\n            textAlign: 'center',\n            color: 'secondary.main',\n            padding: '1.75rem 0 1.75rem',\n            margin: 0,\n          }}>\n            銷售明細表\n          </Typography>\n          <SearchField\n            currentSearchContent={this.state.currentSearchContent}\n            handleSearchSubmit={this.handleSearchSubmit}\n          />\n          {\n            this.state.currentSearchContent.startDate &&\n            this.state.currentSearchContent.endDate &&\n            (<DailyStatisticList\n              salePayments={this.state.salePayments}\n              currentSearchContent={this.state.currentSearchContent}\n            />)\n          }\n          <Pagination\n            totalPage={this.props.sales.totalPage}\n            currentPage={this.state.currentPage}\n            handlePageChange={this.handlePageChange}\n          />\n          <OrderList\n            offset={offset}\n            filteredOrders={this.props.sales.list || []}\n          />\n        </Container>\n      </Box>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    auth: state.auth,\n    sales: state.sales,\n  }\n}\n\nconst enhance = compose(\n  withAuth(),\n  connect(mapStateToProps, { fetchSales }),\n)\n\nexport default enhance(PosOrderList)\n"],"sourceRoot":""}