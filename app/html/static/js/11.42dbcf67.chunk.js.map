{"version":3,"sources":["components/Auth/withAuth.js","../node_modules/@mui/material/Typography/typographyClasses.js","../node_modules/@mui/material/Typography/Typography.js","../node_modules/@mui/material/Grid/GridContext.js","../node_modules/@mui/material/Grid/gridClasses.js","../node_modules/@mui/material/Grid/Grid.js","components/LayoutManage/GridInput.js","components/LayoutManage/CommList.js","components/LayoutManage/PlatTagList.js","components/LayoutManage/LayoutManage.js"],"names":["authLevelMapping","shop","company","enterprise","withAuth","authLevel","ChildComponent","connect","state","auth","authenticated","level","props","history","useEffect","push","getTypographyUtilityClass","slot","generateUtilityClass","generateUtilityClasses","_excluded","TypographyRoot","styled","name","overridesResolver","styles","ownerState","root","variant","align","capitalize","noWrap","gutterBottom","paragraph","theme","_extends","margin","typography","textAlign","overflow","textOverflow","whiteSpace","marginBottom","defaultVariantMapping","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","colorTransformations","primary","textPrimary","secondary","textSecondary","error","Typography","React","inProps","ref","themeProps","useThemeProps","color","transformDeprecatedColors","extendSxProp","className","component","variantMapping","other","_objectWithoutPropertiesLoose","Component","classes","slots","composeClasses","useUtilityClasses","_jsx","as","clsx","GridContext","getGridUtilityClass","GRID_SIZES","gridClasses","map","spacing","direction","wrap","size","getOffset","val","parse","parseFloat","String","replace","resolveSpacingClasses","container","Number","isNaN","xs","sm","md","lg","xl","GridRoot","item","zeroMinWidth","boxSizing","display","flexWrap","width","minWidth","directionValues","resolveBreakpointValues","values","breakpoints","handleBreakpoints","propValue","output","flexDirection","indexOf","maxWidth","rowSpacing","rowSpacingValues","themeSpacing","marginTop","paddingTop","columnSpacing","columnSpacingValues","marginLeft","paddingLeft","keys","reduce","globalStyles","breakpoint","flexBasis","flexGrow","flexShrink","columnsBreakpointValues","columns","columnValue","undefined","Math","round","more","fullWidth","Object","assign","up","Grid","columnsProp","columnSpacingProp","rowSpacingProp","columnsContext","Provider","value","children","posLayouts","content","posLayoutsStatus","loading","posLayoutDrafts","priceMapping","editPosLayoutDrafts","editPosLayoutDraftItem","clearPosLayoutDraftItem","editPreviousPalette","updatePriceMapping","fetchPriceMapping","fetchPosLayouts","isDeleting","currentLayoutIndex","recordedLayoutIndex","currentLayoutItemIndex","setCurrentLayoutIndex","setRecordedLayoutIndex","setCurrentLayoutItemIndex","posLayoutDraft","useMemo","stockList","preventDefault","e","stopPropagation","Box","id","sx","position","alignItems","justifyContent","backgroundColor","height","padding","borderBottom","borderRight","userSelect","borderTop","borderLeft","boxShadow","border","borderTopWidth","borderLeftWidth","zIndex","fontSize","fontWeight","letterSpacing","lineHeight","textShadow","palette","background","paper","right","top","verticalAlign","cursor","paddingRight","bottom","borderRadius","length","index","selected","style","onDragEnter","onDragOver","onDrop","itemIndex","stockId","dataTransfer","getData","priceString","price","newItem","stockName","onDropIn","onClick","onGridItemClick","onClearClick","type","onChange","target","onBackgroundColorChange","onBlur","onBackgroundColorInput","comms","commClasses","postPosLayouts","fetchComms","fetchCommClasses","editPosLayoutDraft","useState","searchName","setSearchName","searchCategory","setSearchCategory","secondaryCategory","setSecondaryCategory","thirdCategory","setThirdCategory","secondaryCategories","setSecondaryCategories","thirdCategories","setThirdCategories","tagName","setTagName","gridItemName","setGridItemName","fetchClasses","params","commClassRequest","get","headers","limit","catRank","data","list","currentLayout","currentLayoutItem","categoryName","onCategoryChange","categoryId","parent","newSecondaryCategories","onSecondaryCategoryChange","onDragStart","setData","dataset","commId","commName","commPrice","commColor","onTouchEnd","currentTarget","targetItem","document","elementFromPoint","changedTouches","clientX","clientY","targetItemIndex","originItem","renderedClasses","commClass","inputString","categoryDescription","replaceAll","renderedItems","title","description","draggable","renderedColors","elKey","reverse","flex","minHeight","pt","pb","paddingBottom","borderColor","borderTopLeftRadius","borderBottomLeftRadius","bgcolor","borderTopRightRadius","borderBottomRightRadius","placeholder","overflowY","maxHeight","newLayout","layout","disabled","Toast","fire","icon","querySelector","errorTitle","errorMsg","platTagStyle","marginRight","transition","transform","deleteWrapperStyle","deletingStyle","addPosLayoutDraft","deletePosLayoutDraft","setIsDeleting","addOpen","setAddOpen","newTagName","setNewTagName","newTagRef","useRef","onBodyClick","event","current","contains","body","addEventListener","capture","removeEventListener","getPriceMapping","newIndex","getNewID","layouts","isRepeat","newID","existingIDs","order","randomID","includes","c","r","random","toString","tagIndex","layoutId","classList","add","onDragLeave","remove","dragIndex","dropBaseIndex","dropIndex","slicedLayout","slice","newLayouts","filter","el","splice","renderedTags","active","onTagClick","isLast","onDeleteClick","touchPlatformStyle","px","left"],"mappings":"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","file":"static/js/11.42dbcf67.chunk.js","sourcesContent":["import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\n\nconst authLevelMapping = {\n  shop: 5,\n  company: 10,\n  enterprise: 15\n}\n\nconst withAuth = authLevel => ChildComponent => {\n  const ComposedComponent = props => {\n    const { auth, level, history } = props\n\n    useEffect(() => {\n      if (!auth) {\n        history.push('/signin')\n        return\n      }\n      if (authLevel && (!level || authLevelMapping[authLevel] > authLevelMapping[level])) {\n        history.push('/')\n        return\n      }\n    }, [auth, level, history])\n\n    return (\n      <ChildComponent {...props} />\n    )\n  }\n\n  const mapStateToProps = state => {\n    return {\n      auth: state.auth.authenticated,\n      level: state.auth.level\n    }\n  }\n\n  return connect(mapStateToProps)(ComposedComponent)\n}\n\nexport default withAuth","import { generateUtilityClass, generateUtilityClasses } from '@mui/base';\nexport function getTypographyUtilityClass(slot) {\n  return generateUtilityClass('MuiTypography', slot);\n}\nconst typographyClasses = generateUtilityClasses('MuiTypography', ['root', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'subtitle1', 'subtitle2', 'body1', 'body2', 'inherit', 'button', 'caption', 'overline', 'alignLeft', 'alignRight', 'alignCenter', 'alignJustify', 'noWrap', 'gutterBottom', 'paragraph']);\nexport default typographyClasses;","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nconst _excluded = [\"align\", \"className\", \"component\", \"gutterBottom\", \"noWrap\", \"paragraph\", \"variant\", \"variantMapping\"];\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { unstable_extendSxProp as extendSxProp } from '@mui/system';\nimport { unstable_composeClasses as composeClasses } from '@mui/base';\nimport styled from '../styles/styled';\nimport useThemeProps from '../styles/useThemeProps';\nimport capitalize from '../utils/capitalize';\nimport { getTypographyUtilityClass } from './typographyClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nconst useUtilityClasses = ownerState => {\n  const {\n    align,\n    gutterBottom,\n    noWrap,\n    paragraph,\n    variant,\n    classes\n  } = ownerState;\n  const slots = {\n    root: ['root', variant, ownerState.align !== 'inherit' && `align${capitalize(align)}`, gutterBottom && 'gutterBottom', noWrap && 'noWrap', paragraph && 'paragraph']\n  };\n  return composeClasses(slots, getTypographyUtilityClass, classes);\n};\n\nexport const TypographyRoot = styled('span', {\n  name: 'MuiTypography',\n  slot: 'Root',\n  overridesResolver: (props, styles) => {\n    const {\n      ownerState\n    } = props;\n    return [styles.root, ownerState.variant && styles[ownerState.variant], ownerState.align !== 'inherit' && styles[`align${capitalize(ownerState.align)}`], ownerState.noWrap && styles.noWrap, ownerState.gutterBottom && styles.gutterBottom, ownerState.paragraph && styles.paragraph];\n  }\n})(({\n  theme,\n  ownerState\n}) => _extends({\n  margin: 0\n}, ownerState.variant && theme.typography[ownerState.variant], ownerState.align !== 'inherit' && {\n  textAlign: ownerState.align\n}, ownerState.noWrap && {\n  overflow: 'hidden',\n  textOverflow: 'ellipsis',\n  whiteSpace: 'nowrap'\n}, ownerState.gutterBottom && {\n  marginBottom: '0.35em'\n}, ownerState.paragraph && {\n  marginBottom: 16\n}));\nconst defaultVariantMapping = {\n  h1: 'h1',\n  h2: 'h2',\n  h3: 'h3',\n  h4: 'h4',\n  h5: 'h5',\n  h6: 'h6',\n  subtitle1: 'h6',\n  subtitle2: 'h6',\n  body1: 'p',\n  body2: 'p',\n  inherit: 'p'\n}; // TODO v6: deprecate these color values in v5.x and remove the transformation in v6\n\nconst colorTransformations = {\n  primary: 'primary.main',\n  textPrimary: 'text.primary',\n  secondary: 'secondary.main',\n  textSecondary: 'text.secondary',\n  error: 'error.main'\n};\n\nconst transformDeprecatedColors = color => {\n  return colorTransformations[color] || color;\n};\n\nconst Typography = /*#__PURE__*/React.forwardRef(function Typography(inProps, ref) {\n  const themeProps = useThemeProps({\n    props: inProps,\n    name: 'MuiTypography'\n  });\n  const color = transformDeprecatedColors(themeProps.color);\n  const props = extendSxProp(_extends({}, themeProps, {\n    color\n  }));\n\n  const {\n    align = 'inherit',\n    className,\n    component,\n    gutterBottom = false,\n    noWrap = false,\n    paragraph = false,\n    variant = 'body1',\n    variantMapping = defaultVariantMapping\n  } = props,\n        other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  const ownerState = _extends({}, props, {\n    align,\n    color,\n    className,\n    component,\n    gutterBottom,\n    noWrap,\n    paragraph,\n    variant,\n    variantMapping\n  });\n\n  const Component = component || (paragraph ? 'p' : variantMapping[variant] || defaultVariantMapping[variant]) || 'span';\n  const classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(TypographyRoot, _extends({\n    as: Component,\n    ref: ref,\n    ownerState: ownerState,\n    className: clsx(classes.root, className)\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? Typography.propTypes\n/* remove-proptypes */\n= {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * Set the text-align on the component.\n   * @default 'inherit'\n   */\n  align: PropTypes.oneOf(['center', 'inherit', 'justify', 'left', 'right']),\n\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * The component used for the root node.\n   * Either a string to use a HTML element or a component.\n   */\n  component: PropTypes.elementType,\n\n  /**\n   * If `true`, the text will have a bottom margin.\n   * @default false\n   */\n  gutterBottom: PropTypes.bool,\n\n  /**\n   * If `true`, the text will not wrap, but instead will truncate with a text overflow ellipsis.\n   *\n   * Note that text overflow can only happen with block or inline-block level elements\n   * (the element needs to have a width in order to overflow).\n   * @default false\n   */\n  noWrap: PropTypes.bool,\n\n  /**\n   * If `true`, the element will be a paragraph element.\n   * @default false\n   */\n  paragraph: PropTypes.bool,\n\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object]),\n\n  /**\n   * Applies the theme typography styles.\n   * @default 'body1'\n   */\n  variant: PropTypes\n  /* @typescript-to-proptypes-ignore */\n  .oneOfType([PropTypes.oneOf(['body1', 'body2', 'button', 'caption', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'inherit', 'overline', 'subtitle1', 'subtitle2']), PropTypes.string]),\n\n  /**\n   * The component maps the variant prop to a range of different HTML element types.\n   * For instance, subtitle1 to `<h6>`.\n   * If you wish to change that mapping, you can provide your own.\n   * Alternatively, you can use the `component` prop.\n   * @default {\n   *   h1: 'h1',\n   *   h2: 'h2',\n   *   h3: 'h3',\n   *   h4: 'h4',\n   *   h5: 'h5',\n   *   h6: 'h6',\n   *   subtitle1: 'h6',\n   *   subtitle2: 'h6',\n   *   body1: 'p',\n   *   body2: 'p',\n   *   inherit: 'p',\n   * }\n   */\n  variantMapping: PropTypes\n  /* @typescript-to-proptypes-ignore */\n  .object\n} : void 0;\nexport default Typography;","import * as React from 'react';\n/**\n * @ignore - internal component.\n */\n\nconst GridContext = /*#__PURE__*/React.createContext();\n\nif (process.env.NODE_ENV !== 'production') {\n  GridContext.displayName = 'GridContext';\n}\n\nexport default GridContext;","import { generateUtilityClass, generateUtilityClasses } from '@mui/base';\nexport function getGridUtilityClass(slot) {\n  return generateUtilityClass('MuiGrid', slot);\n}\nconst SPACINGS = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10];\nconst DIRECTIONS = ['column-reverse', 'column', 'row-reverse', 'row'];\nconst WRAPS = ['nowrap', 'wrap-reverse', 'wrap'];\nconst GRID_SIZES = ['auto', true, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];\nconst gridClasses = generateUtilityClasses('MuiGrid', ['root', 'container', 'item', 'zeroMinWidth', // spacings\n...SPACINGS.map(spacing => `spacing-xs-${spacing}`), // direction values\n...DIRECTIONS.map(direction => `direction-xs-${direction}`), // wrap values\n...WRAPS.map(wrap => `wrap-xs-${wrap}`), // grid sizes for all breakpoints\n...GRID_SIZES.map(size => `grid-xs-${size}`), ...GRID_SIZES.map(size => `grid-sm-${size}`), ...GRID_SIZES.map(size => `grid-md-${size}`), ...GRID_SIZES.map(size => `grid-lg-${size}`), ...GRID_SIZES.map(size => `grid-xl-${size}`)]);\nexport default gridClasses;","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nconst _excluded = [\"className\", \"columns\", \"columnSpacing\", \"component\", \"container\", \"direction\", \"item\", \"lg\", \"md\", \"rowSpacing\", \"sm\", \"spacing\", \"wrap\", \"xl\", \"xs\", \"zeroMinWidth\"];\n// A grid component using the following libs as inspiration.\n//\n// For the implementation:\n// - https://getbootstrap.com/docs/4.3/layout/grid/\n// - https://github.com/kristoferjoseph/flexboxgrid/blob/master/src/css/flexboxgrid.css\n// - https://github.com/roylee0704/react-flexbox-grid\n// - https://material.angularjs.org/latest/layout/introduction\n//\n// Follow this flexbox Guide to better understand the underlying model:\n// - https://css-tricks.com/snippets/css/a-guide-to-flexbox/\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { unstable_extendSxProp as extendSxProp, handleBreakpoints, unstable_resolveBreakpointValues as resolveBreakpointValues } from '@mui/system';\nimport { unstable_composeClasses as composeClasses } from '@mui/base';\nimport requirePropFactory from '../utils/requirePropFactory';\nimport styled from '../styles/styled';\nimport useThemeProps from '../styles/useThemeProps';\nimport GridContext from './GridContext';\nimport gridClasses, { getGridUtilityClass } from './gridClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction getOffset(val) {\n  const parse = parseFloat(val);\n  return `${parse}${String(val).replace(String(parse), '') || 'px'}`;\n}\n\nexport function generateGrid({\n  theme,\n  ownerState\n}) {\n  let size;\n  return theme.breakpoints.keys.reduce((globalStyles, breakpoint) => {\n    // Use side effect over immutability for better performance.\n    let styles = {};\n\n    if (ownerState[breakpoint]) {\n      size = ownerState[breakpoint];\n    }\n\n    if (!size) {\n      return globalStyles;\n    }\n\n    if (size === true) {\n      // For the auto layouting\n      styles = {\n        flexBasis: 0,\n        flexGrow: 1,\n        maxWidth: '100%'\n      };\n    } else if (size === 'auto') {\n      styles = {\n        flexBasis: 'auto',\n        flexGrow: 0,\n        flexShrink: 0,\n        maxWidth: 'none',\n        width: 'auto'\n      };\n    } else {\n      const columnsBreakpointValues = resolveBreakpointValues({\n        values: ownerState.columns,\n        breakpoints: theme.breakpoints.values\n      });\n      const columnValue = typeof columnsBreakpointValues === 'object' ? columnsBreakpointValues[breakpoint] : columnsBreakpointValues;\n\n      if (columnValue === undefined || columnValue === null) {\n        return globalStyles;\n      } // Keep 7 significant numbers.\n\n\n      const width = `${Math.round(size / columnValue * 10e7) / 10e5}%`;\n      let more = {};\n\n      if (ownerState.container && ownerState.item && ownerState.columnSpacing !== 0) {\n        const themeSpacing = theme.spacing(ownerState.columnSpacing);\n\n        if (themeSpacing !== '0px') {\n          const fullWidth = `calc(${width} + ${getOffset(themeSpacing)})`;\n          more = {\n            flexBasis: fullWidth,\n            maxWidth: fullWidth\n          };\n        }\n      } // Close to the bootstrap implementation:\n      // https://github.com/twbs/bootstrap/blob/8fccaa2439e97ec72a4b7dc42ccc1f649790adb0/scss/mixins/_grid.scss#L41\n\n\n      styles = _extends({\n        flexBasis: width,\n        flexGrow: 0,\n        maxWidth: width\n      }, more);\n    } // No need for a media query for the first size.\n\n\n    if (theme.breakpoints.values[breakpoint] === 0) {\n      Object.assign(globalStyles, styles);\n    } else {\n      globalStyles[theme.breakpoints.up(breakpoint)] = styles;\n    }\n\n    return globalStyles;\n  }, {});\n}\nexport function generateDirection({\n  theme,\n  ownerState\n}) {\n  const directionValues = resolveBreakpointValues({\n    values: ownerState.direction,\n    breakpoints: theme.breakpoints.values\n  });\n  return handleBreakpoints({\n    theme\n  }, directionValues, propValue => {\n    const output = {\n      flexDirection: propValue\n    };\n\n    if (propValue.indexOf('column') === 0) {\n      output[`& > .${gridClasses.item}`] = {\n        maxWidth: 'none'\n      };\n    }\n\n    return output;\n  });\n}\nexport function generateRowGap({\n  theme,\n  ownerState\n}) {\n  const {\n    container,\n    rowSpacing\n  } = ownerState;\n  let styles = {};\n\n  if (container && rowSpacing !== 0) {\n    const rowSpacingValues = resolveBreakpointValues({\n      values: rowSpacing,\n      breakpoints: theme.breakpoints.values\n    });\n    styles = handleBreakpoints({\n      theme\n    }, rowSpacingValues, propValue => {\n      const themeSpacing = theme.spacing(propValue);\n\n      if (themeSpacing !== '0px') {\n        return {\n          marginTop: `-${getOffset(themeSpacing)}`,\n          [`& > .${gridClasses.item}`]: {\n            paddingTop: getOffset(themeSpacing)\n          }\n        };\n      }\n\n      return {};\n    });\n  }\n\n  return styles;\n}\nexport function generateColumnGap({\n  theme,\n  ownerState\n}) {\n  const {\n    container,\n    columnSpacing\n  } = ownerState;\n  let styles = {};\n\n  if (container && columnSpacing !== 0) {\n    const columnSpacingValues = resolveBreakpointValues({\n      values: columnSpacing,\n      breakpoints: theme.breakpoints.values\n    });\n    styles = handleBreakpoints({\n      theme\n    }, columnSpacingValues, propValue => {\n      const themeSpacing = theme.spacing(propValue);\n\n      if (themeSpacing !== '0px') {\n        return {\n          width: `calc(100% + ${getOffset(themeSpacing)})`,\n          marginLeft: `-${getOffset(themeSpacing)}`,\n          [`& > .${gridClasses.item}`]: {\n            paddingLeft: getOffset(themeSpacing)\n          }\n        };\n      }\n\n      return {};\n    });\n  }\n\n  return styles;\n}\nexport function resolveSpacingClasses(spacing, container, styles = {}) {\n  // in case of grid item or undefined/null or `spacing` <= 0\n  if (!container || !spacing || spacing <= 0) {\n    return [];\n  } // in case of string/number `spacing`\n\n\n  if (typeof spacing === 'string' && !Number.isNaN(Number(spacing)) || typeof spacing === 'number') {\n    return [styles[`spacing-xs-${String(spacing)}`] || `spacing-xs-${String(spacing)}`];\n  } // in case of object `spacing`\n\n\n  const {\n    xs,\n    sm,\n    md,\n    lg,\n    xl\n  } = spacing;\n  return [Number(xs) > 0 && (styles[`spacing-xs-${String(xs)}`] || `spacing-xs-${String(xs)}`), Number(sm) > 0 && (styles[`spacing-sm-${String(sm)}`] || `spacing-sm-${String(sm)}`), Number(md) > 0 && (styles[`spacing-md-${String(md)}`] || `spacing-md-${String(md)}`), Number(lg) > 0 && (styles[`spacing-lg-${String(lg)}`] || `spacing-lg-${String(lg)}`), Number(xl) > 0 && (styles[`spacing-xl-${String(xl)}`] || `spacing-xl-${String(xl)}`)];\n} // Default CSS values\n// flex: '0 1 auto',\n// flexDirection: 'row',\n// alignItems: 'flex-start',\n// flexWrap: 'nowrap',\n// justifyContent: 'flex-start',\n\nconst GridRoot = styled('div', {\n  name: 'MuiGrid',\n  slot: 'Root',\n  overridesResolver: (props, styles) => {\n    const {\n      container,\n      direction,\n      item,\n      lg,\n      md,\n      sm,\n      spacing,\n      wrap,\n      xl,\n      xs,\n      zeroMinWidth\n    } = props.ownerState;\n    return [styles.root, container && styles.container, item && styles.item, zeroMinWidth && styles.zeroMinWidth, ...resolveSpacingClasses(spacing, container, styles), direction !== 'row' && styles[`direction-xs-${String(direction)}`], wrap !== 'wrap' && styles[`wrap-xs-${String(wrap)}`], xs !== false && styles[`grid-xs-${String(xs)}`], sm !== false && styles[`grid-sm-${String(sm)}`], md !== false && styles[`grid-md-${String(md)}`], lg !== false && styles[`grid-lg-${String(lg)}`], xl !== false && styles[`grid-xl-${String(xl)}`]];\n  }\n})(({\n  ownerState\n}) => _extends({\n  boxSizing: 'border-box'\n}, ownerState.container && {\n  display: 'flex',\n  flexWrap: 'wrap',\n  width: '100%'\n}, ownerState.item && {\n  margin: 0 // For instance, it's useful when used with a `figure` element.\n\n}, ownerState.zeroMinWidth && {\n  minWidth: 0\n}, ownerState.wrap !== 'wrap' && {\n  flexWrap: ownerState.wrap\n}), generateDirection, generateRowGap, generateColumnGap, generateGrid);\n\nconst useUtilityClasses = ownerState => {\n  const {\n    classes,\n    container,\n    direction,\n    item,\n    lg,\n    md,\n    sm,\n    spacing,\n    wrap,\n    xl,\n    xs,\n    zeroMinWidth\n  } = ownerState;\n  const slots = {\n    root: ['root', container && 'container', item && 'item', zeroMinWidth && 'zeroMinWidth', ...resolveSpacingClasses(spacing, container), direction !== 'row' && `direction-xs-${String(direction)}`, wrap !== 'wrap' && `wrap-xs-${String(wrap)}`, xs !== false && `grid-xs-${String(xs)}`, sm !== false && `grid-sm-${String(sm)}`, md !== false && `grid-md-${String(md)}`, lg !== false && `grid-lg-${String(lg)}`, xl !== false && `grid-xl-${String(xl)}`]\n  };\n  return composeClasses(slots, getGridUtilityClass, classes);\n};\n\nconst Grid = /*#__PURE__*/React.forwardRef(function Grid(inProps, ref) {\n  const themeProps = useThemeProps({\n    props: inProps,\n    name: 'MuiGrid'\n  });\n  const props = extendSxProp(themeProps);\n\n  const {\n    className,\n    columns: columnsProp,\n    columnSpacing: columnSpacingProp,\n    component = 'div',\n    container = false,\n    direction = 'row',\n    item = false,\n    lg = false,\n    md = false,\n    rowSpacing: rowSpacingProp,\n    sm = false,\n    spacing = 0,\n    wrap = 'wrap',\n    xl = false,\n    xs = false,\n    zeroMinWidth = false\n  } = props,\n        other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  const rowSpacing = rowSpacingProp || spacing;\n  const columnSpacing = columnSpacingProp || spacing;\n  const columnsContext = React.useContext(GridContext); // columns set with default breakpoint unit of 12\n\n  const columns = container ? columnsProp || 12 : columnsContext;\n\n  const ownerState = _extends({}, props, {\n    columns,\n    container,\n    direction,\n    item,\n    lg,\n    md,\n    sm,\n    rowSpacing,\n    columnSpacing,\n    wrap,\n    xl,\n    xs,\n    zeroMinWidth\n  });\n\n  const classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(GridContext.Provider, {\n    value: columns,\n    children: /*#__PURE__*/_jsx(GridRoot, _extends({\n      ownerState: ownerState,\n      className: clsx(classes.root, className),\n      as: component,\n      ref: ref\n    }, other))\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? Grid.propTypes\n/* remove-proptypes */\n= {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * The number of columns.\n   * @default 12\n   */\n  columns: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.number), PropTypes.number, PropTypes.object]),\n\n  /**\n   * Defines the horizontal space between the type `item` components.\n   * It overrides the value of the `spacing` prop.\n   */\n  columnSpacing: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.number, PropTypes.string])), PropTypes.number, PropTypes.object, PropTypes.string]),\n\n  /**\n   * The component used for the root node.\n   * Either a string to use a HTML element or a component.\n   */\n  component: PropTypes.elementType,\n\n  /**\n   * If `true`, the component will have the flex *container* behavior.\n   * You should be wrapping *items* with a *container*.\n   * @default false\n   */\n  container: PropTypes.bool,\n\n  /**\n   * Defines the `flex-direction` style property.\n   * It is applied for all screen sizes.\n   * @default 'row'\n   */\n  direction: PropTypes.oneOfType([PropTypes.oneOf(['column-reverse', 'column', 'row-reverse', 'row']), PropTypes.arrayOf(PropTypes.oneOf(['column-reverse', 'column', 'row-reverse', 'row'])), PropTypes.object]),\n\n  /**\n   * If `true`, the component will have the flex *item* behavior.\n   * You should be wrapping *items* with a *container*.\n   * @default false\n   */\n  item: PropTypes.bool,\n\n  /**\n   * If a number, it sets the number of columns the grid item uses.\n   * It can't be greater than the total number of columns of the container (12 by default).\n   * If 'auto', the grid item's width matches its content.\n   * If false, the prop is ignored.\n   * If true, the grid item's width grows to use the space available in the grid container.\n   * The value is applied for the `lg` breakpoint and wider screens if not overridden.\n   * @default false\n   */\n  lg: PropTypes.oneOfType([PropTypes.oneOf(['auto']), PropTypes.number, PropTypes.bool]),\n\n  /**\n   * If a number, it sets the number of columns the grid item uses.\n   * It can't be greater than the total number of columns of the container (12 by default).\n   * If 'auto', the grid item's width matches its content.\n   * If false, the prop is ignored.\n   * If true, the grid item's width grows to use the space available in the grid container.\n   * The value is applied for the `md` breakpoint and wider screens if not overridden.\n   * @default false\n   */\n  md: PropTypes.oneOfType([PropTypes.oneOf(['auto']), PropTypes.number, PropTypes.bool]),\n\n  /**\n   * Defines the vertical space between the type `item` components.\n   * It overrides the value of the `spacing` prop.\n   */\n  rowSpacing: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.number, PropTypes.string])), PropTypes.number, PropTypes.object, PropTypes.string]),\n\n  /**\n   * If a number, it sets the number of columns the grid item uses.\n   * It can't be greater than the total number of columns of the container (12 by default).\n   * If 'auto', the grid item's width matches its content.\n   * If false, the prop is ignored.\n   * If true, the grid item's width grows to use the space available in the grid container.\n   * The value is applied for the `sm` breakpoint and wider screens if not overridden.\n   * @default false\n   */\n  sm: PropTypes.oneOfType([PropTypes.oneOf(['auto']), PropTypes.number, PropTypes.bool]),\n\n  /**\n   * Defines the space between the type `item` components.\n   * It can only be used on a type `container` component.\n   * @default 0\n   */\n  spacing: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.number, PropTypes.string])), PropTypes.number, PropTypes.object, PropTypes.string]),\n\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object]),\n\n  /**\n   * Defines the `flex-wrap` style property.\n   * It's applied for all screen sizes.\n   * @default 'wrap'\n   */\n  wrap: PropTypes.oneOf(['nowrap', 'wrap-reverse', 'wrap']),\n\n  /**\n   * If a number, it sets the number of columns the grid item uses.\n   * It can't be greater than the total number of columns of the container (12 by default).\n   * If 'auto', the grid item's width matches its content.\n   * If false, the prop is ignored.\n   * If true, the grid item's width grows to use the space available in the grid container.\n   * The value is applied for the `xl` breakpoint and wider screens if not overridden.\n   * @default false\n   */\n  xl: PropTypes.oneOfType([PropTypes.oneOf(['auto']), PropTypes.number, PropTypes.bool]),\n\n  /**\n   * If a number, it sets the number of columns the grid item uses.\n   * It can't be greater than the total number of columns of the container (12 by default).\n   * If 'auto', the grid item's width matches its content.\n   * If false, the prop is ignored.\n   * If true, the grid item's width grows to use the space available in the grid container.\n   * The value is applied for all the screen sizes with the lowest priority.\n   * @default false\n   */\n  xs: PropTypes.oneOfType([PropTypes.oneOf(['auto']), PropTypes.number, PropTypes.bool]),\n\n  /**\n   * If `true`, it sets `min-width: 0` on the item.\n   * Refer to the limitations section of the documentation to better understand the use case.\n   * @default false\n   */\n  zeroMinWidth: PropTypes.bool\n} : void 0;\n\nif (process.env.NODE_ENV !== 'production') {\n  const requireProp = requirePropFactory('Grid', Grid); // eslint-disable-next-line no-useless-concat\n\n  Grid['propTypes' + ''] = _extends({}, Grid.propTypes, {\n    direction: requireProp('container'),\n    lg: requireProp('item'),\n    md: requireProp('item'),\n    sm: requireProp('item'),\n    spacing: requireProp('container'),\n    wrap: requireProp('container'),\n    xs: requireProp('item'),\n    zeroMinWidth: requireProp('item')\n  });\n}\n\nexport default Grid;","import React, { useEffect, useMemo } from 'react'\nimport { connect } from 'react-redux'\nimport { Box, Grid, Typography } from '@mui/material'\nimport { editPreviousPalette } from '../../slices/paletteSlice'\nimport { editPosLayoutDrafts, editPosLayoutDraftItem, clearPosLayoutDraftItem } from '../../slices/posLayoutDraftsSlice'\nimport { fetchPosLayouts } from '../../slices/posLayoutsSlice'\nimport { updatePriceMapping, fetchPriceMapping } from '../../slices/priceMappingSlice'\n\nconst GridInput = ({\n  isDeleting,\n  posLayouts,\n  posLayoutsStatus,\n  posLayoutDrafts,\n  priceMapping,\n  updatePriceMapping,\n  fetchPosLayouts,\n  fetchPriceMapping,\n  currentLayoutIndex,\n  recordedLayoutIndex,\n  currentLayoutItemIndex,\n  setCurrentLayoutIndex,\n  setRecordedLayoutIndex,\n  setCurrentLayoutItemIndex,\n  editPosLayoutDrafts,\n  editPosLayoutDraftItem,\n  clearPosLayoutDraftItem,\n  editPreviousPalette,\n}) => {\n\n  // 1) 串接樣板資料\n  useEffect(() => {\n    fetchPosLayouts()\n  }, [fetchPosLayouts])\n\n  // 2) 資料串接成功後，更新草稿\n  useEffect(() => {\n    if (posLayoutsStatus === 'idle') {\n      editPosLayoutDrafts(posLayouts)\n    }\n  }, [editPosLayoutDrafts, setCurrentLayoutIndex, posLayouts, posLayoutsStatus])\n\n  const posLayoutDraft = useMemo(() => {\n    return posLayoutDrafts[currentLayoutIndex] || {}\n  }, [currentLayoutIndex, posLayoutDrafts])\n\n  // 3) 草稿有內容後，一開始以及切換樣板分頁後，\n  // 串接該分頁商品的價格對照表\n  useEffect(() => {\n    if (isDeleting) return\n    if (posLayoutDraft.stockList && (recordedLayoutIndex !== currentLayoutIndex)) {\n      fetchPriceMapping(posLayoutDraft.stockList)\n      setRecordedLayoutIndex(currentLayoutIndex)\n    }\n  }, [posLayoutDraft, isDeleting, recordedLayoutIndex, setRecordedLayoutIndex, currentLayoutIndex, fetchPriceMapping])\n\n  const onDropIn = (e, id, itemIndex, item) => {\n    preventDefault(e)\n    // 注意: e.dataTransfer.getData('text/price')在拖曳色塊時為'', \n    // 在拖曳沒有價格的商品時為'0', \n    // 故須在將其Number()前才能判斷是以上哪種狀態\n    const stockId = e.dataTransfer.getData('text/id') || item.stockId\n    const priceString = e.dataTransfer.getData('text/price')\n    const price = Number(priceString) || (priceString === '0' ? 0 : item.price)\n    const newItem = {\n      ...item,\n      stockId,\n      price,\n      stockName: e.dataTransfer.getData('text/name') || item.stockName,\n      backgroundColor: e.dataTransfer.getData('text/backgroundColor') || item.backgroundColor,\n    }\n    if (stockId) { updatePriceMapping({ [stockId]: price }) }\n    editPosLayoutDraftItem({ id, index: itemIndex, item: newItem })\n  }\n\n  const onGridItemClick = index => {\n    setCurrentLayoutItemIndex(index)\n  }\n\n  const onClearClick = (id, index) => {\n    clearPosLayoutDraftItem({ id, index })\n  }\n\n  const onBackgroundColorChange = (e, id, index, item) => {\n    const newItem = {\n      ...item,\n      backgroundColor: e.target.value,\n    }\n    editPosLayoutDraftItem({ id, index, item: newItem })\n  }\n\n  const onBackgroundColorInput = e => {\n    editPreviousPalette(e.target.value)\n  }\n\n  const preventDefault = e => {\n    e.preventDefault()\n    e.stopPropagation()\n    return false\n  }\n\n  const renderLayoutItems = () => {\n    return (Object.keys(posLayoutDraft).length > 0) && posLayoutDraft.stockList.map((item, index) => {\n      const selected = index === currentLayoutItemIndex ? 'selected' : ''\n      return (\n        <Grid\n          item\n          xs={4}\n          style={{ backgroundColor: item.backgroundColor }}\n          className={`grid-item ${selected}`}\n          onDragEnter={preventDefault}\n          onDragOver={preventDefault}\n          onDrop={(e) => onDropIn(e, posLayoutDraft.id, index, item)}\n          onClick={() => onGridItemClick(index)}\n          key={index}\n          data-item-index={index}\n        >\n          <div\n            data-item-index={index}\n            className=\"item-clear\"\n            onClick={() => onClearClick(posLayoutDraft.id, index)}>\n            ✕\n          </div>\n\n          <Typography variant=\"h4\" data-item-index={index}>\n            {item.stockName}\n          </Typography>\n          <Typography variant=\"subtitle1\" data-item-index={index}>\n            {priceMapping[item.stockId] || '-'}\n          </Typography>\n          {/* <p data-item-index={index}>{priceMapping[item.stockId] || '-'}</p> */}\n          <div className=\"item-color\" data-item-index={index}>\n            <label data-item-index={index}>底色:&nbsp;</label>\n            <input\n              type=\"color\"\n              data-item-index={index}\n              value={item.backgroundColor}\n              onChange={(e) => onBackgroundColorChange(e, posLayoutDraft.id, index, item)}\n              onBlur={e => onBackgroundColorInput(e)} />\n          </div>\n        </Grid>\n      )\n    })\n  }\n\n  return (\n    <Box component=\"section\" id=\"grid-input\" sx={{\n      position: 'relative',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      flexGrow: 1,\n      backgroundColor: '#e0e0e0',\n      '& .grid-field': {\n        backgroundColor: '#cccccc',\n        width: '83%',\n        height: '90%',\n        padding: 0,\n      },\n    }}>\n      <div className=\"grid-field container-fluid\">\n        <Grid container sx={{\n          height: '100%',\n          borderBottom: '1px solid #999999',\n          borderRight: '1px solid #999999',\n          margin: 0,\n          '& .grid-item': {\n            position: 'relative',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            flexDirection: 'column',\n            userSelect: 'none',\n            borderTop: '1px solid #999999',\n            borderLeft: '1px solid #999999',\n            paddingTop: '0.5em',\n            height: '20%',\n            '&.selected': {\n              boxShadow: '0px 0px 6px -3px #363636',\n              border: '1px solid #33333377',\n              borderTopWidth: '2px',\n              borderLeftWidth: '2px',\n              zIndex: 2,\n            },\n            '& h4': {\n              fontSize: '1rem',\n              fontWeight: 'bold',\n              textAlign: 'center',\n              marginBottom: 0,\n              color: '#666666',\n              letterSpacing: '0.025em',\n              lineHeight: 1.5,\n              textShadow: theme => `0px 1px 2px ${theme.palette.background.paper}`,\n              overflow: 'overlay',\n            },\n          },\n          '& .item-clear': {\n            color: '#d6d6d666',\n            position: 'absolute',\n            right: '1%',\n            top: '1%',\n            width: '1.5em',\n            lineHeight: '1.5em',\n            fontSize: '0.8em',\n            verticalAlign: 'middle',\n            textAlign: 'center',\n            cursor: 'pointer',\n            '&:hover': {\n              color: '#50505066',\n            },\n          },\n          '& .item-color': {\n            position: 'absolute',\n            paddingRight: '5%',\n            right: 0,\n            bottom: 0,\n            fontSize: '0.9rem',\n            '& input': {\n              border: 'none',\n              borderRadius: '0.3em',\n              padding: 0,\n              width: '2.5em',\n              height: '1.3em',\n              userSelect: 'all',\n            },\n          },\n        }}>\n          {renderLayoutItems()}\n        </Grid>\n      </div>\n\n      <div className=\"toggle-field\"></div>\n    </Box>\n  )\n}\n\nconst mapStateToProp = state => {\n  return {\n    posLayouts: state.posLayouts.content,\n    posLayoutsStatus: state.posLayouts.loading,\n    posLayoutDrafts: state.posLayoutDrafts,\n    priceMapping: state.priceMapping.content,\n  }\n}\n\nexport default connect(\n  mapStateToProp,\n  { editPosLayoutDrafts, editPosLayoutDraftItem, clearPosLayoutDraftItem, editPreviousPalette, updatePriceMapping, fetchPriceMapping, fetchPosLayouts }\n)(GridInput);","import React, { useState, useEffect, useMemo } from 'react'\nimport { connect } from 'react-redux'\nimport { Box, Typography } from '@mui/material'\nimport { Toast } from '../../helpers/sweetAlert'\nimport { fetchComms } from '../../slices/commsSlice'\nimport { postPosLayouts } from '../../slices/posLayoutsSlice'\nimport { fetchCommClasses } from '../../slices/commClassesSlice'\nimport { editPosLayoutDrafts, editPosLayoutDraft, editPosLayoutDraftItem } from '../../slices/posLayoutDraftsSlice'\nimport { updatePriceMapping } from '../../slices/priceMappingSlice'\nimport { commClassRequest } from '../../apis'\n\n// const mapIndexToCategorySeq = (list) => {\n//   return list.map((item, index) => ({ ...item, categorySeq: index }))\n// }\n\nconst CommList = ({\n  auth,\n  comms,\n  commClasses,\n  posLayouts,\n  currentLayoutIndex,\n  setCurrentLayoutIndex,\n  currentLayoutItemIndex,\n  posLayoutDrafts,\n  palette,\n  postPosLayouts,\n  editPosLayoutDrafts,\n  editPosLayoutDraft,\n  editPosLayoutDraftItem,\n  updatePriceMapping,\n  fetchComms,\n  fetchCommClasses,\n}) => {\n  const [searchName, setSearchName] = useState('')\n  const [searchCategory, setSearchCategory] = useState('')\n  const [secondaryCategory, setSecondaryCategory] = useState('')\n  const [thirdCategory, setThirdCategory] = useState('')\n  const [secondaryCategories, setSecondaryCategories] = useState([])\n  const [thirdCategories, setThirdCategories] = useState([])\n\n  const [tagName, setTagName] = useState('')\n  const [gridItemName, setGridItemName] = useState('')\n\n  const fetchClasses = async (params) => {\n    try {\n      const { data } = await commClassRequest.get('', {\n        headers: { 'Authorization': 'Bearer ' + auth.authenticated },\n        params: {\n          limit: 'zero',\n          catRank: 1,\n          ...params,\n        }\n      })\n      return data.list\n    }\n    catch (err) { return [] }\n  }\n\n  useEffect(() => {\n    fetchCommClasses({\n      catRank: 1,\n    })\n  }, [fetchCommClasses])\n\n  useEffect(() => {\n    fetchComms({ limit: 15 })\n  }, [fetchComms])\n\n  const currentLayout = useMemo(() => {\n    return posLayoutDrafts[currentLayoutIndex]\n  }, [posLayoutDrafts, currentLayoutIndex])\n  const currentLayoutItem = useMemo(() => {\n    return posLayoutDrafts[currentLayoutIndex] ? posLayoutDrafts[currentLayoutIndex].stockList[currentLayoutItemIndex] : {}\n  }, [posLayoutDrafts, currentLayoutIndex, currentLayoutItemIndex])\n\n  useEffect(() => {\n    if (currentLayout) {\n      setTagName(currentLayout.categoryName)\n      setGridItemName(currentLayoutItem.stockName || '')\n    }\n  }, [currentLayout, currentLayoutItem])\n\n  // const onSearchClick = e => {\n  //   e.preventDefault()\n  //   const params = searchName ? { name: searchName, limit: 15 } : { limit: 15 }\n  //   fetchComms(params)\n  // }\n\n  const onSearchClick = e => {\n    e.preventDefault()\n    const params = searchName\n      ? {\n        name: searchName,\n        categoryId: thirdCategory || secondaryCategory || searchCategory,\n        limit: 15\n      } : {\n        categoryId: thirdCategory || secondaryCategory || searchCategory,\n        limit: 15\n      }\n    fetchComms(params)\n  }\n\n  const onCategoryChange = async (e) => {\n    const categoryId = e.target.value\n    const params = categoryId\n      ? { categoryId, name: searchName, limit: 15 }\n      : { name: searchName, limit: 15 }\n    setSearchCategory(categoryId)\n    setSecondaryCategory('')\n    setThirdCategory('')\n    fetchComms(params)\n    const newSecondaryCategories = await fetchClasses({\n      catRank: 2, parent: categoryId\n    })\n    setThirdCategories([])\n    setSecondaryCategories(newSecondaryCategories)\n  }\n\n  const onSecondaryCategoryChange = async (e) => {\n    const categoryId = e.target.value\n    const params = categoryId\n      ? { categoryId, name: searchName, limit: 15 }\n      : { categoryId: searchCategory, name: searchName, limit: 15 }\n    setSecondaryCategory(categoryId)\n    setThirdCategory('')\n    fetchComms(params)\n    const newSecondaryCategories = await fetchClasses({\n      catRank: 3, parent: categoryId\n    })\n    setThirdCategories(newSecondaryCategories)\n  }\n\n  const onThirdCategoryChange = e => {\n    const categoryId = e.target.value\n    const params = categoryId\n      ? { categoryId, name: searchName, limit: 15 }\n      : { categoryId: secondaryCategory || searchCategory, name: searchName, limit: 15 }\n    setThirdCategory(categoryId)\n    fetchComms(params)\n  }\n\n  const onTagNameChange = e => {\n    setTagName(e.target.value)\n  }\n\n  const onGridItemNameChange = e => {\n    setGridItemName(e.target.value)\n  }\n\n  const onNameSubmitClick = () => {\n    // const originLayout = posLayoutDrafts[currentLayoutIndex]\n    const newLayout = { ...currentLayout, categoryName: tagName }\n    editPosLayoutDraft({ id: currentLayout.id, layout: newLayout })\n  }\n\n  const onGridItemNameSubmitClick = () => {\n    // const originLayout = posLayoutDrafts[currentLayoutIndex]\n    // const originItem = currentLayout.stockList[currentLayoutItemIndex]\n    if (!currentLayoutItem.stockId || !gridItemName) return\n    const newItem = { ...currentLayoutItem, stockName: gridItemName }\n    editPosLayoutDraftItem({ id: currentLayout.id, index: currentLayoutItemIndex, item: newItem })\n  }\n\n  const onDragStart = e => {\n    e.dataTransfer.setData('text/id', e.target.dataset.commId || '')\n    e.dataTransfer.setData('text/name', e.target.dataset.commName || '')\n    e.dataTransfer.setData('text/price', e.target.dataset.commPrice || '')\n    e.dataTransfer.setData('text/backgroundColor', e.target.dataset.commColor || '')\n  }\n\n  const onTouchEnd = e => {\n    const currentTarget = e.currentTarget\n    const targetItem = document.elementFromPoint(e.changedTouches[0].clientX, e.changedTouches[0].clientY)\n    const targetItemIndex = targetItem && targetItem.dataset.itemIndex\n    if (targetItemIndex) {\n      const originItem = currentLayout.stockList[targetItemIndex]\n      const stockId = currentTarget.dataset.commId || originItem.stockId\n      const priceString = currentTarget.dataset.commPrice\n      const price = Number(priceString) || (priceString === '0' ? 0 : originItem.price)\n      const newItem = {\n        ...originItem,\n        stockId,\n        price,\n        stockName: currentTarget.dataset.commName || originItem.stockName,\n        backgroundColor: currentTarget.dataset.commColor || originItem.backgroundColor,\n      }\n      if (stockId) { updatePriceMapping({ [stockId]: price }) }\n      editPosLayoutDraftItem({ id: currentLayout.id, index: targetItemIndex, item: newItem })\n    }\n  }\n\n  const onRecoveryClick = () => {\n    editPosLayoutDrafts(posLayouts)\n    setCurrentLayoutIndex(0)\n  }\n\n  const onSaveClick = () => {\n    postPosLayouts(\n      posLayoutDrafts,\n      () => {\n        Toast.fire({\n          icon: 'success',\n          title: '儲存修改成功',\n          target: document.querySelector('.right-col')\n        })\n      },\n      (errorTitle, errorMsg) => {\n        Toast.fire({\n          icon: 'error',\n          title: errorTitle || '發生錯誤...',\n          // text: errorMsg || '已復原至更改前',\n          target: document.querySelector('.right-col')\n        })\n      },\n    )\n\n  }\n\n  const filterString = inputString => {\n    return inputString.replaceAll(/[[\\]]/g, '')\n  }\n\n  const renderedClasses = classes => {\n    return classes.map(commClass => (\n      <option key={commClass.categoryId} value={commClass.categoryId}>\n        {filterString(commClass.categoryDescription)}\n      </option>\n    ))\n  }\n\n  const renderedItems = comms && comms.map(item => {\n    return (\n      <div\n        key={item.stockId}\n        title={item.description}\n        data-comm-id={item.stockId}\n        data-comm-name={item.description}\n        data-comm-price={item.price ? item.price.price : 0}\n        draggable=\"true\"\n        onDragStart={onDragStart}\n        onTouchEnd={onTouchEnd}\n      >\n        <div className=\"comm-name-sec\">\n          <Typography noWrap={true} variant=\"body1\" title={item.description}>\n            {item.description}\n          </Typography>\n        </div>\n        <div className=\"comm-price-sec\">\n          <Typography noWrap={true} variant=\"body2\" title={item.price ? item.price.price : 0}>\n            {item.price ? item.price.price : 0}\n          </Typography>\n        </div>\n      </div>\n    )\n  })\n\n  const renderedColors = Object.keys(palette).map((elKey, index) => {\n    return (\n      <span\n        key={index}\n        data-comm-color={palette[elKey]}\n        draggable=\"true\"\n        onDragStart={onDragStart}\n        onTouchEnd={onTouchEnd}\n        style={{ backgroundColor: palette[elKey] }}\n      ></span>\n    )\n  }).reverse()\n\n  return (\n    <Box component=\"section\" id=\"comm-list\"\n      sx={{\n        position: 'relative',\n        display: 'flex',\n        flexDirection: 'column',\n        flex: '0 0 100%',\n        paddingLeft: '1em',\n        paddingRight: '1em',\n        minHeight: '600px',\n        minWidth: 0,\n        '& h5': {\n          pt: '1.5rem',\n          pb: '0.5rem',\n          fontWeight: 'bold',\n        },\n        '& .comm-classes': {\n          paddingBottom: '0.75em',\n        },\n        '& .comm-classes select': {\n          width: '100%',\n          color: '#666666',\n          borderColor: '#cccccc',\n        },\n      }}\n    >\n      <Typography variant=\"h5\">\n        商品搜尋\n      </Typography>\n\n      <Box component=\"form\" className=\"comm-search\"\n        sx={{\n          padding: '0 0 0.75em',\n          '& input[type=\"text\"]': {\n            width: '80%',\n            border: '1px solid #c4c4c4',\n            borderRight: 'none',\n            lineHeight: 1.75,\n            borderTopLeftRadius: '0.3em',\n            borderBottomLeftRadius: '0.3em',\n          },\n          '& input[type=\"submit\"]': {\n            width: '20%',\n            lineHeight: 1.75,\n            border: '1px solid #c4c4c4',\n            borderLeft: 'none',\n            letterSpacing: '0.2em',\n            color: 'background.default',\n            bgcolor: 'primary.light',\n            borderTopRightRadius: '0.3em',\n            borderBottomRightRadius: '0.3em',\n          },\n        }}\n      >\n        <input\n          type=\"text\"\n          placeholder=\"請輸入商品名稱\"\n          value={searchName}\n          onChange={e => setSearchName(e.target.value)}\n        />\n        <input\n          type=\"submit\"\n          value=\"搜尋\"\n          onClick={onSearchClick}\n        />\n      </Box>\n\n      {/* <Box className=\"comm-classes\" sx={{\n        paddingBottom: '1em',\n        '& select': {\n          width: '100%',\n          color: '#666666',\n          borderColor: '#cccccc',\n        },\n      }}>\n        <select>\n          {renderedClasses}\n        </select>\n      </Box> */}\n\n      <Box className=\"comm-classes\">\n        <select onChange={onCategoryChange}>\n          <option value=\"\">全部大類別</option>\n          {renderedClasses(commClasses)}\n        </select>\n      </Box>\n\n      {(secondaryCategories.length > 0) && (\n        <Box className=\"comm-classes\">\n          <select onChange={onSecondaryCategoryChange}>\n            <option value=\"\">全部次類別</option>\n            {renderedClasses(secondaryCategories)}\n          </select>\n        </Box>\n      )}\n\n      {(thirdCategories.length > 0) && (\n        <Box className=\"comm-classes\">\n          <select onChange={onThirdCategoryChange}>\n            <option value=\"\">全部小類別</option>\n            {renderedClasses(thirdCategories)}\n          </select>\n        </Box>\n      )}\n\n      <Box className=\"comm-list\"\n        sx={{\n          overflowY: 'auto',\n          maxHeight: '400px',\n          marginBottom: '2em',\n          '& > div': {\n            display: 'flex',\n            alignItems: 'center',\n            userSelect: 'none',\n            cursor: 'grab',\n            backgroundColor: '#ececec',\n            borderBottom: '1px dashed #666666',\n            padding: '0.375rem 1rem',\n          },\n          '& .comm-name-sec': {\n            flex: '1 1 auto',\n            minWidth: 0,\n            paddingRight: '1rem',\n          },\n          '& .comm-name-sec p': {\n            letterSpacing: '0.03rem',\n          },\n          '& .comm-price-sec p': {\n            fontWeight: 'bold',\n          },\n        }}\n      >\n        {renderedItems}\n      </Box>\n\n      <Box className=\"control-wrapper\"\n        sx={{\n          flexGrow: 1,\n          '& .plat-name-wrapper': {\n            userSelect: 'none',\n            paddingTop: '0.75em',\n          },\n          '& .plat-name': {\n            border: '1px solid #dddddd',\n            borderRadius: '0.2em',\n            lineHeight: '1em',\n            width: '7.5em',\n          },\n          '& .name-submit': {\n            lineHeight: 1.25,\n            border: '1px solid #aaaaaa',\n          },\n        }}\n      >\n        <div className=\"plat-name-wrapper\">\n          <label>面板名稱:&nbsp;</label>\n          <input\n            className=\"plat-name\"\n            value={tagName}\n            onChange={onTagNameChange}\n            type=\"text\" />\n          <input\n            className=\"name-submit\"\n            onClick={onNameSubmitClick}\n            type=\"button\"\n            value=\"修改\" />\n        </div>\n        <div className=\"plat-name-wrapper\">\n          <label>商品名稱:&nbsp;</label>\n          <input\n            className=\"plat-name\"\n            value={gridItemName}\n            onChange={onGridItemNameChange}\n            type=\"text\" />\n          <input\n            className=\"name-submit\"\n            onClick={onGridItemNameSubmitClick}\n            type=\"button\"\n            disabled={gridItemName ? false : true}\n            value=\"修改\" />\n        </div>\n        <Box className=\"comm-color\" sx={{\n          textAlign: 'left',\n          userSelect: 'none',\n          paddingTop: '2em',\n          '& span': {\n            display: 'inline-block',\n            width: '2.25em',\n            height: '1.5em',\n          },\n        }}>\n          {renderedColors}\n        </Box>\n      </Box>\n\n      <Box id=\"layout-save\" sx={{ textAlign: 'center' }}>\n        <Box className=\"btn-wrapper\" sx={{\n          padding: '1.5em 1.5em',\n          '& input': {\n            backgroundColor: '#777777',\n            borderRadius: '0.3em',\n            padding: '0.125em 1.25em',\n            color: 'background.default',\n            fontWeight: 'bold',\n            margin: '0.5em 0.25em',\n            border: 'none',\n            '&:last-child': {\n              bgcolor: 'primary.main',\n            },\n          },\n        }}>\n          <input type=\"button\" value=\"全部還原\" onClick={onRecoveryClick} />\n          <input type=\"button\" value=\"全部儲存\" onClick={onSaveClick} />\n        </Box>\n      </Box>\n\n    </Box>\n  )\n}\n\nconst mapStateToProps = state => {\n  return {\n    auth: state.auth,\n    comms: state.comms,\n    commClasses: state.commClasses,\n    posLayouts: state.posLayouts.content,\n    posLayoutDrafts: state.posLayoutDrafts,\n    palette: state.palette,\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  {\n    postPosLayouts,\n    fetchComms,\n    fetchCommClasses,\n    editPosLayoutDrafts,\n    editPosLayoutDraft,\n    editPosLayoutDraftItem,\n    updatePriceMapping,\n  }\n)(CommList)","import React, { useState, useEffect, useRef } from 'react'\nimport { Box } from '@mui/material'\nimport { connect } from 'react-redux'\nimport { editPosLayoutDrafts, addPosLayoutDraft, deletePosLayoutDraft } from '../../slices/posLayoutDraftsSlice'\nimport { fetchPriceMapping } from '../../slices/priceMappingSlice'\n\n\nconst PlatTagList = ({\n  isDeleting,\n  setIsDeleting,\n  posLayoutDrafts,\n  currentLayoutIndex,\n  setCurrentLayoutIndex,\n  setRecordedLayoutIndex,\n  setCurrentLayoutItemIndex,\n  fetchPriceMapping,\n  editPosLayoutDrafts,\n  addPosLayoutDraft,\n  deletePosLayoutDraft }) => {\n\n  const [addOpen, setAddOpen] = useState(false)\n  const [newTagName, setNewTagName] = useState('')\n  const newTagRef = useRef()\n\n  useEffect(() => {\n    const onBodyClick = (event) => {\n      if (newTagRef.current && newTagRef.current.contains(event.target)) return\n      setAddOpen(false)\n    }\n    document.body.addEventListener('click', onBodyClick, { capture: true });\n    return () => {\n      document.body.removeEventListener('click', onBodyClick, { capture: true })\n    }\n  }, [])\n\n  const getPriceMapping = (newIndex) => {\n    fetchPriceMapping(posLayoutDrafts[newIndex].stockList)\n    setRecordedLayoutIndex(newIndex)\n  }\n\n  const toggleAddTag = () => {\n    setAddOpen(!addOpen)\n  }\n\n  const toggleDeleteTag = () => {\n    setIsDeleting(!isDeleting)\n  }\n\n  const onTagClick = (e, index) => {\n    if (e.target.classList.contains('delete-icon')) return\n    setCurrentLayoutIndex(index)\n    if (isDeleting) getPriceMapping(index)\n    setCurrentLayoutItemIndex(0)\n  }\n\n  const onAddClick = () => {\n    if (!newTagName) return;\n    const newLayout = {\n      id: getNewID(posLayoutDrafts),\n      categoryName: newTagName\n    };\n    setCurrentLayoutIndex(posLayoutDrafts.length)\n    addPosLayoutDraft(newLayout)\n    setAddOpen(false)\n    setNewTagName('')\n  }\n\n  const onDeleteClick = (id, index) => {\n    if (posLayoutDrafts.length <= 1) return\n    const isLast = currentLayoutIndex >= (posLayoutDrafts.length - 1)\n    if (currentLayoutIndex > index || isLast) {\n      setCurrentLayoutIndex(currentLayoutIndex - 1);\n    }\n    if (currentLayoutIndex === index) {\n      if (isLast) {\n        getPriceMapping(index - 1)\n      } else {\n        // currentLayoutIndex不變，但 priceMapping 需重新請求\n        fetchPriceMapping(posLayoutDrafts[index + 1].stockList)\n      }\n    }\n    deletePosLayoutDraft(id)\n  }\n\n  const onNameChange = e => {\n    setNewTagName(e.target.value)\n  }\n\n  const getNewID = layouts => {\n    let isRepeat = true\n    let newID = ''\n    const existingIDs = layouts.map(order => order.id);\n    while (isRepeat) {\n      newID = randomID()\n      isRepeat = existingIDs.includes(newID)\n    }\n    return newID\n  }\n\n  const randomID = () => {\n    return 'layout' + 'yxxx'.replace(/[xy]/g, function (c) {\n      const r = Math.random() * 16 | 0\n      const v = c === 'x' ? r : ((r & 0x3) | 0x8)\n      return v.toString(16)\n    })\n  }\n\n  const onDragStart = e => {\n    e.dataTransfer.setData('text/index', e.target.dataset.tagIndex || '')\n    e.dataTransfer.setData('text/layoutID', e.target.dataset.layoutId || '')\n  }\n\n  const onDragEnter = e => {\n    e.currentTarget.classList.add('dragover')\n    preventDefault(e)\n  }\n\n  const onDragLeave = e => {\n    e.currentTarget.classList.remove('dragover')\n    preventDefault(e)\n  }\n\n  const preventDefault = e => {\n    e.preventDefault()\n    e.stopPropagation()\n    return false\n  }\n\n\n  const onDropIn = e => {\n    const currentTarget = e.currentTarget\n    currentTarget.classList.remove('dragover')\n    if (isDeleting || !e.dataTransfer.getData('text/index') || !currentTarget.dataset.tagIndex) return\n    const dragIndex = Number(e.dataTransfer.getData('text/index'))\n    const dropBaseIndex = Number(currentTarget.dataset.tagIndex)\n    // 以下index判斷式需加上\"等於\"，否則可能導致 currentLayoutIndex 不變卻交換分頁\n    // 將使 GridInput 中的 useEffect 無法呼叫 fetchPriceMapping。\n    const dropIndex = dragIndex <= dropBaseIndex\n      ? dropBaseIndex\n      : dropBaseIndex + 1\n    const slicedLayout = posLayoutDrafts.slice(dragIndex, dragIndex + 1)\n    const newLayouts = posLayoutDrafts.filter((el, index) => index !== dragIndex)\n    newLayouts.splice(dropIndex, 0, slicedLayout[0])\n    editPosLayoutDrafts(newLayouts)\n    setCurrentLayoutIndex(dropIndex)\n  }\n\n  const onTouchEnd = e => {\n    const currentTarget = e.currentTarget\n    const targetItem = document.elementFromPoint(e.changedTouches[0].clientX, e.changedTouches[0].clientY)\n    if (isDeleting || !currentTarget.dataset.tagIndex || !targetItem.dataset.tagIndex) return\n    const dragIndex = Number(currentTarget.dataset.tagIndex)\n    const dropBaseIndex = Number(targetItem.dataset.tagIndex)\n    // 以下index判斷式需加上\"等於\"，否則可能導致 currentLayoutIndex 不變卻交換分頁\n    // 將使 GridInput 中的 useEffect 無法呼叫 fetchPriceMapping。\n    const dropIndex = dragIndex <= dropBaseIndex ? dropBaseIndex : dropBaseIndex + 1\n    const slicedLayout = posLayoutDrafts.slice(dragIndex, dragIndex + 1)\n    const newLayouts = posLayoutDrafts.filter((el, index) => index !== dragIndex)\n    newLayouts.splice(dropIndex, 0, slicedLayout[0])\n    editPosLayoutDrafts(newLayouts)\n    setCurrentLayoutIndex(dropIndex)\n  }\n\n  const renderedTags = posLayoutDrafts.map((layout, index) => {\n    const active = index === currentLayoutIndex ? 'active' : ''\n    return (\n      <div\n        key={layout.id}\n        draggable={!isDeleting}\n        className={`plat-tag ${active}`}\n        data-tag-index={index}\n        data-layout-id={layout.id}\n        onDragStart={onDragStart}\n        onDragEnter={onDragEnter}\n        onDragOver={preventDefault}\n        onDragLeave={onDragLeave}\n        onDrop={onDropIn}\n        onTouchEnd={onTouchEnd}\n        onClick={(e) => onTagClick(e, index)}\n      >\n        {layout.categoryName}\n        <span className='delete-icon' onClick={() => onDeleteClick(layout.id, index)}>✕</span>\n      </div>\n    )\n  })\n\n  return (\n    <Box\n      component=\"section\"\n      id=\"plat-tag-list\"\n      className={`${isDeleting ? 'deleting' : ''}`}\n      sx={{\n        '& .plat-tag': styles.platTagStyle,\n        '& .delete-wrapper': styles.deleteWrapperStyle,\n        '&.deleting': styles.deletingStyle,\n      }}\n    >\n      <Box className=\"tag-wrapper\" sx={{\n        display: 'inline-block',\n        width: 'calc(100% - 5em)',\n        paddingTop: '0.5em',\n      }}>\n        {renderedTags}\n        <div\n          className={`plat-tag add-tag ${addOpen ? 'open' : ''}`}\n          ref={newTagRef}>\n          <input\n            onChange={onNameChange}\n            value={newTagName}\n            className='new-tag-name'\n            placeholder=\"版面名稱\"\n            type=\"text\" />\n          <input\n            onClick={onAddClick}\n            className='new-tag-submit'\n            type=\"button\"\n            value=\"新增\" />\n          <span className='add-icon' onClick={toggleAddTag}>✕</span>\n        </div>\n      </Box>\n      <div className=\"delete-wrapper\">\n        <div className=\"plat-tag\" onClick={toggleDeleteTag}>\n          {isDeleting ? '結束' : '刪除'}\n        </div>\n      </div>\n    </Box>\n  )\n}\n\nconst styles = {\n  platTagStyle: {\n    position: 'relative',\n    backgroundColor: '#bbbbbb',\n    display: 'inline-block',\n    userSelect: 'none',\n    cursor: 'pointer',\n    padding: '0 1em',\n    marginRight: '0.125em',\n    borderTopLeftRadius: '0.4em',\n    borderTopRightRadius: '0.4em',\n    overflow: 'visible',\n    transition: 'margin 0.3s ease-out',\n    '&.dragover': {\n      marginRight: '1.5em',\n    },\n    '&.dragover::after': {\n      position: 'absolute',\n      content: '\"\"',\n      right: 0,\n      width: '1.6em',\n      height: '1.5em',\n      transform: 'translate(100 %, 0)',\n    },\n    '&.active': {\n      color: '#666666',\n      backgroundColor: 'background.default',\n    },\n    '& .new-tag-name': {\n      maxWidth: 0,\n      padding: 0,\n      margin: 0,\n      border: '0 solid #cccccc',\n      display: 'inline-block',\n      transition: 'all 0.3s linear',\n      lineHeight: 1,\n    },\n    '& .new-tag-submit': {\n      maxWidth: 0,\n      padding: 0,\n      margin: 0,\n      border: '0 solid #cccccc',\n      display: 'inline-block',\n      transition: 'all 0.3s linear',\n      lineHeight: 1.25,\n      verticalAlign: 'top',\n    },\n    '& .add-icon': {\n      display: 'inline-block',\n      color: '#dddddd',\n      backgroundColor: '#9d9d9d',\n      verticalAlign: 'text-bottom',\n      fontWeight: 'bold',\n      textAlign: 'center',\n      userSelect: 'none',\n      fontSize: '0.8rem',\n      borderRadius: '3em',\n      lineHeight: 1.5,\n      width: '1.5em',\n      transform: 'rotate(45deg)',\n      transition: 'all 0.2s linear',\n    },\n    '& .delete-icon': {\n      display: 'none'\n    },\n    '&.open .new-tag-name': {\n      maxWidth: '5em',\n      padding: '0 0.25em',\n      backgroundColor: '#f0f0f0',\n    },\n    '&.open .new-tag-submit': {\n      maxWidth: '3em',\n      padding: '0 0.25em',\n      marginRight: '0.3em',\n      border: '2px solid #b3b3b3',\n      backgroundColor: '#e2e2e2',\n      color: '#333333',\n    },\n    '&.open .add-icon': {\n      transform: 'rotate(0deg)',\n    },\n  },\n  deleteWrapperStyle: {\n    display: 'inline-block',\n    width: '5em',\n    '& .plat-tag': {\n      backgroundColor: '#cb5c5c',\n      color: 'background.darkPaper',\n      zIndex: 101,\n    },\n  },\n  deletingStyle: {\n    zIndex: 101,\n    backgroundColor: '#fff1ed',\n    '& .plat-tag': {\n      color: '#444444',\n      backgroundColor: '#ff8e6f',\n    },\n    '& .plat-tag.active': {\n      color: 'background.paper',\n      backgroundColor: '#fb6840',\n    },\n    '& .plat-tag .delete-icon': {\n      display: 'inline-block',\n      color: 'background.default',\n      backgroundColor: '#fdc3a4',\n      verticalAlign: 'text-bottom',\n      fontWeight: 'bold',\n      textAlign: 'center',\n      userSelect: 'none',\n      fontSize: '0.8rem',\n      borderRadius: '3em',\n      lineHeight: 1.5,\n      width: '1.5em',\n      transition: 'all 0.2s linear',\n      marginLeft: '0.3em',\n      transform: 'rotate(0deg)',\n    },\n    '& .plat-tag.add-tag': {\n      display: 'none',\n    },\n    '& .delete-wrapper .plat-tag': {\n      color: 'background.darkPaper',\n      backgroundColor: '#524d4d',\n    },\n  },\n}\n\nconst mapStateToProps = state => {\n  return {\n    posLayoutDrafts: state.posLayoutDrafts\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  { fetchPriceMapping, editPosLayoutDrafts, addPosLayoutDraft, deletePosLayoutDraft }\n)(PlatTagList);","import React, { useState } from 'react'\nimport { Box, Grid } from '@mui/material'\nimport GridInput from './GridInput'\nimport CommList from './CommList'\nimport PlatTagList from './PlatTagList'\nimport withAuth from '../Auth/withAuth'\n\n\nconst TouchPlatformBackstage = () => {\n  const [isDeleting, setIsDeleting] = useState(false)\n  const [currentLayoutIndex, setCurrentLayoutIndex] = useState(0)\n  const [recordedLayoutIndex, setRecordedLayoutIndex] = useState(null)\n  const [currentLayoutItemIndex, setCurrentLayoutItemIndex] = useState(0)\n\n  return (\n    <Box id=\"touch-platform-backstage\" sx={touchPlatformStyle}>\n      <Grid container sx={{\n        maxWidth: 1600,\n        margin: '0 auto',\n        boxShadow: '0px 0px 12px -6px #cccccc',\n        bgcolor: 'background.light',\n      }}>\n\n        <Grid item xs={12} sm={3} className={`left-col ${isDeleting ? 'deleting' : ''}`}>\n          <CommList\n            isDeleting={isDeleting}\n            currentLayoutIndex={currentLayoutIndex}\n            currentLayoutItemIndex={currentLayoutItemIndex}\n            setCurrentLayoutIndex={setCurrentLayoutIndex}\n            setCurrentLayoutItemIndex={setCurrentLayoutItemIndex}\n          />\n          <div className=\"mask-field\"></div>\n        </Grid>\n\n        <Grid item xs={12} sm={9} className={`right-col ${isDeleting ? 'deleting' : ''}`}>\n          <PlatTagList\n            isDeleting={isDeleting}\n            currentLayoutIndex={currentLayoutIndex}\n            recordedLayoutIndex={recordedLayoutIndex}\n            setIsDeleting={setIsDeleting}\n            setCurrentLayoutIndex={setCurrentLayoutIndex}\n            setRecordedLayoutIndex={setRecordedLayoutIndex}\n            setCurrentLayoutItemIndex={setCurrentLayoutItemIndex}\n          />\n          <GridInput\n            isDeleting={isDeleting}\n            currentLayoutIndex={currentLayoutIndex}\n            recordedLayoutIndex={recordedLayoutIndex}\n            currentLayoutItemIndex={currentLayoutItemIndex}\n            setCurrentLayoutIndex={setCurrentLayoutIndex}\n            setRecordedLayoutIndex={setRecordedLayoutIndex}\n            setCurrentLayoutItemIndex={setCurrentLayoutItemIndex}\n          />\n          <div className=\"mask-field\"></div>\n        </Grid>\n      </Grid>\n    </Box>\n  )\n}\n\nconst touchPlatformStyle = {\n  bgcolor: 'background.paper',\n  userSelect: 'none',\n  '& > .row': {\n    px: 0,\n  },\n  '& .left-col': {\n    position: 'relative',\n    display: 'flex',\n    height: 'calc(100vh - 2.5rem)',\n    padding: 0,\n  },\n  '& .right-col': {\n    position: 'relative',\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100vh',\n    padding: 0,\n  },\n  '& .mask-field': {\n    display: 'none',\n  },\n  '& .deleting .mask-field': {\n    position: 'absolute',\n    display: 'block',\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: 'calc(100vh - 2.5rem)',\n    zIndex: 100,\n    bgcolor: '#ffeae0a8',\n  },\n  '@media (min-width: 600px)': {\n    '& .right-col': {\n      height: 'calc(100vh - 2.5rem)',\n    },\n  }\n}\n\nexport default withAuth()(TouchPlatformBackstage)"],"sourceRoot":""}