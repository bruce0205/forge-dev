{"version":3,"sources":["components/Auth/withAuth.js","components/CommManage/CommManageList.js","components/CommManage/CommManageClassList.js","components/CommManage/CommManage.js"],"names":["authLevelMapping","shop","company","enterprise","withAuth","authLevel","ChildComponent","connect","state","auth","authenticated","level","props","history","useEffect","push","commTableStyle","flex","display","flexDirection","minHeight","pb","backgroundColor","lineHeight","alignItems","width","textAlign","paddingRight","overflowY","overflowX","bgcolor","borderBottom","overflow","transition","zIndex","padding","fontWeight","CommManageList","useState","searchName","setSearchName","commParams","setCommParams","classId","setClassId","secondaryFlag","setSecondaryFlag","secondaryClassId","setSecondaryClassId","thirdFlag","setThirdFlag","thirdClassId","setThirdClassId","useSelector","useSWR","sort","limit","commsData","data","commsError","error","catRank","commClassesData","commClassesError","parent","secondaryClassesData","secondaryError","thirdClassesData","thirdError","comms","list","classes","secondaryClasses","thirdClasses","fireErrorToast","numb","onCategoryChange","e","a","categoryId","target","value","params","name","onSecondaryCategoryChange","renderedClasses","map","commClass","inputString","categoryDescription","replaceAll","renderedItems","item","className","Typography","noWrap","variant","title","stockId","description","price","stockCategory","Fragment","Grid","xs","md","id","sx","height","color","pt","paddingBottom","borderColor","borderRight","Box","component","border","borderTopLeftRadius","borderBottomLeftRadius","borderLeft","letterSpacing","borderTopRightRadius","borderBottomRightRadius","placeholder","type","onChange","onClick","preventDefault","length","Array","from","index","Skeleton","animation","filterString","styles","classList","mb","p","pr","borderRadius","theme","palette","text","secondary","borderTop","disabled","fontSize","pl","addClassCard","position","justifyContent","cursor","userSelect","transform","textShadow","outlineColor","primary","main","CommManageClassList","commClasses","classesResult","origin","originCopy","JSON","parse","stringify","originLength","Object","keys","i","forEach","parentNode","targetParent","find","children","distributeCatRankObj","result","arrToCatRankObj","container","deepRenderClasses","contentMixin","enhance","compose","maxWidth","margin","boxShadow"],"mappings":"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","file":"static/js/13.c968250b.chunk.js","sourcesContent":["import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\n\nconst authLevelMapping = {\n  shop: 5,\n  company: 10,\n  enterprise: 15\n}\n\nconst withAuth = authLevel => ChildComponent => {\n  const ComposedComponent = props => {\n    const { auth, level, history } = props\n\n    useEffect(() => {\n      if (!auth) {\n        history.push('/signin')\n        return\n      }\n      if (authLevel && (!level || authLevelMapping[authLevel] > authLevelMapping[level])) {\n        history.push('/')\n        return\n      }\n    }, [auth, level, history])\n\n    return (\n      <ChildComponent {...props} />\n    )\n  }\n\n  const mapStateToProps = state => {\n    return {\n      auth: state.auth.authenticated,\n      level: state.auth.level\n    }\n  }\n\n  return connect(mapStateToProps)(ComposedComponent)\n}\n\nexport default withAuth","import React, { useState } from 'react'\nimport useSWR from 'swr'\nimport { useSelector } from 'react-redux'\nimport { Box, Grid, Typography, Skeleton } from '@mui/material'\nimport { fireErrorToast } from '../../helpers/sweetAlert'\n\nconst listLoadingSkeleton = (numb) => {\n  return Array.from({ length: numb }).map((item, index) => {\n    return (\n      <Box key={index}>\n        <Skeleton key={index} variant=\"rectangular\" animation=\"wave\" width=\"100%\" height=\"2.5em\" />\n      </Box>\n    )\n  })\n}\n\nconst CommManageList = () => {\n  const [searchName, setSearchName] = useState('')\n  const [commParams, setCommParams] = useState({})\n\n  const [classId, setClassId] = useState('')\n  const [secondaryFlag, setSecondaryFlag] = useState(false)\n  const [secondaryClassId, setSecondaryClassId] = useState('')\n  const [thirdFlag, setThirdFlag] = useState(false)\n  const [thirdClassId, setThirdClassId] = useState('')\n\n  const auth = useSelector(state => state.auth)\n\n  const { data: commsData, error: commsError } = useSWR(['/stock-master', auth.authenticated, {\n    sort: 'sale_start_date desc',\n    limit: 15,\n    ...commParams,\n  }])\n\n  const { data: commClassesData, error: commClassesError } = useSWR(['/stock-category', auth.authenticated, {\n    limit: 'zero',\n    catRank: 1,\n  }])\n\n  const { data: secondaryClassesData, error: secondaryError } = useSWR(secondaryFlag\n    ? ['/stock-category', auth.authenticated, {\n      limit: 'zero',\n      catRank: 2,\n      parent: classId,\n    }]\n    : null\n  )\n\n  const { data: thirdClassesData, error: thirdError } = useSWR(thirdFlag\n    ? ['/stock-category', auth.authenticated, {\n      limit: 'zero',\n      catRank: 3,\n      parent: secondaryClassId,\n    }]\n    : null\n  )\n\n  const comms = commsData ? commsData.list : []\n  const classes = commClassesData ? commClassesData.list : []\n  const secondaryClasses = secondaryClassesData ? secondaryClassesData.list : []\n  const thirdClasses = thirdClassesData ? thirdClassesData.list : []\n\n\n  if (commsError) fireErrorToast(commsError, '#comm-mange')\n  if (commClassesError) fireErrorToast(commClassesError, '#comm-mange')\n  if (secondaryError) fireErrorToast(secondaryError, '#comm-mange')\n  if (thirdError) fireErrorToast(thirdError, '#comm-mange')\n\n  const onSearchClick = e => {\n    e.preventDefault()\n    const params = searchName\n      ? {\n        name: searchName,\n        categoryId: thirdClassId || secondaryClassId || classId,\n      } : {\n        categoryId: thirdClassId || secondaryClassId || classId,\n      }\n    setCommParams(params)\n  }\n\n  const onCategoryChange = async (e) => {\n    const categoryId = e.target.value\n    const params = categoryId\n      ? { categoryId, name: searchName }\n      : { name: searchName }\n    setClassId(categoryId)\n    setSecondaryClassId('')\n    setThirdClassId('')\n    setSecondaryFlag(true)\n    setThirdFlag(false)\n    setCommParams(params)\n  }\n\n  const onSecondaryCategoryChange = async (e) => {\n    const categoryId = e.target.value\n    const params = categoryId\n      ? { categoryId, name: searchName }\n      : { categoryId: classId, name: searchName }\n    setSecondaryClassId(categoryId)\n    setThirdClassId('')\n    setThirdFlag(true)\n    setCommParams(params)\n  }\n\n  const onThirdCategoryChange = e => {\n    const categoryId = e.target.value\n    const params = categoryId\n      ? { categoryId, name: searchName }\n      : { categoryId: secondaryClassId || classId, name: searchName }\n    setThirdClassId(categoryId)\n    setCommParams(params)\n  }\n\n  const filterString = inputString => {\n    return inputString.replaceAll(/[[\\]]/g, '')\n  }\n\n  const renderedClasses = classes => {\n    return classes.map(commClass => (\n      <option key={commClass.categoryId} value={commClass.categoryId}>\n        {filterString(commClass.categoryDescription)}\n      </option>\n    ))\n  }\n\n  const renderedItems = comms.map(item => {\n    // const active = item.stockId === previousEditId ? 'active' : null\n    // const commClass = props.commClasses.find(i => i.ID === item.classId);\n    return (\n      <div\n        key={item.stockId}\n      // className={active}\n      >\n        <div className=\"comm-info\">\n          <span className=\"comm-id\">\n            <Typography noWrap={true} variant=\"body2\" title={item.stockId}>\n              {item.stockId}\n            </Typography>\n          </span>\n          <span className=\"comm-name\">\n            <Typography noWrap={true} variant=\"body2\" title={item.description}>\n              {item.description}\n            </Typography>\n          </span>\n          <span className=\"comm-price\">\n            <Typography noWrap={true} variant=\"body2\" title={item.price ? item.price.price : 0}>\n              {item.price ? item.price.price : 0}\n            </Typography>\n          </span>\n          <span className=\"comm-class-name\">\n            <Typography noWrap={true} variant=\"body2\" title={item.stockCategory.categoryDescription}>\n              {item.stockCategory.categoryDescription}\n            </Typography>\n            {/* {commClass ? commClass.name : '- 類別已被刪除 -'} */}\n          </span>\n          {/* <span className=\"comm-delete\" onClick={() => onCommDeleteClick(item)}>\n            <DeleteOutlineIcon />\n          </span> */}\n        </div>\n        {/* <div className=\"comm-btn\" onClick={() => onCommEditClick(item)}>\n          修改\n        </div> */}\n      </div>\n    )\n  })\n\n  return (\n    <React.Fragment>\n      <Grid item xs={12} md={7} id=\"comm-manage-list\"\n        sx={{\n          display: 'flex',\n          height: 'calc(100vh - 2.5rem)',\n          bgcolor: 'background.paper',\n          flexDirection: 'column',\n          padding: '0 1em 2em',\n          color: '#3c3c3c',\n          '& h5': {\n            pt: '1.5rem',\n            pb: '0.5rem',\n            fontWeight: 'bold',\n          },\n          '& .comm-classes': {\n            paddingBottom: '0.75em',\n          },\n          '& .comm-classes select': {\n            width: '100%',\n            color: '#666666',\n            borderColor: '#cccccc',\n          },\n          '@media (min-width: 960px)': {\n            borderRight: '3px dashed #cccccc',\n          },\n        }}\n      >\n        <Typography variant=\"h5\">\n          商品目錄\n        </Typography>\n\n        <Box component=\"form\" className=\"comm-search\"\n          sx={{\n            padding: '0 0 0.75em',\n            '& input[type=\"text\"]': {\n              width: '80%',\n              border: '1px solid #c4c4c4',\n              borderRight: 'none',\n              lineHeight: 1.75,\n              borderTopLeftRadius: '0.3em',\n              borderBottomLeftRadius: '0.3em',\n            },\n            '& input[type=\"submit\"]': {\n              width: '20%',\n              lineHeight: 1.75,\n              border: '1px solid #c4c4c4',\n              borderLeft: 'none',\n              letterSpacing: '0.2em',\n              color: 'background.default',\n              bgcolor: 'primary.light',\n              borderTopRightRadius: '0.3em',\n              borderBottomRightRadius: '0.3em',\n            },\n          }}\n        >\n          <input\n            placeholder=\"請輸入商品名稱\"\n            type=\"text\"\n            value={searchName}\n            onChange={e => setSearchName(e.target.value)}\n          />\n          <input type=\"submit\" value=\"搜尋\" onClick={onSearchClick} />\n        </Box>\n\n        <Box className=\"comm-classes\">\n          <select onChange={onCategoryChange}>\n            <option value=\"\">全部大類別</option>\n            {renderedClasses(classes)}\n          </select>\n        </Box>\n\n        {(secondaryClasses.length > 0) && (\n          <Box className=\"comm-classes\">\n            <select onChange={onSecondaryCategoryChange}>\n              <option value=\"\">全部次類別</option>\n              {renderedClasses(secondaryClasses)}\n            </select>\n          </Box>\n        )}\n\n        {(thirdClasses.length > 0) && (\n          <Box className=\"comm-classes\">\n            <select onChange={onThirdCategoryChange}>\n              <option value=\"\">全部小類別</option>\n              {renderedClasses(thirdClasses)}\n            </select>\n          </Box>\n        )}\n\n        <Box className=\"comm-table\" sx={commTableStyle}>\n          <div className=\"comm-header\">\n            <div className=\"comm-info-header\">\n              <span className=\"comm-id\">ID</span>\n              <span className=\"comm-name\">名稱</span>\n              <span className=\"comm-price\">價格</span>\n              <span className=\"comm-class-name\">類別</span>\n              {/* <span className=\"comm-delete\">-</span> */}\n            </div>\n            <div className=\"comm-btn-header\">-</div>\n          </div>\n\n          <div className=\"comm-list\">\n            <div className=\"comm-list-wrapper\">\n              {(!commsData && !commsError)\n                ? (\n                  listLoadingSkeleton(15)\n                )\n                : (\n                  renderedItems\n                )\n              }\n            </div>\n          </div>\n        </Box>\n\n      </Grid>\n    </React.Fragment>\n  )\n}\n\nconst commTableStyle = {\n  flex: '1 1 auto',\n  display: 'flex',\n  flexDirection: 'column',\n  minHeight: 0,\n  pb: '2rem',\n  '& .comm-header': {\n    backgroundColor: '#dadada',\n    lineHeight: 2,\n    '& .comm-info-header': {\n      display: 'inline-flex',\n      alignItems: 'center',\n      width: '85%',\n    },\n    '& .comm-btn-header': {\n      display: 'inline-block',\n      width: '15%',\n      textAlign: 'center',\n      paddingRight: '5px',\n    },\n  },\n  '& .comm-list': {\n    overflowY: 'auto',\n    overflowX: 'hidden',\n    '& .comm-list-wrapper > div': {\n      lineHeight: 2.5,\n      bgcolor: 'background.paper',\n      borderBottom: '1px dashed #666666',\n      overflow: 'hidden',\n      transition: 'all 0.04s linear',\n    },\n    '& .comm-list-wrapper > div.active': {\n      zIndex: 2,\n      backgroundColor: 'background.default',\n    },\n    '& .comm-list-wrapper > div:hover': {\n      zIndex: 2,\n      backgroundColor: ' #e4e4e4',\n    },\n    '& .comm-info': {\n      display: 'inline-flex',\n      alignItems: 'center',\n      width: '85%',\n    },\n    // '& .comm-btn': {\n    //   backgroundColor: '#ffffffaa',\n    //   display: 'inline-block',\n    //   borderTopLeftRadius: '0.2em',\n    //   textAlign: 'center',\n    //   cursor: 'pointer',\n    //   fontSize: '0.95rem',\n    //   lineHeight: 2.55,\n    //   letterSpacing: '0.06em',\n    //   width: '15%',\n    //   boxShadow: '-3px 0px 24px -2px #e7e7e7',\n    //   borderBottomLeftRadius: '1em',\n    // },\n    // '& .comm-btn:hover': {\n    //   transform: 'translateX(-0.2em) scale(1.05)',\n    // },\n  },\n  '& .comm-id': {\n    display: 'inline-block',\n    width: '20%',\n    padding: '0 0.5rem',\n  },\n  '& .comm-name': {\n    display: 'inline-block',\n    width: '35%',\n    padding: '0 0.5rem',\n    '& p': {\n      fontWeight: 'bold',\n    },\n  },\n  '& .comm-price': {\n    display: 'inline-block',\n    width: '17.5%',\n    padding: '0 0.5rem',\n    textAlign: 'center',\n  },\n  '& .comm-class-name': {\n    display: 'inline-block',\n    width: '25%',\n    padding: '0 0.5rem',\n    textAlign: 'center',\n  },\n  // '& .comm-delete': {\n  //   display: 'inline-block',\n  //   width: '5%',\n  //   textAlign: 'center',\n  //   '& .MuiSvgIcon-root': {\n  //     fontSize: '1.25rem',\n  //     color: '#e6e6e6',\n  //     cursor: 'pointer',\n  //   },\n  //   '& .MuiSvgIcon-root:hover': {\n  //     color: '#f7c0aa',\n  //   },\n  // },\n}\n\n\nexport default CommManageList","import React from 'react'\nimport useSWR from 'swr'\nimport { useSelector } from 'react-redux'\nimport { Grid, Typography, Skeleton } from '@mui/material'\nimport { fireErrorToast } from '../../helpers/sweetAlert'\n\nconst filterString = inputString => {\n  return inputString.replaceAll(/[[\\]-]/g, '')\n}\n\nexport const arrToCatRankObj = (originArr = []) => {\n  const result = {}\n  originArr.forEach(item => {\n    if (!result[item.catRank]) {\n      result[item.catRank] = []\n    }\n    result[item.catRank].push(item)\n  })\n\n  return result\n}\n\nexport const distributeCatRankObj = (origin = {}) => {\n  const originCopy = JSON.parse(JSON.stringify(origin))\n  const originLength = Object.keys(originCopy).length\n  for (let i = originLength; i >= 1; i--) {\n    originCopy[i].forEach(item => {\n      const parentNode = originCopy[i - 1]\n      if (parentNode) {\n        const targetParent = parentNode.find(parent => parent.categoryId === item.parent)\n        if (targetParent) {\n          targetParent.children = targetParent.children || []\n          targetParent.children.push(item)\n        }\n      }\n    })\n  }\n  return originCopy[1]\n}\n\nconst blockLoadingSkeleton = (numb) => {\n  return Array.from({ length: numb }).map((item, index) => {\n    return (\n      <Grid className=\"skeleton\" item xs={12} key={index}>\n        <Skeleton variant=\"rectangular\" animation=\"wave\" width=\"100%\" height=\"20rem\" />\n      </Grid>\n    )\n  })\n}\n\nconst CommManageClassList = () => {\n  const auth = useSelector(state => state.auth)\n\n  const { data: commClassesData, error: commClassesError } = useSWR(['/stock-category', auth.authenticated, { limit: 'zero', }])\n  const commClasses = commClassesData ? commClassesData.list : []\n\n  if (commClassesError) fireErrorToast(commClassesError, '#comm-mange')\n\n  const classesResult = distributeCatRankObj(arrToCatRankObj(commClasses))\n\n  const deepRenderClasses = (origin = [], level = 1) => {\n    return origin.map((item, index) => {\n      const { categoryId, categoryDescription, children } = item\n      const contentMixin = (\n        <div className=\"class-item\" key={categoryId}>\n          <Typography className=\"class-item-name\" variant=\"subtitle1\" noWrap>\n\n            <span className=\"id-span\">\n              {categoryId}\n            </span>\n            &nbsp;-&nbsp;\n            {filterString(categoryDescription)}\n          </Typography>\n\n          {children && children.length > 0 && (\n            <div className=\"class-item-children\">\n              {deepRenderClasses(children, level + 1)}\n            </div>\n          )}\n        </div>\n      )\n      return level === 1\n        ? (\n          <Grid className=\"class-wrapper\" item xs={12} key={categoryId}>\n            {contentMixin}\n          </Grid>\n        )\n        : contentMixin\n    })\n  }\n\n  return (\n    <React.Fragment>\n      <Grid item xs={12} md={5} id=\"comm-manage-class-list\"\n        sx={{\n          padding: '0 1.5em',\n          bgcolor: 'background.paper',\n          height: '100vh',\n          color: '#3c3c3c',\n          overflow: 'auto',\n          '@media (min-width: 960px)': {\n            height: 'calc(100vh - 2.5rem)',\n          },\n          '& h5': {\n            pt: '1.5rem',\n            pb: '0.5rem',\n            fontWeight: 'bold',\n          },\n        }}\n      >\n        <Typography variant=\"h5\">\n          商品類別目錄\n        </Typography>\n\n        <Grid container sx={styles.classList}>\n          {\n            (!commClassesData && !commClassesError)\n              ? blockLoadingSkeleton(3)\n              : deepRenderClasses(classesResult)\n          }\n\n        </Grid>\n      </Grid>\n    </React.Fragment>\n  )\n}\n\nconst styles = {\n  classList: {\n    '& .skeleton': {\n      mb: '2rem',\n    },\n    '& .class-wrapper': {\n      p: '0.5rem',\n      pr: '1rem',\n      mb: '2rem',\n      borderRadius: 1,\n      border: theme => `1px solid ${theme.palette.text.secondary}`,\n      '& > .class-item': {\n        borderTop: 'none',\n      },\n      '& > .class-item > .class-item-name': {\n        fontWeight: 'bold',\n      },\n      '& > .class-item > .class-item-name .id-span': {\n        color: 'text.primary',\n      },\n    },\n    '& .class-item': {\n      borderTop: theme => `1px solid ${theme.palette.text.disabled}`,\n    },\n    '& .id-span': {\n      color: 'text.secondary',\n      fontSize: '0.75rem',\n    },\n    '& .class-item-children': {\n      pl: '1.5rem',\n    },\n  },\n  addClassCard: {\n    position: 'relative',\n    backgroundColor: 'background.default',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    height: '6em',\n    borderRadius: '0.5em',\n    cursor: 'grab',\n    userSelect: 'none',\n    '& span': {\n      display: 'inline-block',\n      color: 'background.default',\n      fontSize: '1.25em',\n      lineHeight: '0.8',\n      fontWeight: 'bold',\n      paddingBottom: '1px',\n      borderRadius: '5em',\n      transform: 'rotate(45deg)',\n      textShadow: '2px 0px 3px #dedede',\n    },\n    '& .add-input': {\n      width: '100%',\n      borderTopLeftRadius: '0.3em',\n      borderTopRightRadius: '0.3em',\n      border: 'none',\n      textAlign: 'center',\n      backgroundColor: '#f6fbff',\n      lineHeight: 4.5,\n      outlineColor: theme => theme.palette.primary.main,\n    },\n    '& .add-cancel': {\n      width: '50%',\n      border: 'none',\n      backgroundColor: '#d6d6d6',\n      borderBottomLeftRadius: '0.3em',\n    },\n    '& .add-submit': {\n      width: '50%',\n      border: 'none',\n      backgroundColor: '#d0ebff',\n      borderBottomRightRadius: '0.3em',\n    },\n  },\n}\n\nexport default CommManageClassList\n","import React from 'react'\nimport { compose } from 'redux'\nimport { Grid, Box } from '@mui/material'\nimport CommManageList from './CommManageList'\nimport CommManageClassList from './CommManageClassList'\nimport withAuth from '../Auth/withAuth'\n\nconst CommManage = () => {\n\n  return (\n    <Box id=\"comm-mange\" sx={{\n      position: 'relative',\n      bgcolor: 'background.paper',\n      '& .comm-manage-container': {\n        maxWidth: '1600px',\n        margin: '0 auto',\n        boxShadow: '0px 0px 12px -6px #cccccc',\n      },\n    }}>\n      <Grid container className=\"comm-manage-container\">\n        <CommManageList />\n        <CommManageClassList />\n      </Grid>\n    </Box>\n  )\n}\n\nconst enhance = compose(\n  withAuth(),\n)\n\nexport default enhance(CommManage)"],"sourceRoot":""}