(this["webpackJsonpbonvies-pos"]=this["webpackJsonpbonvies-pos"]||[]).push([[9],{253:function(e,t,n){"use strict";var a=n(5),r=n(0),c=n(54),i=n(2),s={shop:5,company:10,enterprise:15};t.a=function(e){return function(t){return Object(c.b)((function(e){return{auth:e.auth.authenticated,level:e.auth.level}}))((function(n){var c=n.auth,o=n.level,l=n.history;return Object(r.useEffect)((function(){c?e&&(!o||s[e]>s[o])&&l.push("/"):l.push("/signin")}),[c,o,l]),Object(i.jsx)(t,Object(a.a)({},n))}))}}},255:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var a=function(e,t){var n=new Date(e).getTime();return r("previous"===t?n-864e5:n+864e5)},r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n=new Date(e),a=n.getMonth()+1,r=a.toString().padStart(2,"0"),c=n.getDate(),i=c.toString().padStart(2,"0");return n.getFullYear().toString()+t+r+t+i}},260:function(e,t,n){"use strict";var a=n(7),r=n(10),c=n(3),i=n(5),s=n(16),o=n(0),l=n(54),d=n(102),m=n(11),u=n(248),b=n.n(u),j=n(45),p=n(268),h=n(313),x=n(355),f=n(244),O=n(245),g=n(356),v=n(2),y={display:"flex",padding:"0.5em 0 0.75em","& .input-field":{flex:"0 0 85%",color:"secondary.main",paddingRight:"0.5em",display:"flex",flexWrap:"wrap"},"& .input-wrapper":{flex:"0 0 50%",py:"0.375em",pr:"0.5em",display:"flex",alignItems:"center",flexWrap:"wrap",position:"relative","& span":{color:"error.light",fontSize:"0.75rem",position:"absolute",bottom:"0",transform:"translateY(50%)"}},"& label":{fontWeight:"bold",fontSize:"1.125rem"},"& input":{flexGrow:1,lineHeight:1.25,padding:"0 0.25em","&::placeholder":{fontSize:"0.875rem",letterSpacing:"0.04em"},"&.error::placeholder":{color:"error.light"}},"& input.input-md":{width:"calc(100% - 4em)"},"& input.input-sm":{width:"calc(100% - 6.5em)"},"& .submit-field":{flex:"0 0 15%",display:"flex",flexWrap:"wrap",justifyContent:"center","& .submitBtn":{flex:"0 0 100%",color:"background.paper",fontWeight:"bold",fontSize:"1.125rem",display:"inline-flex",justifyContent:"center",bgcolor:function(e){return e.palette.primary.main},borderRadius:"0.5em",borderBottomLeftRadius:0,borderBottomRightRadius:0,border:"none","&:hover":{bgcolor:function(e){return e.palette.primary.light}}},"& .newBtn":{flex:"0 0 100%",lineHeight:1.5,color:"background.paper",fontWeight:"bold",borderRadius:"0.5em",borderTopLeftRadius:0,borderTopRightRadius:0,bgcolor:"#6aabc3","&:hover":{bgcolor:"#72b9d3"}}}};t.a=Object(l.b)((function(e){return{auth:e.auth,members:e.members}}),{fetchMembers:d.b})((function(e){var t=e.auth,n=e.open,l=e.members,d=e.handleClose,u=e.fetchMembers,N=e.onSelectClick,S=Object(o.useState)({}),C=Object(s.a)(S,2),k=C[0],w=C[1],P=Object(o.useState)({}),W=Object(s.a)(P,2),I=W[0],D=W[1];Object(o.useEffect)((function(){n&&u()}),[n,u]);var B,R=function(e){var t=e.target,n=t.name,a=t.value,r=Object(i.a)(Object(i.a)({},k),{},Object(c.a)({},n,a));w(r)},z=function(){var e=Object(r.a)(Object(a.a)().mark((function e(n){var r,c,i,s;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!M()){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,r={memberName:k.name,phone:k.phone},e.next=7,m.e.post("",r,{headers:{Authorization:"Bearer "+t.authenticated}});case 7:c=e.sent,console.log(c),u(),w({}),Object(j.c)("\u65b0\u589e\u6703\u54e1\u6210\u529f","success"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),Object(j.c)("\u932f\u8aa4: ".concat((null===e.t0||void 0===e.t0||null===(i=e.t0.response)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.error)||"\u65b0\u589e\u6703\u54e1\u5931\u6557"),"error");case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e={};return k.phone?"0"!==k.phone[0]&&(e.phone="\u96fb\u8a71\u683c\u5f0f\u932f\u8aa4"):e.phone="\u96fb\u8a71\u70ba\u5fc5\u586b",k.name||(e.name="\u59d3\u540d\u70ba\u5fc5\u586b"),D(e),Object.keys(e).length>0};return Object(v.jsxs)(x.a,{id:"dialog-member",open:n,onClose:d,"aria-labelledby":"dialog-member",fullWidth:!0,maxWidth:"sm",PaperProps:{sx:{maxWidth:700}},children:[Object(v.jsxs)(f.a,{sx:{margin:0,padding:"0.375em 1.75em 0.25em",bgcolor:"background.default","& h6":{color:"secondary.main",fontSize:"1.25rem",fontWeight:"bold"}},children:[Object(v.jsx)(p.a,{variant:"h6",children:"\u6703\u54e1\u9078\u53d6"}),d?Object(v.jsx)(O.a,{"aria-label":"close",onClick:d,sx:{position:"absolute",right:"0.5em",top:"0.25em",color:"#cb5c5c",padding:0},children:Object(v.jsx)(b.a,{sx:{width:"1.25em",height:"1.25em"}})}):null]}),Object(v.jsxs)(g.a,{sx:{padding:"0.25em 1.75em 2em",bgcolor:"background.paper"},children:[Object(v.jsxs)(f.a,{component:"form",sx:y,children:[Object(v.jsxs)("div",{className:"input-field",children:[Object(v.jsxs)("div",{className:"input-wrapper",children:[Object(v.jsx)("label",{children:"\u59d3\u540d : \xa0"}),Object(v.jsx)("input",{className:"input-md ".concat(I.name?"error":""),type:"text",name:"name",value:k.name||"",onChange:R,autoComplete:"off"}),I.name&&Object(v.jsx)("span",{children:I.name})]}),Object(v.jsxs)("div",{className:"input-wrapper",children:[Object(v.jsx)("label",{children:"\u96fb\u8a71 : \xa0"}),Object(v.jsx)("input",{className:"input-md ".concat(I.phone?"error":""),type:"text",name:"phone",value:k.phone||"",onChange:R,autoComplete:"off"}),I.phone&&Object(v.jsx)("span",{children:I.phone})]}),Object(v.jsxs)("div",{className:"input-wrapper",children:[Object(v.jsx)("label",{children:"\u5bf5\u7269 : \xa0"}),Object(v.jsx)("input",{className:"input-sm ".concat(I.petName?"error":""),type:"text",name:"petName",value:k.petName||"",onChange:R,autoComplete:"off"})]})]}),Object(v.jsxs)("div",{className:"submit-field",children:[Object(v.jsx)(h.a,{className:"submitBtn",type:"submit",onClick:function(e){e.preventDefault(),u(k),D({})},children:"\u641c\u5c0b"}),Object(v.jsx)(h.a,{className:"newBtn",variant:"contained",color:"primary",disableElevation:!0,onClick:z,children:"\u65b0\u589e"})]})]}),Object(v.jsxs)("div",{children:[Object(v.jsxs)(f.a,{sx:{display:"flex",bgcolor:"secondary.main","& > div":{display:"flex",justifyContent:"center",alignItems:"center",fontSize:"1rem",borderRight:function(e){return"1px solid ".concat(e.palette.background.darkPaper)},color:"background.paper",height:"1.75em"},"& .id-sec":{flex:"0 0 17.5%"},"& .name-sec":{flex:"0 0 17.5%"},"& .mobile-sec":{flex:"0 0 25%"},"& .tel-sec":{flex:"0 0 25%"},"& .select-sec":{flex:"0 0 15%",borderRight:"none"}},children:[Object(v.jsx)("div",{className:"id-sec",children:"\u4ee3\u78bc"}),Object(v.jsx)("div",{className:"name-sec",children:"\u6703\u54e1\u540d\u7a31"}),Object(v.jsx)("div",{className:"mobile-sec",children:"\u624b\u6a5f\u865f\u78bc"}),Object(v.jsx)("div",{className:"tel-sec",children:"\u4f4f\u5bb6\u865f\u78bc"}),Object(v.jsx)("div",{className:"select-sec"})]}),Object(v.jsx)(f.a,{sx:{maxHeight:"14rem",overflow:"overlay","& .list-item":{display:"flex","& > div":{display:"flex",justifyContent:"center",alignItems:"center",fontSize:"1rem",borderRight:function(e){return"1px solid ".concat(e.palette.background.darkPaper)},color:"secondary.main",height:"2em",overflow:"hidden",padding:"0 0.5em"},"&:nth-of-type(2n + 1)":{bgcolor:"#ececec"},"& .id-sec":{flex:"0 0 17.5%"},"& .name-sec":{flex:"0 0 17.5%"},"& .mobile-sec":{flex:"0 0 25%"},"& .tel-sec":{flex:"0 0 25%"},"& .select-sec":{flex:"0 0 15%",borderRight:"none",overflow:"hidden"}}},children:(B=l,B.map((function(e){return Object(v.jsxs)("div",{className:"list-item",children:[Object(v.jsx)("div",{className:"id-sec",children:Object(v.jsx)(p.a,{variant:"body1",noWrap:!0,children:e.memberCode||"-"})}),Object(v.jsx)("div",{className:"name-sec",children:Object(v.jsx)(p.a,{variant:"body1",noWrap:!0,title:e.memberName,children:e.memberName})}),Object(v.jsx)("div",{className:"mobile-sec",children:Object(v.jsx)(p.a,{variant:"body1",noWrap:!0,children:e.phone||"-"})}),Object(v.jsx)("div",{className:"tel-sec",children:Object(v.jsx)(p.a,{variant:"body1",noWrap:!0,children:e.homePhone||"-"})}),Object(v.jsx)("div",{className:"select-sec",onClick:function(){return N(e)},children:Object(v.jsx)(h.a,{sx:{minWidth:"3.5em",height:"1.75em",padding:"0",color:"background.paper",bgcolor:function(e){return e.palette.primary.main},"&:hover":{bgcolor:"#fabd5e"}},children:"\u9078\u53d6"})})]},e.id)})))})]})]})]})}))},261:function(e,t,n){"use strict";n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return d}));n(0);var a=n(244),r=n(277),c=n(314),i=n(2),s=function(e){return new Date(e).toLocaleString()},o=function(e){return e.map((function(e){var t;return Object(i.jsxs)("div",{className:"received-sec",children:[Object(i.jsx)("span",{children:"".concat(null===(t=e.SalePointPayment)||void 0===t?void 0:t.paymentName," : ")}),Object(i.jsx)("span",{className:"main-value",children:e.value})]},e.id)}))},l=function(e){var t=e.list;return Object(i.jsxs)(a.a,{className:"order-table",children:[Object(i.jsxs)("div",{className:"table-header",children:[Object(i.jsx)("div",{className:"serial-sec",children:"\u9805\u6b21"}),Object(i.jsx)("div",{className:"name-sec",children:"\u5546\u54c1\u540d\u7a31"}),Object(i.jsx)("div",{className:"clerk-sec",children:"\u670d\u52d9\u54e1"}),Object(i.jsx)("div",{className:"price-sec",children:"\u5b9a\u50f9"}),Object(i.jsx)("div",{className:"quantity-sec",children:"\u6578\u91cf"}),Object(i.jsx)("div",{className:"discount-sec",children:"\u6298\u6578"}),Object(i.jsx)("div",{className:"total-sec",children:"\u5408\u8a08"})]}),Object(i.jsx)("div",{className:"table-list",children:t.map((function(e,t){return Object(i.jsxs)("div",{className:"table-item",children:[Object(i.jsx)("div",{className:"serial-sec",children:t+1}),Object(i.jsx)("div",{className:"name-sec",children:e.stockMaster&&e.stockMaster.description||e.stockDescription}),Object(i.jsx)("div",{className:"clerk-sec",children:e.user}),Object(i.jsx)("div",{className:"price-sec",children:e.price}),Object(i.jsx)("div",{className:"quantity-sec",children:e.quantity}),Object(i.jsx)("div",{className:"discount-sec",children:e.price*e.quantity-e.subTotal||""}),Object(i.jsx)("div",{className:"total-sec",children:e.subTotal})]},e.id)}))})]})},d={"& .table-header":{display:"flex",color:"background.paper",backgroundColor:"#a4a4a4","& > div":{display:"inline-flex",alignItems:"center",justifyContent:"center",textAlign:"center",padding:"0.25em 0.5em",wordBreak:"break-all",borderRight:function(e){return"1px solid ".concat(e.palette.background.paper)}},"& > div:last-child":{borderRight:"none"},"& .name-sec":{justifyContent:"flex-start",paddingLeft:"1.5em",paddingRight:"1.5em"}},"& .table-item":{display:"flex",color:"text.primary",backgroundColor:"background.darkPaper","&:nth-of-type(2n)":{backgroundColor:"background.paper"},"& > div":{display:"inline-flex",alignItems:"center",justifyContent:"center",textAlign:"center",padding:"0.5em 0.5em",wordBreak:"break-all",borderRight:function(e){return"1px solid ".concat(e.palette.background.paper)}},"& > div:last-of-type":{borderRight:"none"},"& .name-sec":{justifyContent:"flex-start",paddingLeft:"1.5em",paddingRight:"1.5em"}},"& .serial-sec":{flex:"0 0 5%",minWidth:"2rem"},"& .name-sec":{flex:"1 0 auto"},"& .clerk-sec":{flex:"0 0 10%"},"& .price-sec":{flex:"0 0 10%"},"& .quantity-sec":{flex:"0 0 10%"},"& .discount-sec":{flex:"0 0 10%"},"& .total-sec":{flex:"0 0 10%"}};t.b=function(e){var t,n,m,u,b=e.order,j=(null===b||void 0===b||null===(t=b.salesPayments)||void 0===t||null===(n=t.find((function(e){return Boolean(e.creditCard)})))||void 0===n?void 0:n.creditCard)||{};return Object(i.jsxs)(c.a,{sx:{width:"100%",minHeight:"100%",overflow:"hidden","& .order-table":d},children:[Object(i.jsxs)(r.a,{container:!0,alignItems:"center",sx:{px:"0.5rem",py:"0.25rem",bgcolor:function(e){return e.palette.background.default}},children:[Object(i.jsxs)(r.a,{item:!0,xs:!0,children:[Object(i.jsxs)(r.a,{container:!0,children:[Object(i.jsxs)(r.a,{item:!0,xs:!0,container:!0,children:[Object(i.jsx)(r.a,{item:!0,xs:"auto",children:"\u65e5\u671f :\xa0"}),Object(i.jsx)(r.a,{item:!0,xs:!0,className:"bold",children:s(b.date)})]}),Object(i.jsxs)(r.a,{item:!0,xs:!0,container:!0,children:[Object(i.jsx)(r.a,{item:!0,xs:"auto",children:"\u6703\u54e1 :\xa0"}),Object(i.jsx)(r.a,{item:!0,xs:!0,className:"bold",children:b.memberInfo?"".concat(b.memberInfo.memberName," | ").concat(b.memberInfo.phone):"---"})]}),Object(i.jsxs)(r.a,{item:!0,xs:!0,container:!0,children:[Object(i.jsx)(r.a,{item:!0,xs:"auto",children:"\u92b7\u552e\u54e1 :\xa0"}),Object(i.jsx)(r.a,{item:!0,xs:!0,className:"bold",children:b.salesman&&b.salesman.realName})]})]}),Object(i.jsxs)(r.a,{container:!0,children:[Object(i.jsxs)(r.a,{item:!0,xs:!0,container:!0,children:[Object(i.jsx)(r.a,{item:!0,xs:"auto",children:"\u9580\u5e02 :\xa0"}),Object(i.jsx)(r.a,{item:!0,xs:!0,className:"bold",children:(null===b||void 0===b||null===(m=b.cashRegister)||void 0===m||null===(u=m.salePoint)||void 0===u?void 0:u.salePointName)||"-"})]}),Object(i.jsxs)(r.a,{item:!0,xs:!0,container:!0,children:[Object(i.jsx)(r.a,{item:!0,xs:"auto",children:"\u767c\u7968 :\xa0"}),Object(i.jsx)(r.a,{item:!0,xs:!0,className:"bold",children:b.invoicePage?b.invoicePage.no:"\u7121\u767c\u7968\u8cc7\u8a0a"})]}),Object(i.jsxs)(r.a,{item:!0,xs:!0,container:!0,children:[Object(i.jsx)(r.a,{item:!0,xs:"auto",children:"\u670d\u52d9\u54e1 :\xa0"}),Object(i.jsx)(r.a,{item:!0,xs:!0,className:"bold",children:b.user&&b.user.realName})]})]})]}),Object(i.jsx)(r.a,{item:!0,xs:"auto",children:b.no})]}),Object(i.jsx)(l,{list:b.salesDetails||[]}),Object(i.jsxs)(r.a,{container:!0,justifyContent:"space-between",alignItems:"center",sx:{p:"0.25rem",borderTop:function(e){return"1px solid ".concat(e.palette.divider)}},children:[Object(i.jsxs)(r.a,{item:!0,xs:"auto",container:!0,flexDirection:"column",children:[Object(i.jsxs)(r.a,{item:!0,xs:!0,container:!0,children:[Object(i.jsx)(r.a,{item:!0,xs:"auto",children:"\u4fe1\u7528\u5361\u865f\u672b\u56db\u78bc :\xa0"}),Object(i.jsx)(r.a,{item:!0,xs:!0,className:"bold",children:j.cardNo?j.cardNo.replaceAll(" ","").slice(-4):"- - - -"})]}),Object(i.jsxs)(r.a,{item:!0,xs:!0,container:!0,children:[Object(i.jsx)(r.a,{item:!0,xs:"auto",children:"\u6388\u6b0a\u78bc :\xa0"}),Object(i.jsx)(r.a,{item:!0,xs:!0,className:"bold",children:j.approvalCode||"- - - -"})]})]}),Object(i.jsxs)(r.a,{item:!0,xs:"auto",children:[Object(i.jsx)(a.a,{className:"received-list",display:"inline-flex",sx:{"& > div":{pr:"1rem"},"& .main-value":{fontWeight:"bold"}},children:o(b.salesPayments||[])}),Object(i.jsxs)(a.a,{className:"total-sum",display:"inline-flex",sx:{fontSize:"1.25rem"},children:[Object(i.jsx)("span",{children:"\u7e3d\u91d1\u984d :\xa0"}),Object(i.jsx)("span",{className:"bold",children:"".concat(b?b.actualTotal:"- - -","\u5143")})]})]})]})]})}},269:function(e,t,n){"use strict";var a=n(12),r=n(7),c=n(10),i=n(16),s=n(0),o=n(54),l=n(248),d=n.n(l),m=n(266),u=n.n(m),b=n(277),j=n(314),p=n(268),h=n(355),x=n(244),f=n(245),O=n(356),g=n(362),v=n(313),y=n(315),N=n(351),S=n(2);var C=function(e){var t=e.salePoint,n=e.selectedSalePoints,a=e.handleSelectSalePoint;return Object(S.jsx)(y.a,{onClick:function(){return a(t)},children:Object(S.jsxs)(b.a,{container:!0,wrap:"nowrap",spacing:2,children:[Object(S.jsx)(b.a,{item:!0,container:!0,xs:"auto",alignItems:"center",children:Object(S.jsx)(N.a,{readOnly:!0,checked:n.some((function(e){return e.id===t.id}))})}),Object(S.jsx)(b.a,{item:!0,container:!0,xs:!0,alignItems:"center",zeroMinWidth:!0,children:Object(S.jsx)(p.a,{className:"salePoint-name",variant:"subtitle1",noWrap:!0,title:t.salePointName,children:t.salePointName})})]})})},k=n(11);var w={display:"flex",p:"1.5em 0 0rem",alignItems:"center",justifyContent:"flex-end","& .input-field":{flex:"0 0 30%",color:"secondary.main",paddingRight:"0.5em"},"& .input-wrapper":{padding:"0.375em 0"},"& label":{fontWeight:"bold",fontSize:"1.125rem"},"& input":{width:"calc(100% - 4em)",lineHeight:1.25,padding:"0 0.25em","&::placeholder":{fontSize:"0.875rem",letterSpacing:"0.04em"},"&.error::placeholder":{color:"error.light"}},"& .submit-field":{flex:"0 0 18%",display:"flex",flexWrap:"wrap",justifyContent:"center","& .submitBtn":{flex:"0 0 100%",fontWeight:"bold",fontSize:"1.125rem",display:"inline-flex",justifyContent:"center"},"& .primaryBtn":{color:"background.paper",bgcolor:function(e){return e.palette.primary.main},"&:hover":{bgcolor:function(e){return e.palette.primary.light}}}}};t.a=Object(o.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.auth,n=e.open,o=e.handleClose,l=e.onSalePointSelectClick,m=Object(s.useState)([]),y=Object(i.a)(m,2),N=y[0],P=y[1],W=Object(s.useState)([]),I=Object(i.a)(W,2),D=I[0],B=I[1];Object(s.useEffect)((function(){var e=function(){var e=Object(c.a)(Object(r.a)().mark((function e(){var n,a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.f.get("",{headers:{Authorization:"Bearer "+t.authenticated}});case 2:n=e.sent,a=n.data,P(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e(),function(){P([])}}),[t.authenticated]);var R=function(e){var t=D.some((function(t){return t.id===e.id}))?D.filter((function(t){return t.id!==e.id})):[].concat(Object(a.a)(D),[e]);B(t)};return Object(S.jsxs)(h.a,{id:"dialog-member",open:n,onClose:function(){B([]),o()},fullWidth:!0,maxWidth:"sm","aria-labelledby":"dialog-member",PaperProps:{sx:{maxWidth:800}},children:[Object(S.jsxs)(x.a,{sx:{margin:0,padding:"0.375em 1.75em 0.25em",bgcolor:"background.default","& h6":{color:"secondary.main",fontSize:"1.25rem",fontWeight:"bold"}},children:[Object(S.jsx)(p.a,{variant:"h6",children:"\u9580\u5e02\u9078\u53d6"}),o?Object(S.jsx)(f.a,{"aria-label":"close",onClick:o,sx:{position:"absolute",right:"0.5em",top:"0.25em",color:"error.main",padding:0},children:Object(S.jsx)(d.a,{sx:{width:"1.25em",height:"1.25em"}})}):null]}),Object(S.jsxs)(O.a,{sx:{padding:"0.25em 1.75em 2em",bgcolor:"background.paper"},children:[Object(S.jsxs)(b.a,{container:!0,alignItems:"flex-start",sx:{mt:"1.5rem",p:"0.5rem 0.25rem",bgcolor:"#eeeeee",borderRadius:2,"& hr":{height:"unset"}},children:[Object(S.jsxs)(b.a,{xs:12,md:!0,item:!0,children:[Object(S.jsx)(p.a,{variant:"subtitle1",sx:{p:"0.25rem 0.5rem",fontWeight:"bold"},children:"\u9580\u5e02\u5217\u8868"}),Object(S.jsx)(b.a,{container:!0,sx:{px:"0.5rem",pb:"2rem",maxHeight:400,overflowY:"auto",display:"flex",gap:"1rem","& .MuiCard-root":{p:"1.5rem 1rem"},"& .salePoint-name":{flex:"0 0 100%"},"& .card-grid":{flex:"0 0 calc(50% - 0.5rem)",maxWidth:"calc(50% - 0.5rem)","& .MuiPaper-root":{bgcolor:"background.default"}}},children:function(e,t){return e.map((function(e){return Object(S.jsx)("div",{className:"card-grid",children:Object(S.jsx)(C,{salePoint:e,selectedSalePoints:D,handleSelectSalePoint:R})},e.id)}))}(N)})]}),Object(S.jsx)(g.a,{orientation:"vertical",variant:"middle",flexItem:!0,sx:{mx:"1rem"}}),Object(S.jsxs)(b.a,{xs:12,md:3,item:!0,children:[Object(S.jsx)(p.a,{variant:"subtitle1",sx:{p:"0.25rem 0.5rem",fontWeight:"bold"},children:"\u5df2\u9078\u53d6"}),Object(S.jsx)(b.a,{container:!0,direction:"column",wrap:"nowrap",sx:{pl:"0.25rem",pr:"0.5rem",maxHeight:400,overflowY:"auto","& .MuiPaper-root":{p:"1.5rem 2rem",mb:"1rem"},"& .salePoint-id":{pt:"0.25rem",color:"text.secondary"}},children:function(e){return e.map((function(e){return Object(S.jsx)(b.a,{item:!0,xs:12,children:Object(S.jsx)(j.a,{elevation:0,square:!0,children:Object(S.jsx)(p.a,{variant:"subtitle2",children:e.salePointName})})},e.id)}))}(D)})]})]}),Object(S.jsx)(x.a,{component:"form",sx:w,children:Object(S.jsx)("div",{className:"submit-field",children:Object(S.jsx)(v.a,{size:"large",className:"submitBtn primaryBtn",onClick:function(){l(D)},endIcon:Object(S.jsx)(u.a,{}),children:"\u78ba\u8a8d"})})})]})]})}))},348:function(e,t,n){"use strict";n.r(t);var a=n(7),r=n(10),c=n(5),i=n(105),s=n(106),o=n(111),l=n(115),d=n(0),m=n.n(d),u=n(30),b=n(54),j=n(244),p=n(357),h=n(268),x=n(344),f=n(103),O=n(297),g=n.n(O),v=n(253),y=n(16),N=n(278),S=n(277),C=n(313),k=n(339),w=n(340),P=n(255),W=n(11),I=n(260),D=n(12),B=n(3),R=n(101),z=n(248),M=n.n(z),E=n(266),T=n.n(E),L=n(314),H=n(355),A=n(245),q=n(356),Y=n(362),U=n(315),F=n(351),G=n(2);var J=function(e){var t=e.comm,n=e.selectedComms,a=e.handleSelectComm;return Object(G.jsx)(U.a,{onClick:function(){return a(t)},children:Object(G.jsxs)(S.a,{container:!0,wrap:"nowrap",spacing:2,children:[Object(G.jsx)(S.a,{item:!0,container:!0,xs:"auto",alignItems:"center",children:Object(G.jsx)(F.a,{readOnly:!0,checked:n.some((function(e){return e.stockId===t.stockId}))})}),Object(G.jsxs)(S.a,{item:!0,container:!0,xs:!0,alignItems:"center",zeroMinWidth:!0,children:[Object(G.jsx)(h.a,{className:"comm-name",variant:"subtitle1",noWrap:!0,title:t.description,children:t.description}),Object(G.jsx)(h.a,{className:"comm-id",variant:"body2",noWrap:!0,children:t.stockId})]})]})})};var V={display:"flex",p:"1.5em 0 1.5rem",alignItems:"center",justifyContent:"space-between","& .input-field":{flex:"0 0 30%",color:"secondary.main",paddingRight:"0.5em"},"& .input-wrapper":{padding:"0.375em 0"},"& label":{fontWeight:"bold",fontSize:"1.125rem"},"& input":{width:"calc(100% - 4em)",lineHeight:1.25,padding:"0 0.25em","&::placeholder":{fontSize:"0.875rem",letterSpacing:"0.04em"},"&.error::placeholder":{color:"error.light"}},"& .submit-field":{flex:"0 0 18%",display:"flex",flexWrap:"wrap",justifyContent:"center","& .submitBtn":{flex:"0 0 100%",fontWeight:"bold",fontSize:"1.125rem",display:"inline-flex",justifyContent:"center"},"& .primaryBtn":{color:"background.paper",backgroundColor:function(e){return e.palette.primary.main},"&:hover":{backgroundColor:function(e){return e.palette.primary.light}}}}},K=Object(b.b)((function(e){return{comms:e.comms}}),{fetchComms:R.b})((function(e){var t=e.comms,n=e.open,a=e.handleClose,r=e.fetchComms,i=e.onCommSelectClick,s=Object(d.useState)({}),o=Object(y.a)(s,2),l=o[0],m=o[1],u=Object(d.useState)([]),b=Object(y.a)(u,2),p=b[0],x=b[1];Object(d.useEffect)((function(){n&&r()}),[n,r]);var f=function(e){var t=e.target,n=t.name,a=t.value,r=Object(c.a)(Object(c.a)({},l),{},Object(B.a)({},n,a));m(r)},O=function(e){var t=p.some((function(t){return t.stockId===e.stockId}))?p.filter((function(t){return t.stockId!==e.stockId})):[].concat(Object(D.a)(p),[e]);x(t)};return Object(G.jsxs)(H.a,{id:"dialog-member",fullWidth:!0,maxWidth:"sm",open:n,onClose:a,"aria-labelledby":"dialog-member",sx:{"& input, select":{outlineColor:function(e){return e.palette.primary.main}}},PaperProps:{sx:{maxWidth:900}},children:[Object(G.jsxs)(j.a,{sx:{margin:0,padding:"0.375em 1.75em 0.25em",bgcolor:"background.default","& h6":{color:"secondary.main",fontSize:"1.25rem",fontWeight:"bold"}},children:[Object(G.jsx)(h.a,{variant:"h6",children:"\u5546\u54c1\u9078\u53d6"}),a?Object(G.jsx)(A.a,{"aria-label":"close",onClick:a,sx:{position:"absolute",right:"0.5em",top:"0.25em",color:"error.main",padding:0},children:Object(G.jsx)(M.a,{sx:{width:"1.25em",height:"1.25em"}})}):null]}),Object(G.jsxs)(q.a,{sx:{padding:"0.25em 1.75em 2em",backgroundColor:"background.paper"},children:[Object(G.jsxs)(j.a,{component:"form",sx:V,children:[Object(G.jsx)("div",{className:"input-field",children:Object(G.jsxs)("div",{className:"input-wrapper",children:[Object(G.jsx)("label",{children:"\u540d\u7a31 : \xa0"}),Object(G.jsx)("input",{className:"input-md",type:"text",name:"name",value:l.name||"",onChange:f,autoComplete:"off"})]})}),Object(G.jsx)("div",{className:"input-field",children:Object(G.jsxs)("div",{className:"input-wrapper",children:[Object(G.jsx)("label",{children:"\u7de8\u865f : \xa0"}),Object(G.jsx)("input",{className:"input-md",type:"text",name:"stockIds",value:l.stockIds||"",onChange:f})]})}),Object(G.jsx)("div",{className:"submit-field",children:Object(G.jsx)(C.a,{disableElevation:!0,variant:"outlined",size:"large",className:"submitBtn",type:"submit",color:"primary",onClick:function(e){e.preventDefault(),r(Object(c.a)(Object(c.a)({},l.name&&{name:l.name}),l.stockIds&&{stockIds:l.stockIds}))},children:"\u641c\u5c0b"})}),Object(G.jsx)("div",{className:"submit-field",children:Object(G.jsx)(C.a,{size:"large",className:"submitBtn primaryBtn",onClick:function(){i(p)},endIcon:Object(G.jsx)(T.a,{}),children:"\u78ba\u8a8d"})})]}),Object(G.jsxs)(S.a,{container:!0,alignItems:"flex-start",sx:{p:"0.5rem 0.25rem",bgcolor:"#eeeeee",borderRadius:2,"& hr":{height:"unset"}},children:[Object(G.jsxs)(S.a,{xs:12,md:!0,item:!0,children:[Object(G.jsx)(h.a,{variant:"subtitle1",sx:{p:"0.25rem 0.5rem",fontWeight:"bold"},children:"\u5546\u54c1\u5217\u8868"}),Object(G.jsx)(S.a,{container:!0,sx:{px:"0.5rem",pb:"2rem",maxHeight:400,overflowY:"auto",display:"flex",gap:"1rem","& .MuiCard-root":{p:"1.5rem 1rem"},"& .comm-name":{flex:"0 0 100%"},"& .card-grid":{flex:"0 0 calc(50% - 0.5rem)",maxWidth:"calc(50% - 0.5rem)","& .MuiPaper-root":{bgcolor:"background.default"}}},children:function(e,t){return e.map((function(e){return Object(G.jsx)("div",{className:"card-grid",children:Object(G.jsx)(J,{comm:e,selectedComms:p,handleSelectComm:O})},e.stockId)}))}(t)})]}),Object(G.jsx)(Y.a,{orientation:"vertical",variant:"middle",flexItem:!0,sx:{mx:"1rem"}}),Object(G.jsxs)(S.a,{xs:12,md:3,item:!0,children:[Object(G.jsx)(h.a,{variant:"subtitle1",sx:{p:"0.25rem 0.5rem",fontWeight:"bold"},children:"\u5df2\u9078\u53d6"}),Object(G.jsx)(S.a,{container:!0,direction:"column",wrap:"nowrap",sx:{pl:"0.25rem",pr:"0.5rem",maxHeight:400,overflowY:"auto","& .MuiPaper-root":{p:"1.5rem 2rem",mb:"1rem"},"& .comm-id":{pt:"0.25rem",color:"text.secondary"}},children:function(e){return e.map((function(e){return Object(G.jsx)(S.a,{item:!0,xs:12,children:Object(G.jsxs)(L.a,{elevation:0,square:!0,children:[Object(G.jsx)(h.a,{variant:"subtitle2",children:e.description}),Object(G.jsx)(h.a,{className:"comm-id",variant:"subtitle2",children:e.stockId})]})},e.stockId)}))}(p)})]})]})]})]})})),Q=n(269),X=function(e,t){var n=e[0].currentTarget.dataset.changeType,a=t.formState.values.startDate,r=t.formState.values.endDate,c=t.fields.startDate,i=t.fields.endDate;a&&c.change(Object(P.a)(a,n)),r&&i.change(Object(P.a)(r,n))},Z=function(e,t){var n=t.fields.memberName,a=t.fields.memberId;n.change(e[0].memberName),a.change(e[0].id)},$=function(e,t){var n=t.fields.stockIds,a=t.fields.stockNames,r=e[0].map((function(e){return e.stockId})).join(","),c=e[0].map((function(e){return e.description})).join(",");n.change(r),a.change(c)},_=function(e,t){var n=t.fields.salePointIds,a=t.fields.salePointNames,r=e[0].map((function(e){return e.id})).join(","),c=e[0].map((function(e){return e.salePointName})).join(",");n.change(r),a.change(c)},ee=function(e,t){var n=new Date(e),a=t?n.getMonth()+1:n.getMonth()-1,r=t?n.getDate()+1:n.getDate()-1,c=new Date(n.getFullYear(),a,r);return Object(P.b)(c)},te={display:"flex",position:"relative",paddingBottom:"1rem","& label":{flex:"0 0 3.5rem",maxWidth:"3.5rem"},"& input":{flexGrow:1,"&:disabled":{color:"#000000",backgroundColor:"#fbfbfb"}},"& button":{padding:"0 7px",minWidth:"41px",marginLeft:"0.25rem",marginTop:"0.125rem",marginBottom:"0.125rem",color:"background.paper",bgcolor:"primary.light","&:hover":{bgcolor:"primary.main"}}},ne={display:"flex",position:"relative",paddingBottom:"1rem","& label":{flex:"0 0 4.5rem",maxWidth:"4.5rem"},"& input":{flex:"0 0 calc(100% - 4.5rem)",maxWidth:"calc(100% - 4.5rem)"},"& select":{flex:"0 0 calc(100% - 4.5rem)",maxWidth:"calc(100% - 4.5rem)"}},ae=Object(b.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.auth,n=e.handleSearchSubmit,i=e.currentSearchContent,s=Object(d.useState)(!1),o=Object(y.a)(s,2),l=o[0],m=o[1],u=Object(d.useState)(!1),b=Object(y.a)(u,2),p=b[0],h=b[1],x=Object(d.useState)(!1),f=Object(y.a)(x,2),O=f[0],g=f[1],v=Object(d.useState)([]),P=Object(y.a)(v,2),D=P[0],B=P[1];Object(d.useEffect)((function(){var e=function(){var e=Object(r.a)(Object(a.a)().mark((function e(){var n,r;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.h.get("",{headers:{Authorization:"Bearer "+t.authenticated},params:{limit:"zero"}});case 2:n=e.sent,r=n.data,B(r.list);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t.authenticated]);var R=function(){var e=Object(r.a)(Object(a.a)().mark((function e(t){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){return D.map((function(e){return Object(G.jsx)("option",{value:e.userId,children:e.realName},e.userId)}))};return Object(G.jsx)(N.b,{initialValues:Object(c.a)({},i),onSubmit:R,render:function(e){var t,n,a,r=e.handleSubmit,i=e.submitError,s=e.submitting,o=(e.pristine,e.form),d=e.values;return Object(G.jsx)(j.a,{component:"form",id:"search-field",onSubmit:r,sx:{fontWeight:"bold",borderBottom:"2px solid #c4c4c4","& label":{fontSize:"1.125rem"},"& input":{display:"inline-block",fontSize:"1rem",lineHeight:1.5,border:"1px solid #c4c4c4",borderRadius:"0.25em",paddingLeft:"0.25em",paddingRight:"0.25em",minWidth:0},"& select":{height:"1.78rem",border:"1px solid #c4c4c4",borderRadius:"0.25em",display:"inline-block",minWidth:0},"& input.error::placeholder":{color:"error.main"}},children:Object(G.jsxs)(S.a,{container:!0,justifyContent:"space-between",sx:{maxWidth:1100,margin:"0 auto"},children:[Object(G.jsxs)(j.a,{sx:{flex:"0 0 100%",maxWidth:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between","@media (min-width: 960px)":{flex:"0 0 41.25%",maxWidth:"41.25%"}},children:[Object(G.jsxs)(j.a,{sx:{display:"flex",position:"relative",paddingBottom:"1rem","& label":{flex:"0 0 3.5rem",maxWidth:"3.5rem"},"& .date-input-wrapper":{flexGrow:1,minWidth:0,"&:first-of-type":{marginRight:"0.5rem"},"& input":{width:"100%"}},"& .date-control":{flex:"0 0 3rem",minWidth:"3rem",color:"#767676",cursor:"pointer"}},children:[Object(G.jsx)("label",{className:"label",children:"\u65e5\u671f :"}),Object(G.jsx)(N.a,{name:"startDate",children:function(e){var t=e.input;e.meta;return Object(G.jsx)("div",{className:"date-input-wrapper",children:Object(G.jsx)("input",Object(c.a)(Object(c.a)({className:"date-input"},t),{},{type:"date",max:d.endDate,min:d.endDate&&ee(d.endDate,!1)}))})}}),Object(G.jsx)(N.a,{name:"endDate",children:function(e){var t=e.input;e.meta;return Object(G.jsx)("div",{className:"date-input-wrapper",children:Object(G.jsx)("input",Object(c.a)(Object(c.a)({className:"date-input"},t),{},{type:"date",min:d.startDate,max:d.startDate&&ee(d.startDate,!0)}))})}}),Object(G.jsxs)("div",{className:"date-control",children:[Object(G.jsx)(k.a,{viewBox:"1 2.5 20 20","data-change-type":"previous",onClick:o.mutators.changeDate}),Object(G.jsx)(w.a,{viewBox:"4 2.5 20 20","data-change-type":"next",onClick:o.mutators.changeDate})]})]}),Object(G.jsx)(N.a,{name:"memberName",children:function(e){var t=e.input;e.meta;return Object(G.jsxs)(j.a,{sx:te,children:[Object(G.jsx)("label",{children:"\u6703\u54e1 :"}),Object(G.jsx)("input",Object(c.a)(Object(c.a)({},t),{},{type:"text",autoComplete:"off",disabled:!0})),Object(G.jsx)(C.a,{disableElevation:!0,variant:"contained","data-change-type":"previous",onClick:function(){return m(!0)},children:"\u67e5\u8a62"}),Object(G.jsx)(C.a,{variant:"contained",disableElevation:!0,"data-change-type":"next",onClick:function(){return o.mutators.putInMember({})},children:"\u6e05\u9664"})]})}}),Object(G.jsx)(N.a,{name:"memberId",children:function(e){var t=e.input;e.meta;return Object(G.jsx)("input",Object(c.a)(Object(c.a)({},t),{},{type:"hidden"}))}}),Object(G.jsx)(I.a,{open:l,onSelectClick:(a=o.mutators.putInMember,function(e){a(e),m(!1)}),handleClose:function(){return m(!1)}})]}),Object(G.jsxs)(j.a,{sx:{flex:"0 0 100%",maxWidth:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between","@media (min-width: 600px)":{flex:"0 0 49%",maxWidth:"49%"},"@media (min-width: 960px)":{flex:"0 0 33.75%",maxWidth:"33.75%"}},children:[Object(G.jsx)(N.a,{name:"salePointNames",children:function(e){var t=e.input;e.meta;return Object(G.jsxs)(j.a,{sx:te,children:[Object(G.jsx)("label",{children:"\u9580\u5e02 :"}),Object(G.jsx)("input",Object(c.a)(Object(c.a)({},t),{},{type:"text",autoComplete:"off",disabled:!0})),Object(G.jsx)(C.a,{disableElevation:!0,variant:"contained",onClick:function(){return g(!0)},children:"\u67e5\u8a62"}),Object(G.jsx)(C.a,{variant:"contained",disableElevation:!0,onClick:function(){return o.mutators.putInSalePoints([])},children:"\u6e05\u9664"})]})}}),Object(G.jsx)(N.a,{name:"salePointIds",children:function(e){var t=e.input;e.meta;return Object(G.jsx)("input",Object(c.a)(Object(c.a)({},t),{},{type:"hidden"}))}}),Object(G.jsx)(Q.a,{open:O,onSalePointSelectClick:(n=o.mutators.putInSalePoints,function(e){n(e),g(!1)}),handleClose:function(){return g(!1)}}),Object(G.jsx)(N.a,{name:"stockNames",children:function(e){var t=e.input;e.meta;return Object(G.jsxs)(j.a,{sx:te,children:[Object(G.jsx)("label",{children:"\u5546\u54c1 :"}),Object(G.jsx)("input",Object(c.a)(Object(c.a)({},t),{},{type:"text",autoComplete:"off",disabled:!0})),Object(G.jsx)(C.a,{disableElevation:!0,variant:"contained","data-change-type":"previous",onClick:function(){return h(!0)},children:"\u67e5\u8a62"}),Object(G.jsx)(C.a,{variant:"contained",disableElevation:!0,"data-change-type":"next",onClick:function(){return o.mutators.putInComms([])},children:"\u6e05\u9664"})]})}}),Object(G.jsx)(N.a,{name:"stockIds",children:function(e){var t=e.input;e.meta;return Object(G.jsx)("input",Object(c.a)(Object(c.a)({},t),{},{type:"hidden"}))}}),Object(G.jsx)(K,{open:p,onCommSelectClick:(t=o.mutators.putInComms,function(e){t(e),h(!1)}),handleClose:function(){return h(!1)}})]}),Object(G.jsxs)(j.a,{sx:{flex:"0 0 100%",maxWidth:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between","@media (min-width: 600px)":{flex:"0 0 49%",maxWidth:"49%"},"@media (min-width: 960px)":{flex:"0 0 20%",maxWidth:"20%"}},children:[Object(G.jsx)(N.a,{name:"salesman",children:function(e){var t=e.input;e.meta;return Object(G.jsxs)(j.a,{sx:ne,children:[Object(G.jsx)("label",{children:"\u92b7\u552e\u54e1 :"}),Object(G.jsxs)("select",Object(c.a)(Object(c.a)({},t),{},{name:"",children:[Object(G.jsx)("option",{}),z()]}))]})}}),Object(G.jsx)(N.a,{name:"userId",children:function(e){var t=e.input;e.meta;return Object(G.jsxs)(j.a,{sx:ne,children:[Object(G.jsx)("label",{children:"\u670d\u52d9\u54e1 :"}),Object(G.jsxs)("select",Object(c.a)(Object(c.a)({},t),{},{name:"",children:[Object(G.jsx)("option",{}),z()]}))]})}})]}),Object(G.jsxs)(S.a,{container:!0,item:!0,xs:12,justifyContent:"center",sx:{padding:"1rem 0 1.5rem"},children:[i&&Object(G.jsx)("span",{className:"error",children:i}),Object(G.jsxs)(j.a,{sx:{display:"flex","& button":{fontSize:"1rem",minWidth:"6.5em",padding:"0.125rem 0.75rem",margin:"0 0.75em"},"& button.subBtn":{color:"secondary.matte",border:"1px solid #e8e8e8"},"& button.mainBtn":{fontWeight:"bold",color:"background.paper",backgroundColor:function(e){return e.palette.primary.main},"&:hover":{backgroundColor:"#fabd5e"}}},children:[Object(G.jsx)(C.a,{className:"subBtn",onClick:function(){return o.reset({})},disabled:s,variant:"outlined",type:"button",children:"\u5168\u90e8\u6e05\u9664"}),Object(G.jsx)(C.a,{className:"mainBtn",variant:"contained",disableElevation:!0,type:"submit",disabled:s,children:"\u641c\u5c0b"})]})]})]})})},mutators:{changeDate:X,putInMember:Z,putInComms:$,putInSalePoints:_}})})),re=n(309),ce=n.n(re),ie=n(308),se=n.n(ie),oe=n(261),le=function(e){var t,n,a=e.order,r=e.index,c=e.offset,i=e.creditInfo,s=e.onPrintClick;return Object(G.jsxs)(j.a,{className:"order-list-item",children:[Object(G.jsxs)(j.a,{className:"order-info-wrapper".concat(a.isReturn?" returned":""),children:[Object(G.jsxs)("div",{className:"order-info",children:[Object(G.jsx)("div",{className:"serial-sec",children:r+1+c}),Object(G.jsxs)("div",{className:"info-sec-container",children:[Object(G.jsxs)("div",{className:"info-sec-wrapper",children:[Object(G.jsxs)("div",{className:"info-sec",children:[Object(G.jsx)("span",{className:"info-title",children:"\u65e5\u671f : "}),Object(G.jsx)("span",{className:"info-content",children:Object(oe.e)(a.date)})]}),Object(G.jsxs)("div",{className:"info-sec",children:[Object(G.jsx)("span",{className:"info-title",children:"\u9580\u5e02 : "}),Object(G.jsx)("span",{className:"info-content",children:(null===a||void 0===a||null===(t=a.cashRegister)||void 0===t||null===(n=t.salePoint)||void 0===n?void 0:n.salePointName)||"-"})]})]}),Object(G.jsxs)("div",{className:"info-sec-wrapper",children:[Object(G.jsxs)("div",{className:"info-sec",children:[Object(G.jsx)("span",{className:"info-title",children:"\u6703\u54e1 : "}),Object(G.jsx)("span",{className:"info-content",children:a.memberInfo?"".concat(a.memberInfo.memberName," | ").concat(a.memberInfo.phone):"---"})]}),Object(G.jsxs)("div",{className:"info-sec",children:[Object(G.jsx)("span",{className:"info-title",children:"\u767c\u7968 : "}),Object(G.jsx)("span",{className:"info-content",children:a.invoicePage?a.invoicePage.no:"\u7121\u767c\u7968\u8cc7\u8a0a"})]})]}),Object(G.jsxs)("div",{className:"info-sec-wrapper",children:[Object(G.jsxs)("div",{className:"info-sec",children:[Object(G.jsx)("span",{className:"info-title",children:"\u92b7\u552e\u54e1 : "}),Object(G.jsx)("span",{className:"info-content",children:a.salesman&&a.salesman.realName})]}),Object(G.jsxs)("div",{className:"info-sec",children:[Object(G.jsx)("span",{className:"info-title",children:"\u670d\u52d9\u54e1 : "}),Object(G.jsx)("span",{className:"info-content",children:a.user&&a.user.realName})]})]})]})]}),Object(G.jsx)("div",{className:"order-id",children:a.no}),Object(G.jsx)(A.a,{className:"print-btn",onClick:function(){return s(a)},children:Object(G.jsx)(se.a,{})})]}),Object(G.jsx)(oe.a,{list:a.salesDetails||[]}),Object(G.jsxs)(j.a,{className:"order-detail",children:[Object(G.jsxs)("div",{className:"credit-info",children:[Object(G.jsxs)("div",{className:"last-yard",children:[Object(G.jsx)("span",{children:"\u4fe1\u7528\u5361\u865f\u672b\u56db\u78bc : "}),Object(G.jsx)("span",{children:i.cardNo?i.cardNo.replaceAll(" ","").slice(-4):"- - - -"})]}),Object(G.jsxs)("div",{className:"auth-yard",children:[Object(G.jsx)("span",{children:"\u6388\u6b0a\u78bc : "}),Object(G.jsx)("span",{children:i.approvalCode||"- - - -"})]})]}),Object(G.jsxs)("div",{className:"received-info",children:[Object(G.jsx)("div",{className:"received-list",children:Object(oe.d)(a.salesPayments||[])}),Object(G.jsxs)("div",{className:"total-sum",children:[Object(G.jsx)("span",{children:"\u7e3d\u91d1\u984d :\xa0"}),Object(G.jsx)("span",{children:"".concat(a.actualTotal,"\u5143")})]})]})]})]})},de=function(e){var t=e.filteredOrders,n=e.offset,a=Object(d.useRef)(null),r=Object(d.useState)(null),c=Object(y.a)(r,2),i=c[0],s=c[1],o=function(e){s(e)};Object(d.useEffect)((function(){if(i){var e=a.current,t=document.querySelector("#print-iframe");t.innerHTML=e.innerHTML,window.print(),t.innerHTML=null,s(null)}}),[i]);var l;return Object(G.jsxs)(m.a.Fragment,{children:[Object(G.jsx)(j.a,{id:"order-list-container",sx:{pt:"1.5rem",pb:"1.5rem","& .order-list-item":{borderBottom:"2px solid #a4a4a4",marginBottom:"4rem",boxShadow:"0px 0px 14px -10px #bbbbbb","&:last-of-type":{marginBottom:0}},"& .order-info-wrapper":{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center",bgcolor:"secondary.matte","&.returned":{bgcolor:"#878787"},"& .order-info":{flexGrow:1,display:"inline-flex",flexWrap:"wrap",alignItems:"center",fontWeight:"bold"},"& .order-id":{color:"background.paper",py:"0.5em",pr:"0.5em"},"& .print-btn":{mr:"0.25em",color:"background.paper"},"& .serial-sec":{flex:"0 0 4rem",display:"inline-flex",justifyContent:"center",fontSize:"1.5rem",color:"background.paper",padding:"0 1em",minWidth:0},"& .info-sec-container":{flex:"0 0 calc(100% - 4rem)",display:"inline-flex",flexWrap:"wrap",padding:"0.25em 0"},"& .info-sec-wrapper":{flex:"0 0 100%",display:"inline-flex",flexWrap:"wrap",paddingRight:"1.75em"},"& .info-sec":{flex:"0 0 50%",paddingTop:"0.125em",paddingBottom:"0.125em","@media (min-width: 600px)":{flex:"unset"}},"& .info-title":{color:function(e){return e.palette.primary.main}},"& .info-content":{color:"background.paper"}},"& .order-table":oe.c,"& .order-detail":{display:"flex",justifyContent:"space-between",color:"text.secondary",backgroundColor:"background.default",padding:"0.5em 1em","& .credit-info":{display:"inline-flex",flexWrap:"wrap",alignItems:"center"},"& .credit-info > div":{fontSize:"0.9rem",flex:"0 0 100%",display:"inline-block",paddingRight:"1em"},"& .received-info":{display:"inline-flex",alignItems:"center"},"& .received-info > div":{display:"inline-flex",alignItems:"center"},"& .received-list > div":{display:"inline-block",paddingRight:"1em"},"& .total-sum":{fontSize:"1.25rem",fontWeight:"bold",color:"secondary.main"}},"@media (min-width: 600px)":{"& .order-info-wrapper .info-sec-wrapper":{flexDirection:"column",flex:"unset"},"& .order-info-wrapper .info-sec-wrapper:last-child":{paddingRight:0},"& .order-info-wrapper .info-sec":{flex:"unset"}}},children:(l=t,l.map((function(e,t){var a,r=(null===(a=e.salesPayments.find((function(e){return Boolean(e.creditCard)})))||void 0===a?void 0:a.creditCard)||{};return Object(G.jsx)(le,{index:t,order:e,offset:n,creditInfo:r,onPrintClick:o},e.id)})))}),Object(G.jsx)(j.a,{sx:{display:"flex",justifyContent:"flex-end",pb:"1.5rem"},children:Object(G.jsx)(A.a,{onClick:function(){var e=document.getElementById("pagination").offsetTop;window.scroll({top:e,left:0,behavior:"auto"})},size:"large",sx:{bgcolor:"primary.main",color:"background.default","&:hover":{bgcolor:"primary.light"}},children:Object(G.jsx)(ce.a,{fontSize:"large"})})}),Object(G.jsx)(j.a,{className:"print-content",ref:a,sx:{display:"none"},children:i&&Object(G.jsx)(oe.b,{order:i})})]})},me=n(347),ue=function(e){var t=e.totalPage,n=e.currentPage,a=e.handlePageChange;return Object(G.jsx)("div",{id:"pagination",children:Object(G.jsx)(me.a,{count:t,page:n,siblingCount:2,size:"small",shape:"rounded",showFirstButton:!0,showLastButton:!0,onChange:a,sx:{padding:"2rem 0 0rem","& .MuiPagination-ul":{justifyContent:"flex-end"},"& .MuiPaginationItem-root":{color:"secondary.main"},"& .MuiPaginationItem-page.Mui-selected":{color:"background.default",backgroundColor:function(e){return e.palette.primary.main}}}})})},be=n(310),je=n(246),pe=function(e){return e?e.replaceAll("-","/"):"-"},he={flex:"0 0 100%",borderRadius:"0.25em",backgroundColor:"#f7f7f7",marginBottom:"2em",boxShadow:"0px 0px 12px -2px #cacaca",overflow:"hidden","@media (min-width: 600px)":{flex:"0 0 49%"},"& .header-sec":{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between",backgroundColor:"secondary.matte",padding:"0.5em 0.75em"},"& .date-sec":{letterSpacing:"0.025em",fontWeight:"bold",fontSize:"1.15rem",color:"background.paper"},"& .store-sec":{fontSize:"0.9rem",color:"background.paper"},"& .receiveds-sec":{display:"flex",flexWrap:"wrap",padding:"0.5em 0","& > div":{flex:"0 0 20%",display:"inline-block",fontWeight:"bold",textAlign:"center",color:"#333333",padding:"0 0.5em",margin:"0.25em 0",borderRight:"1px solid #cccccc"},"& .title":{fontSize:"0.9rem",color:"text.secondary"},"& .content":{fontSize:"1.125rem"}}},xe=function(e){var t=e.salePayments,n=e.currentSearchContent,a=function(e){var t={};return e.forEach((function(e){t[e.paymentName]||(t[e.paymentName]=0),t[e.paymentName]+=e.value})),t},r=function(e,t,a){return t&&0!==t.length?Object(G.jsx)(be.a,{children:Object(G.jsxs)(j.a,{sx:he,children:[Object(G.jsxs)("div",{className:"header-sec",children:[Object(G.jsxs)("div",{className:"date-sec",children:[Object(G.jsx)("span",{children:pe(n.startDate)}),"\xa0 - \xa0",Object(G.jsx)("span",{children:pe(n.endDate)})]}),Object(G.jsx)("div",{className:"store-sec",children:e})]}),Object(G.jsx)("div",{className:"receiveds-sec",children:t})]})},a):null};return Object(G.jsx)(j.a,{component:"section",id:"daily-statistic-list",sx:{padding:"3rem 0 1.5rem",borderBottom:"2px dashed #dddddd"},children:Object(G.jsx)(j.a,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"space-between"},children:Object(G.jsxs)(je.a,{component:null,children:[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=a(e),n=Object.keys(t).map((function(e){return Object(G.jsxs)(j.a,{children:[Object(G.jsxs)("div",{className:"title",children:[e,":"]}),Object(G.jsx)("span",{className:"content",children:t[e]})]},e)}));return r("\u5168\u90e8 \u6536\u9280\u6a5f",n,"All")}(t),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map((function(t){var n=e[t],c=a(n),i=Object.keys(c).map((function(e){return Object(G.jsxs)(j.a,{children:[Object(G.jsxs)("div",{className:"title",children:[e,":"]}),Object(G.jsx)("span",{className:"content",children:c[e]})]},e)}));return r(t,i,t)}))}(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};return e.forEach((function(e){var n=e.cashRegisterName;t[n]||(t[n]=[]),t[n].push(e)})),t}(t))]})})})},fe=["startDate","endDate","memberName","memberId","salePointNames","salePointIds","stockNames","stockIds","salesman","userId"],Oe={startDate:Object(P.b)(Date.now()),endDate:Object(P.b)(Date.now())},ge="?"+new URLSearchParams(Oe).toString(),ve=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={currentSearchContent:Oe,currentSearchString:ge,currentPage:1,filteredOrders:[],salePayments:[]},e.fetchSales=function(t){e.props.fetchSales(Object(c.a)({limit:5,sort:"date desc"},t))},e.fetchSalePayments=function(){var t=Object(r.a)(Object(a.a)().mark((function t(n){var r,c;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W.g.get("/payment/summary",{headers:{Authorization:"Bearer "+e.props.auth.authenticated},params:n});case 2:r=t.sent,c=r.data,e.setState({salePayments:c.list});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.componentDidMount=function(){if(e.props.location.search){var t={},n=g.a.parse(e.props.location.search);fe.forEach((function(e){n[e]&&(t[e]=n[e])})),e.setState(Object(c.a)({currentSearchContent:t,currentSearchString:e.props.location.search},Number(n.page)?{currentPage:Number(n.page)}:{currentPage:1})),e.fetchSales(Object(c.a)(Object(c.a)({},t),Number(n.page)?{page:Number(n.page)}:{})),t.startDate&&t.endDate&&e.fetchSalePayments(Object(c.a)(Object(c.a)({},t),Number(n.page)?{page:Number(n.page)}:{}))}else e.fetchSales(Object(c.a)({page:1},Oe)),e.fetchSalePayments(Object(c.a)({page:1},Oe)),e.props.history.push(ge)},e.componentDidUpdate=function(){if(e.props.location.search!==e.state.currentSearchString){var t=g.a.parse(e.props.location.search,{sort:!1}),n=Object(x.a)(t,["page"]),a=new URLSearchParams(n).toString(),r=new URLSearchParams(e.state.currentSearchContent).toString(),i=Number(t.page)||1;a!==r?e.setState({currentPage:i,currentSearchContent:n,currentSearchString:e.props.location.search}):e.setState({currentPage:i,currentSearchString:e.props.location.search}),e.fetchSales(Object(c.a)(Object(c.a)({},t),{},{page:i})),t.startDate&&t.endDate&&e.fetchSalePayments(Object(c.a)(Object(c.a)({},t),{},{page:i}))}},e.changePage=function(t){e.setState({currentPage:t}),e.fetchSales(Object(c.a)(Object(c.a)({},e.state.currentSearchContent),{},{page:t}))},e.filterParams=function(e){var t={};return fe.forEach((function(n){e[n]&&(t[n]=e[n])})),t},e.handlePageChange=function(t,n){e.changePage(n);var a=1===n?Object(x.a)(e.state.currentSearchContent,["page"]):Object(c.a)(Object(c.a)({},e.state.currentSearchContent),{},{page:n}),r="?"+new URLSearchParams(a).toString(),i=document.getElementById("pagination").offsetTop;e.setState({currentSearchString:r}),e.props.history.push(r),window.scroll({top:i,left:0,behavior:"smooth"})},e.handleSearchSubmit=function(t){var n=e.filterParams(t);e.setState({currentSearchContent:n,currentPage:1}),e.fetchSales(n),n.startDate&&n.endDate?e.fetchSalePayments(n):e.setState({salePayments:[]});var a="?"+new URLSearchParams(n).toString();e.setState({currentSearchString:a}),e.props.history.push(a)},e}return Object(s.a)(n,[{key:"render",value:function(){var e=5*(this.state.currentPage-1);return Object(G.jsx)(j.a,{id:"pos-order-list",component:"div",sx:{bgcolor:"background.paper"},children:Object(G.jsxs)(p.a,{maxWidth:!1,sx:{bgcolor:"background.paper",maxWidth:1600,minHeight:"calc(100vh - 2.5rem)",boxShadow:"0px 0px 12px -6px #cccccc"},children:[Object(G.jsx)(h.a,{variant:"h1",component:"div",sx:{fontSize:"1.75rem",fontWeight:"bold",textAlign:"center",color:"secondary.main",padding:"1.75rem 0 1.75rem",margin:0},children:"\u92b7\u552e\u660e\u7d30\u8868"}),Object(G.jsx)(ae,{currentSearchContent:this.state.currentSearchContent,handleSearchSubmit:this.handleSearchSubmit}),this.state.currentSearchContent.startDate&&this.state.currentSearchContent.endDate&&Object(G.jsx)(xe,{salePayments:this.state.salePayments,currentSearchContent:this.state.currentSearchContent}),Object(G.jsx)(ue,{totalPage:this.props.sales.totalPage,currentPage:this.state.currentPage,handlePageChange:this.handlePageChange}),Object(G.jsx)(de,{offset:e,filteredOrders:this.props.sales.list||[]})]})})}}]),n}(m.a.Component),ye=Object(u.c)(Object(v.a)(),Object(b.b)((function(e){return{auth:e.auth,sales:e.sales}}),{fetchSales:f.c}));t.default=ye(ve)}}]);
//# sourceMappingURL=9.2925e50a.chunk.js.map